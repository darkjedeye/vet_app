(function(n,t,i,r){"use strict";Foundation.libs.clearing={name:"clearing",version:"5.2.0",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;<\/a><div class="visible-img" style="display: none"><div class="clearing-touch-label"><\/div><img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><p class="clearing-caption"><\/p><a href="#" class="clearing-main-prev"><span><\/span><\/a><a href="#" class="clearing-main-next"><span><\/span><\/a><\/div>'},close_selectors:".clearing-close",touch_label:"&larr;&nbsp;Swipe to Advance&nbsp;&rarr;",init:!1,locked:!1},init:function(n,t,i){var r=this;Foundation.inherit(this,"throttle image_loaded");this.bindings(t,i);r.S(this.scope).is("["+this.attr_name()+"]")?this.assemble(r.S("li",this.scope)):r.S("["+this.attr_name()+"]",this.scope).each(function(){r.assemble(r.S("li",this))})},events:function(r){var u=this,f=u.S;n(".scroll-container").length>0&&(this.scope=n(".scroll-container"));f(this.scope).off(".clearing").on("click.fndtn.clearing","ul["+this.attr_name()+"] li",function(n,t,i){var t=t||f(this),i=i||t,r=t.next("li"),e=t.closest("["+u.attr_name()+"]").data(u.attr_name(!0)+"-init"),o=f(n.target);n.preventDefault();e||(u.init(),e=t.closest("["+u.attr_name()+"]").data(u.attr_name(!0)+"-init"));i.hasClass("visible")&&t[0]===i[0]&&r.length>0&&u.is_open(t)&&(i=r,o=f("img",i));u.open(o,t,i);u.update_paddles(i)}).on("click.fndtn.clearing",".clearing-main-next",function(n){u.nav(n,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(n){u.nav(n,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(n){Foundation.libs.clearing.close(n,this)});n(i).on("keydown.fndtn.clearing",function(n){u.keydown(n)});f(t).off(".clearing").on("resize.fndtn.clearing",function(){u.resize()});this.swipe_events(r)},swipe_events:function(){var t=this,n=t.S;n(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(t){t.touches||(t=t.originalEvent);var i={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:r};n(this).data("swipe-transition",i);t.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(i){var r,u;(i.touches||(i=i.originalEvent),i.touches.length>1||i.scale&&i.scale!==1)||(r=n(this).data("swipe-transition"),typeof r=="undefined"&&(r={}),r.delta_x=i.touches[0].pageX-r.start_page_x,typeof r.is_scrolling=="undefined"&&(r.is_scrolling=!!(r.is_scrolling||Math.abs(r.delta_x)<Math.abs(i.touches[0].pageY-r.start_page_y))),r.is_scrolling||r.active||(i.preventDefault(),u=r.delta_x<0?"next":"prev",r.active=!0,t.nav(i,u)))}).on("touchend.fndtn.clearing",".visible-img",function(t){n(this).data("swipe-transition",{});t.stopPropagation()})},assemble:function(t){var i=t.parent();if(!i.parent().hasClass("carousel")){i.after('<div id="foundationClearingHolder"><\/div>');var f=this.S("#foundationClearingHolder"),e=i.data(this.attr_name(!0)+"-init"),o=i.detach(),u={grid:'<div class="carousel">'+o[0].outerHTML+"<\/div>",viewing:e.templates.viewing},r='<div class="clearing-assembled"><div>'+u.viewing+u.grid+"<\/div><\/div>",s=this.settings.touch_label;Modernizr.touch&&(r=n(r).find(".clearing-touch-label").html(s).end());f.after(r).remove()}},open:function(t,r,u){function c(){setTimeout(function(){this.image_loaded(f,function(){f.outerWidth()!==1||h?y.call(this,f):c.call(this)}.bind(this))}.bind(this),50)}function y(t){var i=n(t);t.css("visibility","visible");a.css("overflow","hidden");o.addClass("clearing-blackout");s.addClass("clearing-container");e.show();this.fix_height(u).caption(l.S(".clearing-caption",e),i).center_and_label(t,v).shift(r,u,function(){u.siblings().removeClass("visible");u.addClass("visible")})}var l=this,a=n(i.body),o=u.closest(".clearing-assembled"),s=n("div",o).first(),e=n(".visible-img",s),f=n("img",e).not(t),v=n(".clearing-touch-label",".clearing-blackout"),h=!1;f.error(function(){h=!0});this.locked()||(f.attr("src",this.load(t)).css("visibility","hidden"),c.call(this))},close:function(t,r){t.preventDefault();var u=function(n){return/blackout/.test(n.selector)?n:n.closest(".clearing-blackout")}(n(r)),o=n(i.body),f,e;return r===t.target&&u&&(o.css("overflow",""),f=n("div",u).first(),e=n(".visible-img",f),this.settings.prev_index=0,n("ul["+this.attr_name()+"]",u).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),f.removeClass("clearing-container"),e.hide()),!1},is_open:function(n){return n.parent().prop("style").length>0},keydown:function(t){var i=n(".clearing-blackout ul["+this.attr_name()+"]"),r=this.rtl?37:39,u=this.rtl?39:37;t.which===r&&this.go(i,"next");t.which===u&&this.go(i,"prev");t.which===27&&this.S("a.clearing-close").trigger("click")},nav:function(t,i){var r=n("ul["+this.attr_name()+"]",".clearing-blackout");t.preventDefault();this.go(r,i)},resize:function(){var t=n("img",".clearing-blackout .visible-img"),i=n(".clearing-touch-label",".clearing-blackout");t.length&&this.center_and_label(t,i)},fix_height:function(n){var t=n.parent().children(),i=this;return t.each(function(){var n=i.S(this),t=n.find("img");n.height()>t.outerHeight()&&n.addClass("fix-height")}).closest("ul").width(t.length*100+"%"),this},update_paddles:function(n){var t=n.closest(".carousel").siblings(".visible-img");n.next().length>0?this.S(".clearing-main-next",t).removeClass("disabled"):this.S(".clearing-main-next",t).addClass("disabled");n.prev().length>0?this.S(".clearing-main-prev",t).removeClass("disabled"):this.S(".clearing-main-prev",t).addClass("disabled")},center_and_label:function(n,t){return this.rtl?(n.css({marginRight:-(n.outerWidth()/2),marginTop:-(n.outerHeight()/2),left:"auto",right:"50%"}),t.length>0&&t.css({marginRight:-(t.outerWidth()/2),marginTop:-(n.outerHeight()/2)-t.outerHeight()-10,left:"auto",right:"50%"})):(n.css({marginLeft:-(n.outerWidth()/2),marginTop:-(n.outerHeight()/2)}),t.length>0&&t.css({marginLeft:-(t.outerWidth()/2),marginTop:-(n.outerHeight()/2)-t.outerHeight()-10})),this},load:function(n){var t;return(t=n[0].nodeName==="A"?n.attr("href"):n.parent().attr("href"),this.preload(n),t)?t:n.attr("src")},preload:function(n){this.img(n.closest("li").next()).img(n.closest("li").prev())},img:function(n){if(n.length){var i=new Image,t=this.S("a",n);i.src=t.length?t.attr("href"):this.S("img",n).attr("src")}return this},caption:function(n,t){var i=t.data("caption");return i?n.html(i).show():n.text("").hide(),this},go:function(n,t){var r=this.S(".visible",n),i=r[t]();i.length&&this.S("img",i).trigger("click",[r,i])},shift:function(n,t,i){var u=t.parent(),c=this.settings.prev_index||t.index(),f=this.direction(u,n,t),e=this.rtl?"right":"left",h=parseInt(u.css("left"),10),o=t.outerWidth(),s,r={};t.index()===c||/skip/.test(f)?/skip/.test(f)&&(s=t.index()-this.settings.up_count,this.lock(),s>0?(r[e]=-(s*o),u.animate(r,300,this.unlock())):(r[e]=0,u.animate(r,300,this.unlock()))):/left/.test(f)?(this.lock(),r[e]=h+o,u.animate(r,300,this.unlock())):/right/.test(f)&&(this.lock(),r[e]=h-o,u.animate(r,300,this.unlock()));i()},direction:function(n,t,i){var u=this.S("li",n),o=u.outerWidth()+u.outerWidth()/4,f=Math.floor(this.S(".clearing-container").outerWidth()/o)-1,r=u.index(i),e;return this.settings.up_count=f,e=this.adjacent(this.settings.prev_index,r)?r>f&&r>this.settings.prev_index?"right":r>f-1&&r<=this.settings.prev_index?"left":!1:"skip",this.settings.prev_index=r,e},adjacent:function(n,t){for(var i=t+1;i>=t-1;i--)if(i===n)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},off:function(){this.S(this.scope).off(".fndtn.clearing");this.S(t).off(".fndtn.clearing")},reflow:function(){this.init()}}})(jQuery,this,this.document);
/*
//# sourceMappingURL=foundation.clearing.min.js.map
*/