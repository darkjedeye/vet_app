(function(n){n.extend(n.jqx._jqxGrid.prototype,{_updatefilterrowui:function(t){for(var c=this.columns.records.length,o=0,r,u,i,s,e,h,f=0;f<c;f++)if(r=this.columns.records[f],u=r.width,u<r.minwidth&&(u=r.minwidth),u>r.maxwidth&&(u=r.maxwidth),i=n(this.filterrow[0].cells[f]),i.css("left",o),s=!0,i.width()==u&&(s=!1),t&&(s=!0),i.width(u),i[0].left=o,r.hidden&&r.hideable?i.css("display","none"):o+=u,s)if(r.createfilterwidget&&r.filtertype=="custom")r.createfilterwidget(r,i);else if(r.filterable){e=function(t,i){var r=n(i.children()[0]);r.width(u-10)};switch(r.filtertype){case"number":n(i.children()[0]).width(u),i.find("input").width(u-30);break;case"date":this.host.jqxDateTimeInput?n(i.children()[0]).jqxDateTimeInput({width:u-10}):e(this,i);break;case"textbox":case"default":e(this,i);break;case"list":case"checkedlist":this.host.jqxDropDownList?n(i.children()[0]).jqxDropDownList({width:u-10}):e(this,i);break;case"bool":case"boolean":this.host.jqxCheckBox||e(this,i)}}h=n(this.filterrow.children()[0]),h.width(parseInt(o)+2),h.height(this.filterrowheight)},clearfilterrow:function(){var f,e,r,u,t,i;for(this._disablefilterrow=!0,f=this.columns.records.length,e=0,r=0;r<f;r++)if(u=this.columns.records[r],t=n(this.filterrow[0].cells[r]),u.filterable){i=function(t,i){var r=n(i.children()[0]);r.val(""),r[0]&&(t["_oldWriteText"+r[0].id]="")};switch(u.filtertype){case"number":t.find("input").val("");break;case"date":this.host.jqxDateTimeInput?n(t.children()[0]).jqxDateTimeInput("setDate",null):i(this,t);break;case"textbox":case"default":i(this,t);break;case"list":this.host.jqxDropDownList?n(t.children()[0]).jqxDropDownList("clearSelection"):i(this,t);break;case"checkedlist":this.host.jqxDropDownList?n(t.children()[0]).jqxDropDownList("checkAll",!1):i(this,t);break;case"bool":case"boolean":this.host.jqxCheckBox?n(t.children()[0]).jqxCheckBox({checked:null}):i(this,t)}}this._disablefilterrow=!1},_applyfilterfromfilterrow:function(){var nt,f,y,i,r,b,a,k,tt,it,d,g,c,rt,ut,t,o,l,s,v,h;if(this._disablefilterrow!=!0){for(nt=this.columns.records.length,f=this.that,y=0;y<nt;y++)if((i=new n.jqx.filter,r=this.columns.records[y],r.filterable)&&r.datafield!==null){var ft=f._getcolumntypebydatafield(r),u=f._getfiltertype(ft),p=1,e=!0,ot=r.filtertype,w=function(n,t,i){var s=!0,r,u,e,o;if(n._filterwidget)if(r=n._filterwidget.val(),r!=""){if(u="equal",t=="stringfilter"&&(u="contains"),t=="numericfilter"&&f.gridlocalization.decimalseparator==","&&r.indexOf(f.gridlocalization.decimalseparator)>=0&&(r=r.replace(f.gridlocalization.decimalseparator,".")),t!="stringfilter"&&(e=0,r.indexOf(">")!=-1&&(u="greater_than",e=1),r.indexOf("<")!=-1&&(u="less_than",e=1),r.indexOf("=")!=-1&&(u=="greater_than"?(u="greater_than_or_equal",e=2):u=="less_than"?(u="less_than_or_equal",e=2):(u="equal",e=1)),e!=0&&(r=r.substring(e),r.length<1)))return!1;n.filtercondition!=undefined&&(u=n.filtercondition),o=t=="datefilter"?i.createfilter(t,r,u,null,n.cellsformat,f.gridlocalization):i.createfilter(t,r,u),i.addfilter(p,o)}else s=!1;return s};switch(r.filtertype){case"date":r._filterwidget.jqxDateTimeInput?(t=r._filterwidget.jqxDateTimeInput("getRange"),t!=null&&t.from!=null&&t.to!=null?(o="GREATER_THAN_OR_EQUAL",b=new Date(0),b.setHours(0),b.setFullYear(t.from.getFullYear(),t.from.getMonth(),t.from.getDate()),a=new Date(0),a.setHours(0),a.setFullYear(t.to.getFullYear(),t.to.getMonth(),t.to.getDate()),a.setHours(t.to.getHours()),a.setMinutes(t.to.getMinutes()),a.setSeconds(t.to.getSeconds()),k=i.createfilter(u,b,o),i.addfilter(0,k),tt="LESS_THAN_OR_EQUAL",it=i.createfilter(u,a,tt),i.addfilter(0,it)):e=!1):e=w(r,u,i);break;case"number":r._filterwidget?(t=r._filterwidget.find("input").val(),f.gridlocalization.decimalseparator==","&&t.indexOf(f.gridlocalization.decimalseparator)>=0&&(t=t.replace(f.gridlocalization.decimalseparator,".")),d=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),c=i.getoperatorsbyfiltertype(u)[d],f.updatefilterconditions&&(g=f.updatefilterconditions(u,i.getoperatorsbyfiltertype(u)),g!=undefined&&i.setoperatorsbyfiltertype(u,g),c=i.getoperatorsbyfiltertype(u)[d]),rt=c=="NULL"||c=="NOT_NULL",ut=c=="EMPTY"||c=="NOT_EMPTY",t!=undefined&&t.length>0||rt||ut?(k=i.createfilter(u,new Number(t),c,null,r.cellsformat,f.gridlocalization),i.addfilter(0,k)):e=!1):e=!1;break;case"textbox":case"default":e=w(r,u,i);break;case"bool":case"boolean":r._filterwidget.jqxCheckBox?(t=r._filterwidget.jqxCheckBox("checked"),t!=null?(o="equal",l=i.createfilter(u,t,o),i.addfilter(p,l)):e=!1):e=w(r,u,i);break;case"list":if(s=r._filterwidget.jqxDropDownList("listBox"),s.selectedIndex>0){var et=s.getItem(s.selectedIndex),t=et.label,o="equal",l=i.createfilter(u,t,o);i.addfilter(p,l)}else e=!1;break;case"checkedlist":if(r._filterwidget.jqxDropDownList)if(s=r._filterwidget.jqxDropDownList("listBox"),v=s.getCheckedItems(),v.length==0){for(h=1;h<s.items.length;h++){var t=s.items[h].label,o="not_equal",l=i.createfilter(u,t,o);i.addfilter(0,l)}e=!0}else if(v.length!=s.items.length)for(h=0;h<v.length;h++){var t=v[h].label,o="equal",l=i.createfilter(u,t,o);i.addfilter(p,l)}else e=!1;else e=w(r,u,i)}this._loading||(e?this.addfilter(r.displayfield,i,!1):this.removefilter(r.displayfield,!1))}this._loading||this.applyfilters("filterrow")}},_updatefilterrow:function(){var e=n('<div style="position: relative;" id="row00'+this.element.id+'"><\/div>'),s=0,h=this.columns.records.length,c=this.toThemeProperty("jqx-grid-cell"),v,y,r,t,u,i,f,o,p;c+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),c+=" "+this.toThemeProperty("jqx-grid-cell-filter-row");var l=h+10,a=[],w=this.that;for(this.filterrow[0].cells=a,e.height(this.filterrowheight),this.filterrow.children().detach(),this.filterrow.append(e),this._filterrowcache||(this._filterrowcache=[]),this._initcolumntypes(),v=!1,y=[],r=0;r<h;r++)t=this.columns.records[r],u=t.width,u<t.minwidth&&(u=t.minwidth),u>t.maxwidth&&(u=t.maxwidth),i=n('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+c+'"><\/div>'),e.append(i),i.css("left",s),this.rtl?(i.css("z-index",l++),i.css("border-left-width","1px")):i.css("z-index",l--),i.width(u),i[0].left=s,t.hidden&&t.hideable?i.css("display","none"):s+=u,a[a.length]=i[0],f=!0,this.rtl?(this.groupable&&(o=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+o+r>h-1&&(f=!1)),this.showrowdetailscolumn&&this.rowdetails&&r==h-1&&(f=!1)):(this.groupable&&(o=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+o>r&&(f=!1)),this.showrowdetailscolumn&&this.rowdetails&&r==0&&(f=!1)),f&&(t.filtertype=="custom"&&t.createfilterwidget?(p=function(){w._applyfilterfromfilterrow()},t.createfilterwidget(t,i,p)):t.filterable&&(this._filterrowcache[t.datafield]?(v=!0,i.append(this._filterrowcache[t.datafield]),t._filterwidget=this._filterrowcache[t.datafield]):(this._addfilterwidget(t,i,u),y[t.datafield]=t._filterwidget)));this._filterrowcache=y,n.jqx.browser.msie&&n.jqx.browser.version<8&&e.css("z-index",l--),e.width(parseInt(s)+2),this.filterrow.addClass(c),this.filterrow.css("border-top-width","1px"),this.filterrow.css("border-right-width","0px"),v&&this._updatefilterrowui(!0)},_addfilterwidget:function(t,i,r){for(var u=this.that,h="",y,a,o,r,nt,w,f,b,k,p,c,tt,rt,e,g,l,ot,st,s,v=0;v<u.dataview.filters.length;v++)if(y=u.dataview.filters[v],y.datafield&&y.datafield==t.datafield){h=y.filter.getfilters()[0].value;break}a=function(i,u){var f=n('<input autocomplete="off" type="textarea"/>');f[0].id=n.jqx.utilities.createId(),f.addClass(i.toThemeProperty("jqx-widget")),f.addClass(i.toThemeProperty("jqx-input")),f.addClass(i.toThemeProperty("jqx-widget-content")),i.rtl&&f.css("direction","rtl"),f.appendTo(u),f.width(r-10),f.height(i.filterrowheight-10),f.css("margin","4px"),t.createfilterwidget&&t.createfilterwidget(t,u,f),t._filterwidget=f,f.focus(function(){i.focusedfilter=f,f.addClass(i.toThemeProperty("jqx-fill-state-focus"))}),f.blur(function(){f.removeClass(i.toThemeProperty("jqx-fill-state-focus"))}),f.keydown(function(n){n.keyCode=="13"&&i._applyfilterfromfilterrow(),f[0]._writeTimer&&clearTimeout(f[0]._writeTimer),f[0]._writeTimer=setTimeout(function(){i._loading||i["_oldWriteText"+f[0].id]!=f.val()&&(i._applyfilterfromfilterrow(),i["_oldWriteText"+f[0].id]=f.val())},800),i.focusedfilter=f}),i.host.removeClass("jqx-disableselect"),i.content.removeClass("jqx-disableselect"),f.val(h)},t.datatype!=null&&(t.filtertype=="number"&&(t.datatype=="string"||t.datatype=="date"||t.datatype=="bool")&&(t.filtertype="textbox"),t.filtertype=="date"&&(t.datatype=="string"||t.datatype=="number"||t.datatype=="bool")&&(t.filtertype="textbox"),t.filtertype=="bool"&&(t.datatype=="string"||t.datatype=="number"||t.datatype=="date")&&(t.filtertype="textbox"));switch(t.filtertype){case"number":o=n("<div><\/div>"),o.width(i.width()),o.height(this.filterrowheight),i.append(o),r=i.width()-20,nt=function(t,i){var r=n('<input style="float: left;" autocomplete="off" type="textarea"/>');return u.rtl&&(r.css("float","right"),r.css("direction","rtl")),r[0].id=n.jqx.utilities.createId(),r.addClass(u.toThemeProperty("jqx-widget")),r.addClass(u.toThemeProperty("jqx-input")),r.addClass(u.toThemeProperty("jqx-widget-content")),r.appendTo(t),r.width(i-10),r.height(u.filterrowheight-10),r.css("margin","4px"),r.css("margin-right","2px"),r.focus(function(){u.focusedfilter=r,r.addClass(u.toThemeProperty("jqx-fill-state-focus"))}),r.blur(function(){r.removeClass(u.toThemeProperty("jqx-fill-state-focus"))}),r.keydown(function(n){n.keyCode=="13"&&u._applyfilterfromfilterrow(),r[0]._writeTimer&&clearTimeout(r[0]._writeTimer),r[0]._writeTimer=setTimeout(function(){u._loading||u["_oldWriteText"+r[0].id]!=r.val()&&(u._applyfilterfromfilterrow(),u["_oldWriteText"+r[0].id]=r.val())},800),u.focusedfilter=r}),r.val(h),r},nt(o,r),w=u._getfiltersbytype("number"),f=n("<div class='filter' style='float: left;'><\/div>"),f.css("margin-top","4px"),f.appendTo(o),u.rtl&&f.css("float","right"),b=0,t.filtercondition!=null&&(k=w.indexOf(t.filtercondition),k!=-1&&(b=k)),f.jqxDropDownList({touchMode:u.touchmode,rtl:u.rtl,dropDownHorizontalAlignment:"right",enableBrowserBoundsDetection:!0,selectedIndex:b,width:18,height:20,dropDownHeight:150,dropDownWidth:170,source:w,theme:u.theme}),f.jqxDropDownList({selectionRenderer:function(){return""}}),f.jqxDropDownList("setContent",""),f.find(".jqx-dropdownlist-content").hide(),t.createfilterwidget&&t.createfilterwidget(t,i,o),t._filterwidget=o,p=null,this.addHandler(f,"select",function(){var n=f.jqxDropDownList("getSelectedItem").label;t._filterwidget.find("input").val().length>0&&!u.refreshingfilter?u._applyfilterfromfilterrow():t._filterwidget.find("input").val().length!=0||u.refreshingfilter||(p=="null"||p=="not null"||n=="null"||n=="not null")&&u._applyfilterfromfilterrow(),p=n});break;case"textbox":case"default":default:a(this,i);break;case"none":break;case"date":this.host.jqxDateTimeInput?(c=n("<div><\/div>"),c.css("margin","4px"),c.appendTo(i),tt={calendar:this.gridlocalization,todayString:this.gridlocalization.todaystring,clearString:this.gridlocalization.clearstring},c.jqxDateTimeInput({localization:tt,rtl:u.rtl,showFooter:!0,formatString:t.cellsformat,selectionMode:"range",value:null,theme:this.theme,width:r-10,height:this.filterrowheight-10}),t.createfilterwidget&&t.createfilterwidget(t,i,c),t._filterwidget=c,this.addHandler(c,"valuechanged",function(){u.refreshingfilter||(u._applyfilterfromfilterrow(),u.focusedfilter=null)})):a(this,i);break;case"list":case"checkedlist":if(this.host.jqxDropDownList){var ut=this._getfilterdataadapter(t),d=!1,f=n("<div><\/div>");f.css("margin","4px");var ft=t.datafield,it=t.filtertype=="checkedlist"?!0:!1,et=r<150?220:"auto";f.jqxDropDownList({touchMode:u.touchmode,rtl:u.rtl,checkboxes:it,dropDownWidth:et,source:ut,autoDropDownHeight:d,theme:this.theme,width:r-10,height:this.filterrowheight-10,displayMember:t.displayfield,valueMember:ft}),f.appendTo(i),rt=f.jqxDropDownList("getItems"),e=f.jqxDropDownList("listBox"),rt.length<8?f.jqxDropDownList("autoDropDownHeight",!0):(f.jqxDropDownList("autoDropDownHeight",!1),d=!1),it?(f.jqxDropDownList({selectionRenderer:function(){return u.gridlocalization.filterselectstring}}),g=n('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+u.gridlocalization.filterselectstring+"<\/span>"),g.addClass(this.toThemeProperty("jqx-item")),e!=undefined&&(d||e.host.height(200),e.insertAt(u.gridlocalization.filterselectallstring,0),f.jqxDropDownList("setContent",g),l=!0,ot=[],e.checkAll(!1),u.addHandler(e.host,"checkChange",function(n){if(f[0]._selectionChanged=!0,l)if(n.args.label!=u.gridlocalization.filterselectallstring){l=!1,e.host.jqxListBox("checkIndex",0,!0,!1);var t=e.host.jqxListBox("getCheckedItems"),i=e.host.jqxListBox("getItems");t.length==1?e.host.jqxListBox("uncheckIndex",0,!0,!1):i.length!=t.length&&e.host.jqxListBox("indeterminateIndex",0,!0,!1),l=!0}else l=!1,n.args.checked?e.host.jqxListBox("checkAll",!1):e.host.jqxListBox("uncheckAll",!1),l=!0}))):(e.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),f.jqxDropDownList({selectedIndex:0})),t.createfilterwidget&&t.createfilterwidget(t,i,f),t._filterwidget=f,st=f.jqxDropDownList("dropdownlistWrapper"),t.filtertype=="list"?this.addHandler(f,"select",function(n){u.refreshingfilter||n.args&&n.args.type!="none"&&(u._applyfilterfromfilterrow(),u.focusedfilter=null)}):this.addHandler(f,"close",function(){f[0]._selectionChanged&&(u._applyfilterfromfilterrow(),u.focusedfilter=null,f[0]._selectionChanged=!1)})}else a(this,i);break;case"bool":case"boolean":this.host.jqxCheckBox?(s=n('<div tabIndex=0 style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"><\/div>'),s.appendTo(i),s.jqxCheckBox({enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,hasThreeStates:!0,theme:this.theme,checked:null}),t.createfilterwidget&&t.createfilterwidget(t,i,s),h===!0||h=="true"?s.jqxCheckBox({checked:!0}):(h===!1||h=="false")&&s.jqxCheckBox({checked:!1}),t._filterwidget=s,this.addHandler(s,"change",function(n){u.refreshingfilter||n.args&&(u.focusedfilter=null,u._applyfilterfromfilterrow())})):a(this,i)}},_getfilterdataadapter:function(t){var u=this.source._source?!0:!1,r,i;if(u?(i={localdata:this.source.records,datatype:this.source.datatype,async:!1},r=this,dataadapter=new n.jqx.dataAdapter(i,{autoBind:!1,autoSort:!0,autoSortField:t.displayfield,async:!1,uniqueDataFields:[t.displayfield],beforeLoadComplete:function(n){var e=[],u,i,f;if(t.cellsformat){for(u=r._getcolumntypebydatafield(t),i=0;i<n.length;i++)e.push(n[i]),f=n[i][t.displayfield],n[i][t.displayfield+"JQValue"]=f,u==="date"?n[i][t.displayfield]=dataadapter.formatDate(f,t.cellsformat,r.gridlocalization):(u==="number"||u==="float"||u==="int")&&(n[i][t.displayfield]=dataadapter.formatNumber(f,t.cellsformat,r.gridlocalization));return e}return n}})):dataadapter=new n.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[t.displayfield],autoSort:!0,autoSortField:t.displayfield,async:!1}),t.filteritems&&t.filteritems.length>0)i={localdata:t.filteritems,datatype:this.source.datatype,async:!1},dataadapter=new n.jqx.dataAdapter(i,{autoBind:!1,async:!1});else if(t.filteritems){if(t.filteritems._source)return t.filteritems._options.autoBind=!1,t.filteritems._options.async=!1,t.filteritems;if(n.isFunction(t.filteritems))return t.filteritems()}return dataadapter},refreshfilterrow:function(){var o,s,u,t,f,h,i,c;if(this.showfilterrow){for(this.refreshingfilter=!0,this._updatefilterrowui(),this._updatelistfilters(!0,!0),o=this.that,s=this.columns.records.length,u=0;u<s;u++)if(t=this.columns.records[u],t.filterable&&t.filter&&(f=t.filter.getfilters(),f.length>0)){var i=f[0].value,r=t._filterwidget,e=t._filterwidget.parent();if(r!=null)switch(t.filtertype){case"number":e.find("input").val(i),this.host.jqxDropDownList&&(h=t.filter.getoperatorsbyfiltertype("numericfilter"),r.find(".filter").jqxDropDownList("selectIndex",h.indexOf(f[0].condition)));break;case"date":this.host.jqxDateTimeInput?(i=t.filter.getfilterat(0).filtervalue,i!=undefined&&(c=t.filter.getfilterat(1)?t.filter.getfilterat(1).filtervalue:i,n(e.children()[0]).jqxDateTimeInput("setRange",new Date(i),new Date(c)))):r.val(i);break;case"textbox":case"default":r.val(i),o["_oldWriteText"+r[0].id]=i;break;case"bool":case"boolean":this.host.jqxCheckBox?n(e.children()[0]).jqxCheckBox({checked:i}):r.val(i)}}this.refreshingfilter=!1}},_destroyedfilters:function(){for(var o=this.that,e=this.columns.records.length,i,t,u,f,r=0;r<e;r++)i=this.columns.records[r],i.filterable&&(t=i._filterwidget,i.filtertype=="list"||i.filtertype=="checkedlist"?(this.removeHandler(t,"select"),this.removeHandler(t,"close"),t.jqxDropDownList("destroy")):i.filtertype=="date"?(this.removeHandler(t,"valuechanged"),t.jqxDateTimeInput("destroy")):i.filtertype=="bool"?(this.removeHandler(t,"change"),t.jqxCheckBox("destroy")):i.filtertype=="number"?(u=t.find(".jqx-input"),this.removeHandler(u,"keydown"),f=n(t.children()[1]),f.jqxDropDownList("destroy")):this.removeHandler(t,"keydown"),t.remove())},_updatelistfilters:function(t,i){for(var p=this.that,w=this.columns.records.length,f,e,a,o,h,y,c,v,r,s,l=0;l<w;l++)if(f=this.columns.records[l],f.filterable&&(f.filtertype=="list"||f.filtertype=="checkedlist")){if(e=f._filterwidget,t){if(a=this._getfilterdataadapter(f),e.jqxDropDownList({source:a}),o=e.jqxDropDownList("getItems"),h=!0,o.length!=a.records.length+1&&(h=!1),h)for(r=1;r<o.length;r++)if(o[r].label!=a.records[r-1][f.displayfield]){h=!1;break}if(h&&!i)continue}else if(f.filter==undefined){e.jqxDropDownList("renderSelection");continue}var b=f.filtertype=="checkedlist"?!0:!1,o=e.jqxDropDownList("getItems"),u=e.jqxDropDownList("listBox");if(e.jqxDropDownList("dataBind"),b){if(e.jqxDropDownList({selectionRenderer:function(){return p.gridlocalization.filterselectstring}}),u.insertAt(this.gridlocalization.filterselectallstring,0),e.jqxDropDownList("setContent",this.gridlocalization.filterselectstring),u.checkAll(!1),f.filter){for(c=f.filter.getfilters(),r=0;r<u.items.length;r++)s=u.items[r].label,n.each(c,function(){this.condition=="NOT_EQUAL"?s==this.value?u.uncheckIndex(r,!1,!1):u.checkIndex(r,!1,!1):this.condition=="EQUAL"&&(s==this.value?u.checkIndex(r,!1,!1):u.uncheckIndex(r,!1,!1))});u._updateCheckedItems(),y=u.getCheckedItems().length,u.items.length!=y&&y>0&&u.host.jqxListBox("indeterminateIndex",0,!0,!1)}}else if(u.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),e.jqxDropDownList({selectedIndex:0}),f.filter){for(c=f.filter.getfilters(),v=-1,r=0;r<u.items.length;r++)s=u.items[r].label,n.each(c,function(){return this.condition=="NOT_EQUAL"?!0:s==this.value?(v=r,!1):void 0});v!=-1&&u.selectIndex(v)}o.length<8?e.jqxDropDownList("autoDropDownHeight",!0):e.jqxDropDownList("autoDropDownHeight",!1)}},_renderfiltercolumn:function(){var t=this.that;this.filterable&&n.each(this.columns.records,function(){t.autoshowfiltericon?this.filter?n(this.filtericon).show():n(this.filtericon).hide():this.filterable&&n(this.filtericon).show()})},_initcolumntypes:function(){var u,t,i,r;if(this.columns&&this.columns.records&&(u=this.source._source.datafields,u))for(t=0;t<this.columns.records.length;t++)(i=this.columns.records[t],i.datatype)||(r="",n.each(u,function(){if(this.name==i.displayfield)return this.type&&(r=this.type),!1}),i.datatype=r!=""?r:"")},_getcolumntypebydatafield:function(t){var e=this.that,u="string",o=e.source.datafields||(e.source._source?e.source._source.datafields:null),f,i,r,s;if(o&&(f="",n.each(o,function(){if(this.name==t.displayfield)return this.type&&(f=this.type),!1}),f))return f;if(t!=null){if(this.dataview.cachedrecords==undefined)return u;if(i=null,this.virtualmode)n.each(this.dataview.cachedrecords,function(){return i=this[t.displayfield],!1});else{if(this.dataview.cachedrecords.length==0)return u;if(i=this.dataview.cachedrecords[0][t.displayfield],i!=null&&i.toString()=="")return"string"}if(i!=null)if(typeof i=="boolean")u="boolean";else if(n.jqx.dataFormat.isNumber(i))u="number";else if(r=new Date(i),r.toString()=="NaN"||r.toString()=="Invalid Date")if(n.jqx.dataFormat){if(r=n.jqx.dataFormat.tryparsedate(i),r!=null)return r&&r.getFullYear()&&r.getFullYear()==1970&&r.getMonth()==0&&r.getDate()==1?(s=new Number(i),!isNaN(s))?"number":"string":"date";u="string"}else u="string";else u="date"}return u},_getfiltersbytype:function(n){var i=this.that,t="";switch(n){case"number":case"float":case"int":t=i.gridlocalization.filternumericcomparisonoperators;break;case"date":t=i.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":t=i.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:t=i.gridlocalization.filterstringcomparisonoperators}return t},_updatefilterpanel:function(t,i,r){var a,h,k,e,l,b,g,st,ht,ct,lt,et,s,u,vt,at,v,ot,nt;if((t==null||t==undefined)&&(t=this),a=t._getcolumntypebydatafield(r),h=t._getfiltersbytype(a),!t.host.jqxDropDownList)throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js.");var c=n(i),tt=c.find("#filterclearbutton"+t.element.id),it=c.find("#filterbutton"+t.element.id),f=c.find("#filter1"+t.element.id),y=c.find("#filter2"+t.element.id),p=c.find("#filter3"+t.element.id),w=c.find(".filtertext1"+t.element.id),rt=c.find(".filtertext2"+t.element.id);if(w.val(""),rt.val(""),this.removeHandler(it,"click"),this.addHandler(it,"click",function(){t._buildfilter(t,i,r),t._closemenu()}),this.removeHandler(tt,"click"),this.addHandler(tt,"click",function(){t._clearfilter(t,i,r),t._closemenu()}),this.filtermode==="default"){f.jqxDropDownList("source")!=h&&(f.jqxDropDownList({enableBrowserBoundsDetection:!1,source:h}),p.jqxDropDownList({enableBrowserBoundsDetection:!1,source:h})),a=="boolean"||a=="bool"?(f.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0}),p.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0})):(k=!1,h&&h.length&&h.length<5&&(k=!0),f.jqxDropDownList({autoDropDownHeight:k,selectedIndex:2}),p.jqxDropDownList({autoDropDownHeight:k,selectedIndex:2})),y.jqxDropDownList({selectedIndex:0});var o=r.filter,d=new n.jqx.filter,s="";switch(a){case"number":case"int":case"float":case"decimal":s="numericfilter",e=d.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":s="booleanfilter",e=d.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":s="datefilter",e=d.getoperatorsbyfiltertype("datefilter");break;case"string":s="stringfilter",e=d.getoperatorsbyfiltertype("stringfilter")}if(o!=null){var ut=o.getfilterat(0),ft=o.getfilterat(1),yt=o.getoperatorat(0);if(t.updatefilterconditions&&(e=[],l=t.updatefilterconditions(s,e),l!=undefined)){for(b=0;b<l.length;b++)l[b]=l[b].toUpperCase();o.setoperatorsbyfiltertype(s,l),e=l}g=this.enableanimations?"default":"none",ut!=null&&(st=e.indexOf(ut.comparisonoperator),ht=ut.filtervalue,w.val(ht),f.jqxDropDownList({selectedIndex:st,animationType:g})),ft!=null&&(ct=e.indexOf(ft.comparisonoperator),lt=ft.filtervalue,rt.val(lt),p.jqxDropDownList({selectedIndex:ct,animationType:g})),o.getoperatorat(0)==undefined?y.jqxDropDownList({selectedIndex:0,animationType:g}):o.getoperatorat(0)=="and"||o.getoperatorat(0)==0?y.jqxDropDownList({selectedIndex:0}):y.jqxDropDownList({selectedIndex:1})}t.updatefilterpanel&&t.updatefilterpanel(f,p,y,w,rt,it,tt,o,s,e),w.focus(),setTimeout(function(){w.focus()},10)}else if(et=t._getfilterdataadapter(r),s=t._getfiltertype(a),r.cellsformat?f.jqxListBox({displayMember:r.displayfield,valueMember:r.displayfield+"JQValue",source:et}):f.jqxListBox({displayMember:r.displayfield,valueMember:r.displayfield,source:et}),f.jqxListBox("insertAt",t.gridlocalization.filterselectallstring,0),u=f.data().jqxListBox.instance,u.checkAll(!1),vt=this,r.filter){for(u.uncheckAll(!1),at=r.filter.getfilters(),v=0;v<u.items.length;v++)ot=u.items[v].value,n.each(at,function(){if(this.condition=="NOT_EQUAL"){if(ot!=this.value)return u.uncheckIndex(v,!1,!1),!1}else if(this.condition=="EQUAL"&&ot==this.value)return u.checkIndex(v,!1,!1),!1});u._updateCheckedItems(),nt=u.getCheckedItems().length,u.items.length!=nt&&nt>0&&u.host.jqxListBox("indeterminateIndex",0,!0,!1),nt===u.items.length-1&&u.host.jqxListBox("checkIndex",0,!0,!1)}},_getfiltertype:function(n){var t="stringfilter";switch(n){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":t="datefilter";break;case"string":t="stringfilter"}return t},_buildfilter:function(t,i,r){var k=n(i).find("#filter1"+t.element.id),et=n(i).find("#filter2"+t.element.id),o=n(i).find("#filter3"+t.element.id),ot=n(i).find(".filtertext1"+t.element.id),st=n(i).find(".filtertext2"+t.element.id),d=ot.val(),g=st.val(),nt=t._getcolumntypebydatafield(r),vt=t._getfiltersbytype(nt),u=new n.jqx.filter,f=t._getfiltertype(nt),v,ut,ft,e,s;if(t.filtermode==="default"){var ht=k.jqxDropDownList("selectedIndex"),tt=et.jqxDropDownList("selectedIndex"),ct=o.jqxDropDownList("selectedIndex"),it=null,rt=null;t.updatefilterconditions&&(v=t.updatefilterconditions(f,u.getoperatorsbyfiltertype(f)),v!=undefined&&u.setoperatorsbyfiltertype(f,v));var y=!1,h=u.getoperatorsbyfiltertype(f)[ht],o=u.getoperatorsbyfiltertype(f)[ct],lt=h=="NULL"||h=="NOT_NULL",at=h=="EMPTY"||h=="NOT_EMPTY";h==undefined&&(h=u.getoperatorsbyfiltertype(f)[0]),o==undefined&&(o=u.getoperatorsbyfiltertype(f)[0]),(d.length>0||lt||at)&&(it=u.createfilter(f,d,h,null,r.cellsformat,t.gridlocalization),u.addfilter(tt,it),y=!0),ut=o=="NULL"||o=="NOT_NULL",ft=o=="EMPTY"||o=="NOT_EMPTY",(g.length>0||ut||ft)&&(rt=u.createfilter(f,g,o,null,r.cellsformat,t.gridlocalization),u.addfilter(tt,rt),y=!0),y?(s=r.displayfield,this.addfilter(s,u,!0)):this._clearfilter(t,i,r)}else{var yt=this,l=!1,a=k.data().jqxListBox.instance,c=a.getCheckedItems();if(c.length==0){for(e=1;e<a.items.length;e++){var p=a.items[e].value,w="not_equal",b=u.createfilter(f,p,w,null);u.addfilter(0,b)}l=!0}else if(c.length!=a.items.length){for(l=!0,e=0;e<c.length;e++)if(t.gridlocalization.filterselectallstring!==c[e].value){var p=c[e].value,w="equal",b=u.createfilter(f,p,w,null);u.addfilter(1,b)}}else l=!1;l?(s=r.displayfield,this.addfilter(s,u,!0)):(s=r.displayfield,this.removefilter(s,!0))}},_clearfilter:function(n,t,i){var r=i.displayfield;this.removefilter(r,!0)},addfilter:function(n,t,i){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var r=this.getcolumn(n),u=this._getcolumn(n);r!=undefined&&r!=null&&(r.filter=t,u.filter=t,this.dataview.addfilter(n,t),i==!0&&i!=undefined&&this.applyfilters("add"))},removefilter:function(n,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var i=this.getcolumn(n),r=this._getcolumn(n);i!=undefined&&i!=null&&i.filter!=null&&(this.dataview.removefilter(n,i.filter),i.filter=null,r.filter=null,(t==!0||t!==!1)&&this.applyfilters("remove"))},applyfilters:function(t){var i,u,f,r;if(this.dataview.filters.length>=0&&(this.virtualmode||!this.source.localdata)&&this.source!=null&&this.source.filter&&(i=-1,this.pageable?(i=this.dataview.pagenum,this.dataview.pagenum=0):(this.vScrollInstance.setPosition(0),this.loadondemand=!0,this._renderrows(this.virtualsizeinfo)),this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length),this.pageable&&(this.dataview.pagenum=i)),this.dataview.clearsortdata&&this.dataview.clearsortdata(),this.virtualmode){this.pageable&&(this.dataview.updateview(),this.gotopage&&this.gotopage(0)),this.rendergridcontent(!1,!1),this.showfilterrow&&typeof t!="string"&&n.isEmptyObject(t)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters});return}u=this.selectedrowindexes,f=this.that,this.dataview.refresh(),this.dataview.clearsortdata&&this.sortcolumn&&this.sortdirection&&(r=this.sortdirection.ascending?"asc":"desc",this._loading?this.sortby(this.sortcolumn,r,null,!1,!1):this.sortby(this.sortcolumn,r,null,!1)),this.pageable&&(this.dataview.updateview(),this.gotopage&&(this.gotopage(0),this.updatepagerdetails())),this._updaterowsproperties(),!this.groupable||this.groupable&&this.groups.length==0?(this._rowdetailscache=[],this.virtualsizeinfo=null,this._pagescache=[],this.columns&&this.columns.records&&this.columns.records.length>0&&!this.columns.records[0].filtericon&&(this.prerenderrequired=!0),this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates()):(this._rowdetailscache=[],this._render(!0,!0,!1,!1,!1),this.showfilterrow&&this._updatefocusedfilter(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)),this.showfilterrow&&typeof t!="string"&&n.isEmptyObject(t)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){for(var i=[],t,n=0;n<this.dataview.filters.length;n++)t=this.getcolumn(this.dataview.filters[n].datafield),i[n]={filter:this.dataview.filters[n].filter,filtercolumn:t.datafield,filtercolumntext:t.text};return i},clearfilters:function(t){var r=this.that,i;(this.showfilterrow&&this.clearfilterrow(),this.columns.records&&(i=t==!0||t!==!1,n.each(this.columns.records,function(){r.removefilter(this.displayfield,!i)})),t!==!1)&&(t==!0||t!==!1)&&this.applyfilters("clear")},_destroyfilterpanel:function(){var t=n(n.find("#filterclearbutton"+this.element.id)),u=n(n.find("#filterbutton"+this.element.id)),f=n(n.find("#filter1"+this.element.id)),e=n(n.find("#filter2"+this.element.id)),o=n(n.find("#filter3"+this.element.id)),i=n(n.find(".filtertext1"+this.element.id)),r=n(n.find(".filtertext2"+this.element.id));i.length>0&&r.length>0&&(i.removeClass(),r.removeClass(),i.remove(),r.remove()),t.length>0&&(t.jqxButton("destroy"),u.jqxButton("destroy"),this.removeHandler(t,"click"),this.removeHandler(u,"click")),f.length>0&&f.jqxDropDownList("destroy"),e.length>0&&e.jqxDropDownList("destroy"),o.length>0&&o.jqxDropDownList("destroy")},_initfilterpanel:function(t,i,r,u){var e,c,l,o,a,v,y,p,w,s;(t==null||t==undefined)&&(t=this),i[0].innerHTML="",e=n("<div class='filter' style='margin-left: 7px;'><\/div>"),i.append(e),c=n("<div class='filter' style='margin-top: 3px; margin-bottom: 3px;'><\/div>"),c.text(t.gridlocalization.filtershowrowstring);var f=n("<div class='filter' id='filter1"+t.element.id+"'><\/div>"),b=n("<div class='filter' id='filter2"+t.element.id+"' style='margin-bottom: 3px;'><\/div>"),k=n("<div class='filter' id='filter3"+t.element.id+"'><\/div>"),nt=t._getcolumntypebydatafield(r);if(!f.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");var d=t._getfiltersbytype(nt),g=n("<div class='filter'><input class='filtertext1"+t.element.id+"' style='height: 20px; margin-top: 3px; margin-bottom: 3px;' type='text'><\/input><\/div>"),h=g.find("input");h.addClass(this.toThemeProperty("jqx-input")),h.addClass(this.toThemeProperty("jqx-widget-content")),h.addClass(this.toThemeProperty("jqx-rc-all")),h.width(u-15),l=n("<div class='filter'><input class='filtertext2"+t.element.id+"' style='height: 20px; margin-top: 3px;' type='text'><\/input><\/div>"),o=l.find("input"),o.addClass(this.toThemeProperty("jqx-input")),o.addClass(this.toThemeProperty("jqx-widget-content")),o.addClass(this.toThemeProperty("jqx-rc-all")),o.width(u-15),t.rtl&&(h.css("direction","rtl"),o.css("direction","rtl")),a=n("<div class='filter' style='height: 25px; margin-left: 20px; margin-top: 7px;'><\/div>"),v=n('<span tabIndex=0 id="filterbutton'+t.element.id+'" class="filterbutton" style="padding: 4px 12px; margin-left: 2px;">'+t.gridlocalization.filterstring+"<\/span>"),a.append(v),y=n('<span tabIndex=0 id="filterclearbutton'+t.element.id+'" class="filterclearbutton" style="padding: 4px 12px; margin-left: 5px;">'+t.gridlocalization.filterclearstring+"<\/span>"),a.append(y),v.jqxButton({height:20,theme:t.theme}),y.jqxButton({height:20,theme:t.theme}),p=function(n){if(n){if(n.text().indexOf("case sensitive")!=-1){var i=n.text();i=i.replace("case sensitive","match case"),n.text(i)}return n.css("font-family",t.host.css("font-family")),n.css("font-size",t.host.css("font-size")),n}return""},this.filtermode==="default"?(e.append(c),e.append(f),f.jqxDropDownList({rtl:t.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:u-15,height:20,dropDownHeight:150,dropDownWidth:u-15,selectionRenderer:p,source:d,theme:t.theme}),e.append(g),w=[],w[0]=t.gridlocalization.filterandconditionstring,w[1]=t.gridlocalization.filterorconditionstring,b.jqxDropDownList({rtl:t.rtl,enableBrowserBoundsDetection:!1,autoDropDownHeight:!0,selectedIndex:0,width:60,height:20,source:w,selectionRenderer:p,theme:t.theme}),e.append(b),k.jqxDropDownList({rtl:t.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:u-15,height:20,dropDownHeight:150,dropDownWidth:u-15,selectionRenderer:p,source:d,theme:t.theme}),e.append(k),e.append(l)):(e.append(c),e.append(f),f.jqxListBox({rtl:t.rtl,checkboxes:!0,selectedIndex:2,width:u-15,height:120,theme:t.theme}),s=!0,t.addHandler(f,"checkChange",function(n){if(s)if(n.args.label!=t.gridlocalization.filterselectallstring){s=!1,f.jqxListBox("checkIndex",0,!0,!1);var i=f.jqxListBox("getCheckedItems"),r=f.jqxListBox("getItems");i.length==1?f.jqxListBox("uncheckIndex",0,!0,!1):r.length!=i.length&&f.jqxListBox("indeterminateIndex",0,!0,!1),s=!0}else s=!1,n.args.checked?f.jqxListBox("checkAll",!1):f.jqxListBox("uncheckAll",!1),s=!0})),e.append(a),t.updatefilterpanel&&t.updatefilterpanel(f,k,b,g,l,v,y,null,null,d)}})})(jQuery);
//# sourceMappingURL=jqxgrid.filter.min.js.map