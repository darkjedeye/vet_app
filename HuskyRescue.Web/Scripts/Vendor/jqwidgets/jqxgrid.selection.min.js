(function(n){n.extend(n.jqx._jqxGrid.prototype,{selectallrows:function(){var t,n;for(this._trigger=!1,t=this.virtualmode?this.dataview.totalrecords:this.getboundrows().length,this.selectedrowindexes=[],n=0;n<t;n++)this.selectedrowindexes[n]=n;this.selectionmode!="checkbox"||this._checkboxcolumnupdating||this._checkboxcolumn&&this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!0}),this._renderrows(this.virtualsizeinfo),this._trigger=!0},selectrow:function(n,t){this._applyrowselection(n,!0,t),t!==!1&&this._updatecheckboxselection()},_updatecheckboxselection:function(){var n,t,i;if(this.selectionmode=="checkbox"&&(n=this.getrows(),n&&this._checkboxcolumn)){if(n.length===0){this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1});return}t=n.length,this.virtualmode&&(t=this.source._source.totalrecords),i=this.selectedrowindexes.length,i===t?this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!0}):i===0?this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1}):this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:null})}},unselectrow:function(n,t){this._applyrowselection(n,!1,t),t!==!1&&this._updatecheckboxselection()},selectcell:function(n,t){this._applycellselection(n,t,!0)},unselectcell:function(n,t){this._applycellselection(n,t,!1)},clearselection:function(n,t){if(this._trigger=!1,this.selectedrowindex=-1,t!==!1)for(var i=0;i<this.selectedrowindexes.length;i++)this._raiseEvent(3,{rowindex:this.selectedrowindexes[i]});if(this.selectedrowindexes=[],this.selectedcells=[],this.selectionmode!="checkbox"||this._checkboxcolumnupdating||this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1}),!1===n){this._trigger=!0;return}this._renderrows(this.virtualsizeinfo),this._trigger=!0},getselectedrowindex:function(){return this.selectedrowindex},getselectedrowindexes:function(){return this.selectedrowindexes},getselectedcell:function(){return this.selectedcell},getselectedcells:function(){var n=[];for(obj in this.selectedcells)n[n.length]=this.selectedcells[obj];return n},_getcellsforcopypaste:function(){var u=[],i,t,r,n,e,f;if(this.selectionmode.indexOf("cell")==-1)for(i=this.selectedrowindexes,t=0;t<i.length;t++)for(r=i[t],n=0;n<this.columns.records.length;n++)e=r+"_"+this.columns.records[n].datafield,f={rowindex:r,datafield:this.columns.records[n].datafield},u.push(f);return u},deleteselection:function(){var t=this,u=t.getselectedcells(),f,r;if(this.selectionmode.indexOf("cell")==-1&&(u=this._getcellsforcopypaste()),u!=null&&u.length>0){for(f=0;f<u.length;f++){var n=u[f],i=t.getcolumn(n.datafield),e=t.getcellvalue(n.rowindex,n.datafield);i&&e!==""&&(r=null,i.columntype=="checkbox"&&(i.threestatecheckbox||(r=!1)),t._raiseEvent(17,{rowindex:n.rowindex,datafield:n.datafield,value:e}),f==u.length-1?(t.setcellvalue(n.rowindex,n.datafield,r,!0),i.displayfield!=i.datafield&&t.setcellvalue(n.rowindex,i.displayfield,r,!0)):(t.setcellvalue(n.rowindex,n.datafield,r,!1),i.displayfield!=i.datafield&&t.setcellvalue(n.rowindex,i.displayfield,r,!0)),t._raiseEvent(18,{rowindex:n.rowindex,datafield:n.datafield,oldvalue:e,value:r}))}this.dataview.updateview(),this._renderrows(this.virtualsizeinfo)}},copyselection:function(){var u="",f=this,i,o,e,s,t,c,l,r,h;if(this.clipboardselection={},this._clipboardselection=[],i=f.getselectedcells(),this.selectionmode.indexOf("cell")==-1&&(i=this._getcellsforcopypaste()),i!=null&&i.length>0){for(o=999999999999999,e=-1,s=0;s<i.length;s++)t=i[s],c=f.getcolumn(t.datafield),c!=null&&(l=f.getcellvalue(t.rowindex,t.datafield),this.clipboardselection[t.rowindex]||(this.clipboardselection[t.rowindex]={}),this.clipboardselection[t.rowindex][t.datafield]=l,o=Math.min(o,t.rowindex),e=Math.max(e,t.rowindex));for(r=o;r<=e;r++)h=0,this._clipboardselection[this._clipboardselection.length]=[],this.clipboardselection[r]!=undefined&&n.each(this.clipboardselection[r],function(n,t){h>0&&(u+="\t");var i=t;t==null&&(i=""),f._clipboardselection[f._clipboardselection.length-1][h]=i,h++,u+=i}),r<e&&(u+="\n")}return this.clipboardselectedtext=u,u},pasteselection:function(){var r=this.getselectedcells(),n,u,e,t,i;if(this.selectionmode.indexOf("cell")==-1&&(r=this._getcellsforcopypaste()),r!=null&&r.length>0){var f=r[0].rowindex,o=r[0].datafield,s=this._getcolumnindex(o);if(!this._clipboardselection)return;for(n=0;n<this._clipboardselection.length;n++)for(u=0;u<this._clipboardselection[n].length;u++)(e=this.getcolumnat(s+u),e)&&(t=this.getcell(f+n,e.datafield),i=null,i=this._clipboardselection[n][u],i!=null&&(this._raiseEvent(17,{rowindex:f+n,datafield:t.datafield,value:i}),this.setcellvalue(t.row,t.column,i,!1),this._raiseEvent(18,{rowindex:f+n,datafield:t.datafield,oldvalue:this.getcellvalue(t.rowindex,t.datafield),value:i}),this._applycellselection(f+n,t.datafield,!0,!1)));this.dataview.updateview(),this._renderrows(this.virtualsizeinfo)}},_applyrowselection:function(n,t,i,r){var e,u,f,o;return n==null?!1:(e=this.selectedrowindex,this.selectionmode=="singlerow"&&(t?this._raiseEvent(2,{rowindex:n,row:this.getrowdata(n)}):this._raiseEvent(3,{rowindex:n,row:this.getrowdata(n)}),this._raiseEvent(3,{rowindex:e}),this.selectedrowindexes=[],this.selectedcells=[]),r==!0&&(this.selectedrowindexes=[]),this.dataview.filters.length>0&&(u=this.getrowdata(n),u&&u.dataindex!==undefined?n=u.dataindex:u&&u.dataindex===undefined&&u.uid&&(n=this.getrowboundindexbyid(u.uid))),f=this.selectedrowindexes.indexOf(n),t?(this.selectedrowindex=n,f==-1?(this.selectedrowindexes.push(n),this.selectionmode!="singlerow"&&this._raiseEvent(2,{rowindex:n,row:this.getrowdata(n)})):this.selectionmode=="multiplerows"&&(this.selectedrowindexes.splice(f,1),this._raiseEvent(3,{rowindex:this.selectedrowindex,row:this.getrowdata(n)}),this.selectedrowindex=this.selectedrowindexes.length>0?this.selectedrowindexes[this.selectedrowindexes.length-1]:-1)):(f>=0||this.selectionmode=="singlerow"||this.selectionmode=="multiplerowsextended"||this.selectionmode=="multiplerowsadvanced")&&(o=this.selectedrowindexes[f],this.selectedrowindexes.splice(f,1),this._raiseEvent(3,{rowindex:o,row:this.getrowdata(n)}),this.selectedrowindex=-1),(i==undefined||i)&&this._rendervisualrows(),!0)},_applycellselection:function(n,t,i,r){var s,u,e,f,o;return n==null?!1:t==null?!1:(s=this.selectedrowindex,this.selectionmode=="singlecell"&&(u=this.selectedcell,u!=null&&this._raiseEvent(16,{rowindex:u.rowindex,datafield:u.datafield}),this.selectedcells=[]),(this.selectionmode=="multiplecellsextended"||this.selectionmode=="multiplecellsadvanced")&&(u=this.selectedcell,u!=null&&this._raiseEvent(16,{rowindex:u.rowindex,datafield:u.datafield})),f=n+"_"+t,this.dataview.filters.length>0&&(e=this.getrowdata(n),e&&e.dataindex!==undefined?(n=e.dataindex,f=n+"_"+t):e&&e.dataindex===undefined&&e.uid&&(n=this.getrowboundindexbyid(e.uid),f=n+"_"+t)),o={rowindex:n,datafield:t},i?(this.selectedcell=o,this.selectedcells[f]?(this.selectionmode=="multiplecells"||this.selectionmode=="multiplecellsextended"||this.selectionmode=="multiplecellsadvanced")&&(delete this.selectedcells[f],this.selectedcells.length--,this._raiseEvent(16,o)):(this.selectedcells[f]=o,this.selectedcells.length++,this._raiseEvent(15,o))):(delete this.selectedcells[f],this.selectedcells.length--,this._raiseEvent(16,o)),(r==undefined||r)&&this._rendervisualrows(),!0)},_getcellindex:function(t){var i=-1;return n.each(this.selectedcells,function(){return i++,this[t]?!1:void 0}),i},_clearhoverstyle:function(){if(undefined!=this.hoveredrow&&this.hoveredrow!=-1&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()){var n=this.table.find(".jqx-grid-cell-hover");n.length>0&&(n.removeClass(this.toTP("jqx-grid-cell-hover")),n.removeClass(this.toTP("jqx-fill-state-hover"))),this.hoveredrow=-1}},_clearselectstyle:function(){for(var e=this.table[0].rows.length,o=this.table[0].rows,s=this.toTP("jqx-grid-cell-selected"),h=this.toTP("jqx-fill-state-pressed"),c=this.toTP("jqx-grid-cell-hover"),l=this.toTP("jqx-fill-state-hover"),r,u,t,i=0;i<e;i++){var f=o[i],a=f.cells.length,v=f.cells;for(r=0;r<a;r++)u=v[r],t=n(u),u.className.indexOf("jqx-grid-cell-selected")!=-1&&(t.removeClass(s),t.removeClass(h)),u.className.indexOf("jqx-grid-cell-hover")!=-1&&(t.removeClass(c),t.removeClass(l))}},_selectpath:function(n,t){var u=this,f=this._lastClickedCell?Math.min(this._lastClickedCell.row,n):0,e=this._lastClickedCell?Math.max(this._lastClickedCell.row,n):0,h,i,r,n;if(f<=e){var o=this._getcolumnindex(this._lastClickedCell.column),s=this._getcolumnindex(t),c=Math.min(o,s),l=Math.max(o,s);for(this.selectedcells=[],h=this.dataview.loadedrecords,i=f;i<=e;i++)for(r=c;r<=l;r++)n=h[i],this._applycellselection(u.getboundindex(n),u._getcolumnat(r).datafield,!0,!1);this._rendervisualrows()}},_selectrowpath:function(n){var t,n;if(this.selectionmode=="multiplerowsextended"){var f=this,i=this._lastClickedCell?Math.min(this._lastClickedCell.row,n):0,r=this._lastClickedCell?Math.max(this._lastClickedCell.row,n):0,u=this.dataview.loadedrecords;if(i<=r){for(this.selectedrowindexes=[],t=i;t<=r;t++)n=u[t],this._applyrowselection(t,!0,!1);this._rendervisualrows()}}},_selectrowwithmouse:function(n,t,i,r,u,f){var e=t.row,s,o,b,c,v,p,y,w,h,l,a;if(e!=undefined&&(s=t.index,this.hittestinfo[s]!=undefined)&&(o=this.hittestinfo[s].visualrow,!this.hittestinfo[s].details)&&(b=o.cells[0].className,!e.group)){if(this.selectionmode=="multiplerows"||this.selectionmode=="multiplecells"||this.selectionmode=="checkbox"||this.selectionmode.indexOf("multiple")!=-1&&(f==!0||u==!0)){if(c=this.getboundindex(e),this.dataview.filters.length>0&&(v=this.getrowdata(c),v&&(c=v.dataindex)),p=i.indexOf(c)!=-1,y=this.getboundindex(e)+"_"+r,this.selectionmode.indexOf("cell")!=-1)w=this.selectedcells[y]!=undefined,this.selectedcells[y]!=undefined&&w?this._selectcellwithstyle(n,!1,s,r,o):this._selectcellwithstyle(n,!0,s,r,o),f&&this._lastClickedCell==undefined&&(h=this.getselectedcells(),h&&h.length>0&&(this._lastClickedCell={row:h[0].rowindex,column:h[0].datafield})),f&&this._lastClickedCell&&(this._selectpath(e.visibleindex,r),this.mousecaptured=!1,this.selectionarea.css("visibility")=="visible"&&this.selectionarea.css("visibility","hidden"));else if(p?u?this._applyrowselection(this.getboundindex(e),!1):this._selectrowwithstyle(n,o,!1,r):this._selectrowwithstyle(n,o,!0,r),f&&this._lastClickedCell==undefined&&(l=this.getselectedrowindexes(),l&&l.length>0&&(this._lastClickedCell={row:l[0],column:r})),f&&this._lastClickedCell){this.selectedrowindexes=[];var k=this._lastClickedCell?Math.min(this._lastClickedCell.row,e.visibleindex):0,d=this._lastClickedCell?Math.max(this._lastClickedCell.row,e.visibleindex):0,g=this.dataview.loadedrecords;for(a=k;a<=d;a++)e=g[a],this._applyrowselection(this.getboundindex(e),!0,!1,!1);this._rendervisualrows()}}else this._clearselectstyle(),this._selectrowwithstyle(n,o,!0,r),this.selectionmode.indexOf("cell")!=-1&&this._selectcellwithstyle(n,!0,s,r,o);f||(this._lastClickedCell={row:e.visibleindex,column:r})}},_selectcellwithstyle:function(t,i,r,u,f){var e=n(f.cells[t._getcolumnindex(u)]);e.removeClass(this.toTP("jqx-grid-cell-hover")),e.removeClass(this.toTP("jqx-fill-state-hover")),i?(e.addClass(this.toTP("jqx-grid-cell-selected")),e.addClass(this.toTP("jqx-fill-state-pressed"))):(e.removeClass(this.toTP("jqx-grid-cell-selected")),e.removeClass(this.toTP("jqx-fill-state-pressed")))},_selectrowwithstyle:function(t,i,r){var f=i.cells.length,o=0,e,u;for(t.rowdetails&&t.showrowdetailscolumn?this.rtl?(f-=1,f-=this.groups.length):o=1+this.groups.length:this.groupable&&(this.rtl?f-=this.groups.length:o=this.groups.length),e=o;e<f;e++)u=i.cells[e],r?(n(u).removeClass(this.toTP("jqx-grid-cell-hover")),n(u).removeClass(this.toTP("jqx-fill-state-hover")),t.selectionmode.indexOf("cell")==-1&&(n(u).addClass(this.toTP("jqx-grid-cell-selected")),n(u).addClass(this.toTP("jqx-fill-state-pressed")))):(n(u).removeClass(this.toTP("jqx-grid-cell-hover")),n(u).removeClass(this.toTP("jqx-grid-cell-selected")),n(u).removeClass(this.toTP("jqx-fill-state-hover")),n(u).removeClass(this.toTP("jqx-fill-state-pressed")))},_handlemousemoveselection:function(t,i){var pt,u,nt,f,v,wt,tt,ot,w,st,ht,gt,r,h,b,at,l,s,a,d,g,ti,vt,ii,yt;if((i.selectionmode=="multiplerowsextended"||i.selectionmode=="multiplecellsextended"||i.selectionmode=="multiplecellsadvanced")&&i.mousecaptured){if(i.multipleselectionbegins&&(pt=i.multipleselectionbegins(t),pt===!1))return!0;var ri=this.showheader?this.columnsheader.height()+2:0,k=this._groupsheader()?this.groupsheader.height():0,ui=this.showtoolbar?this.toolbarheight:0;if(k+=ui,u=this.host.coord(),this.hasTransform&&(u=n.jqx.utilities.getOffset(this.host),nt=this._getBodyOffset(),u.left-=nt.left,u.top-=nt.top),f=t.pageX,v=t.pageY-k,Math.abs(this.mousecaptureposition.left-f)>3||Math.abs(this.mousecaptureposition.top-v)>3){wt=parseInt(this.columnsheader.coord().top),this.hasTransform&&(wt=n.jqx.utilities.getOffset(this.columnsheader).top),f<u.left&&(f=u.left),f>u.left+this.host.width()&&(f=u.left+this.host.width()),tt=u.top+ri,v<tt&&(v=tt+5);var y=parseInt(Math.min(i.mousecaptureposition.left,f)),e=-5+parseInt(Math.min(i.mousecaptureposition.top,v)),it=parseInt(Math.abs(i.mousecaptureposition.left-f)),rt=parseInt(Math.abs(i.mousecaptureposition.top-v));if(y-=u.left,e-=u.top,this.selectionarea.css("visibility","visible"),i.selectionmode=="multiplecellsadvanced"){var f=y,bt=f+it,ei=f,ut=i.hScrollInstance,ft=ut.value;this.rtl&&(this.hScrollBar.css("visibility")!="hidden"&&(ft=ut.max-ut.value),this.vScrollBar[0].style.visibility!="hidden");var kt=i.table[0].rows[0],d=0,c=i.mousecaptureposition.clickedcell,o=c,et=!1,dt=0,fi=kt.cells.length;for(i.mousecaptureposition.left<=t.pageX&&(dt=c),r=dt;r<fi;r++){if(ot=parseInt(n(this.columnsrow[0].cells[r]).css("left")),w=ot-ft,i.columns.records[r].pinned){w=ot;continue}if((st=this._getcolumnat(r),st==null||!st.hidden)&&(!i.groupable||!(i.groups.length>0)||!(r<i.groups.length)))if(ht=w+n(this.columnsrow[0].cells[r]).width(),i.mousecaptureposition.left>t.pageX){if(ht>=f&&f>=w){o=r,et=!0;break}}else if(ht>=bt&&bt>=w){o=r,et=!0;break}}et||(i.mousecaptureposition.left>t.pageX?n.each(this.columns.records,function(n){return i.groupable&&i.groups.length>0&&n<i.groups.length?!0:!this.pinned&&!this.hidden?(o=n,!1):void 0}):(!i.groupable||i.groupable&&!i.groups.length>0)&&(o=kt.cells.length-1)),gt=c,c=Math.min(c,o),o=Math.max(gt,o),e+=5,e+=k;var oi=i.table[0].rows.indexOf(i.mousecaptureposition.clickedrow),ct=0,p=-1,ni=-1,lt=0;for(r=0;r<i.table[0].rows.length;r++){if(h=n(i.table[0].rows[r]),r==0&&(lt=h.coord().top),b=h.height(),at=lt-u.top,p==-1&&at+b>=e){for(l=!1,s=0;s<i.groups.length;s++)if(a=h[0].cells[s].className,a.indexOf("jqx-grid-group-collapse")!=-1||a.indexOf("jqx-grid-group-expand")!=-1){l=!0;break}if(l)continue;p=r}if(lt+=b,i.groupable&&i.groups.length>0){for(l=!1,s=0;s<i.groups.length;s++)if(a=h[0].cells[s].className,a.indexOf("jqx-grid-group-collapse")!=-1||a.indexOf("jqx-grid-group-expand")!=-1){l=!0;break}if(l)continue;for(d=0,g=i.groups.length;g<h[0].cells.length;g++)ti=h[0].cells[g],n(ti).html()==""&&d++;if(d==h[0].cells.length-i.groups.length)continue}if(p!=-1&&(ct+=b),at+b>e+rt){ni=r;break}}if(p!=-1&&(e=n(i.table[0].rows[p]).coord().top-u.top-k-2,vt=0,this.filterable&&this.showfilterrow&&(vt=this.filterrowheight),parseInt(i.table[0].style.top)<0&&e<this.rowsheight+vt&&(e-=parseInt(i.table[0].style.top),ct+=parseInt(i.table[0].style.top)),rt=ct,ii=n(this.columnsrow[0].cells[c]),yt=n(this.columnsrow[0].cells[o]),y=parseInt(ii.css("left")),it=parseInt(yt.css("left"))-parseInt(y)+yt.width()-2,y-=ft,i.editcell&&i.editable&&i.endcelledit&&(c!=o||p!=ni))){if(i.editcell.validated==!1)return;i.endcelledit(i.editcell.row,i.editcell.column,!0,!0)}}this.selectionarea.width(it),this.selectionarea.height(rt),this.selectionarea.css("left",y),this.selectionarea.css("top",e)}}},_handlemouseupselection:function(t,i){var h,c,f,v,y,tt,k,it,o,s,d;if(this.selectionarea){if(this.selectionarea.css("visibility")!="visible")return i.mousecaptured=!1,!0;if(i.mousecaptured&&(i.selectionmode=="multiplerowsextended"||i.selectionmode=="multiplerowsadvanced"||i.selectionmode=="multiplecellsextended"||i.selectionmode=="multiplecellsadvanced")&&(i.mousecaptured=!1,this.selectionarea.css("visibility")=="visible")){this.selectionarea.css("visibility","hidden");var rt=this.showheader?this.columnsheader.height()+2:0,g=this._groupsheader()?this.groupsheader.height():0,ut=this.showtoolbar?this.toolbarheight:0;g+=ut,h=this.selectionarea.coord(),c=this.host.coord(),this.hasTransform&&(c=n.jqx.utilities.getOffset(this.host),h=n.jqx.utilities.getOffset(this.selectionarea));var l=h.left-c.left,r=h.top-rt-c.top-g,f=r,p=l+this.selectionarea.width(),w=l,b=[],a=[];if(i.selectionmode=="multiplerowsextended"){while(r<f+this.selectionarea.height()){var e=this._hittestrow(l,r),nt=e.row,u=e.index;u!=-1&&(a[u]||(a[u]=!0,b[b.length]=e)),r+=20}f=0,n.each(b,function(){var r=this,n=this.row;i.selectionmode!="none"&&i._selectrowwithmouse&&(t.ctrlKey?i._applyrowselection(i.getboundindex(n),!0,!1,!1):f==0?i._applyrowselection(i.getboundindex(n),!0,!1,!0):i._applyrowselection(i.getboundindex(n),!0,!1,!1),f++)})}else for(i.selectionmode=="multiplecellsadvanced"&&(r+=2),v=i.hScrollInstance,y=v.value,this.rtl&&(this.hScrollBar.css("visibility")!="hidden"&&(y=v.max-v.value),this.vScrollBar[0].style.visibility!="hidden"&&(y-=this.scrollbarsize+4)),tt=i.table[0].rows[0],k=i.selectionarea.height(),!t.ctrlKey&&k>0&&(i.selectedcells=[]),it=k;r<f+it;){var e=i._hittestrow(l,r),nt=e.row,u=e.index;if(u!=-1&&!a[u])for(a[u]=!0,o=0;o<tt.cells.length;o++)s=parseInt(n(i.columnsrow[0].cells[o]).css("left"))-y,d=s+n(i.columnsrow[0].cells[o]).width(),(w>=s&&w<=d||p>=s&&p<=d||s>=w&&s<=p)&&i._applycellselection(i.getboundindex(nt),i._getcolumnat(o).datafield,!0,!1);r+=5}i.autosavestate&&i.savestate&&i.savestate(),i._renderrows(i.virtualsizeinfo)}}},selectprevcell:function(n,t){var r=this._getcolumnindex(t),u=this.columns.records.length,i=this._getprevvisiblecolumn(r);i!=null&&(this.clearselection(),this.selectcell(n,i.datafield))},selectnextcell:function(n,t){var r=this._getcolumnindex(t),u=this.columns.records.length,i=this._getnextvisiblecolumn(r);i!=null&&(this.clearselection(),this.selectcell(n,i.datafield))},_getfirstvisiblecolumn:function(){for(var r=this,i=this.columns.records.length,t,n=0;n<i;n++)if(t=this.columns.records[n],!t.hidden&&t.datafield!=null)return t;return null},_getlastvisiblecolumn:function(){for(var r=this,i=this.columns.records.length,t,n=i-1;n>=0;n--)if(t=this.columns.records[n],!t.hidden&&t.datafield!=null)return t;return null},_handlekeydown:function(t,i){var r,o,b,rt,k,c,tt,it,a,u,e;if(i.groupable||(r=t.charCode?t.charCode:t.keyCode?t.keyCode:0,i.editcell&&i.selectionmode!="multiplecellsadvanced"))return!0;if(i.editcell&&i.selectionmode=="multiplecellsadvanced")if(r>=33&&r<=40){if(t.altKey)return i._cancelkeydown=!1,!0;if(i._cancelkeydown==undefined||i._cancelkeydown==!1)if(i.editmode!=="selectedrow"){if(i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),i._cancelkeydown=!1,i.editcell&&!i.editcell.validated)return i._rendervisualrows(),i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),!1}else return!0;else return i._cancelkeydown=!1,!0}else return!0;if(i.selectionmode=="none"||i.showfilterrow&&i.filterable&&this.filterrow&&n(t.target).ischildof(this.filterrow)||i.pageable&&n(t.target).ischildof(this.pager)||this.showtoolbar&&n(t.target).ischildof(this.toolbar)||this.showstatusbar&&n(t.target).ischildof(this.statusbar)||(o=!1,t.altKey))return!0;t.ctrlKey&&this.clipboard&&(b=String.fromCharCode(r).toLowerCase(),b=="c"||b=="x"?(rt=this.copyselection(),window.clipboardData&&window.clipboardData.setData("Text",rt)):b=="v"&&this.pasteselection(),b=="x"&&this.deleteselection());var ut=Math.round(i._gettableheight()),h=Math.round(ut/i.rowsheight),v=i.getdatainformation();switch(i.selectionmode){case"singlecell":case"multiplecells":case"multiplecellsextended":case"multiplecellsadvanced":if(k=i.getselectedcell(),k!=null){var ft=this.getrowvisibleindex(k.rowindex),u=ft,l=k.datafield,d=i._getcolumnindex(l),et=i.columns.records.length,s=function(n,u,f){var e=function(n,t){var r=i.dataview.loadedrecords[n],u;return r!=undefined&&t!=null?((f||f==undefined)&&i.clearselection(),u=i.getboundindex(r),i.selectcell(u,t),i._oldselectedcell=i.selectedcell,o=!0,i.ensurecellvisible(n,t),!0):!1};if(e(n,u)||(i.ensurecellvisible(n,u),e(n,u),i.virtualmode&&i.host.focus()),t.shiftKey&&r!=9){if((i.selectionmode=="multiplecellsextended"||i.selectionmode=="multiplecellsadvanced")&&i._lastClickedCell){i._selectpath(n,u),i.selectedcell={rowindex:n,datafield:u};return}}else t.shiftKey||(i._lastClickedCell={row:n,column:u})},f=t.shiftKey&&i.selectionmode!="singlecell"&&i.selectionmode!="multiplecells",y=function(){s(0,l,!f)},p=function(){var n=v.rowscount-1;s(n,l,!f)},g=r==9&&!t.shiftKey,nt=r==9&&t.shiftKey;(g||nt)&&(f=!1),c=t.ctrlKey,c&&r==37?(a=i._getfirstvisiblecolumn(d),a!=null&&s(u,a.datafield)):c&&r==39?(tt=i._getlastvisiblecolumn(d),tt!=null&&s(u,tt.datafield)):r==39||g?(it=i._getnextvisiblecolumn(d),it!=null?s(u,it.datafield,!f):g||(o=!0)):r==37||nt?(a=i._getprevvisiblecolumn(d),a!=null?s(u,a.datafield,!f):nt||(o=!0)):r==36?y():r==35?p():r==33?u-h>=0?(e=u-h,s(e,l,!f)):y():r==34?v.rowscount>u+h?(e=u+h,s(e,l,!f)):p():r==38?c?y():u>0?s(u-1,l,!f):o=!0:r==40&&(c?p():v.rowscount>u+1?s(u+1,l,!f):o=!0)}break;case"singlerow":case"multiplerows":case"multiplerowsextended":case"multiplerowsadvanced":if(u=i.getselectedrowindex(),u==null||u==-1)return!0;u=this.getrowvisibleindex(u);var w=function(n,u){var f=function(n){var t=i.dataview.loadedrecords[n],r,f,e;return t!=undefined?(r=i.getboundindex(t),f=i.selectedrowindex,(u||u==undefined)&&i.clearselection(),i.selectedrowindex=f,i.selectrow(r,!1),e=i.ensurerowvisible(n),(!e||i.autoheight||i.groupable)&&i._rendervisualrows(),o=!0,!0):!1};if(f(n)||(i.ensurerowvisible(n),f(n,u),i.virtualmode&&i.host.focus()),t.shiftKey&&r!=9){if(i.selectionmode=="multiplerowsextended"&&i._lastClickedCell){i._selectrowpath(n),i.selectedrowindex=n;return}}else t.shiftKey||(i._lastClickedCell={row:n})},f=t.shiftKey&&i.selectionmode!="singlerow"&&i.selectionmode!="multiplerows",y=function(){w(0,!f)},p=function(){var n=v.rowscount-1;w(n,!f)},c=t.ctrlKey;r==36||c&&r==38?y():r==35||c&&r==40?p():r==33?u-h>=0?(e=u-h,w(e,!f)):y():r==34?v.rowscount>u+h?(e=u+h,w(e,!f)):p():r==38?u>0?w(u-1,!f):o=!0:r==40&&(v.rowscount>u+1?w(u+1,!f):o=!0)}return o?(i.autosavestate&&i.savestate&&i.savestate(),!1):!0},_handlemousemove:function(t,i){var d,v,o,c,g,nt,y,l,p,f,u,s,h,tt,b,rt,k,r,e;if(!i.vScrollInstance.isScrolling()&&!i.hScrollInstance.isScrolling()&&((i.enablehover||i.selectionmode=="multiplerows")&&(d=this.showheader?this.columnsheader.height()+2:0,v=this._groupsheader()?this.groupsheader.height():0,nt=this.showtoolbar?this.toolbarheight:0,v+=nt,o=this.host.coord(),this.hasTransform&&(o=n.jqx.utilities.getOffset(this.host),y=this._getBodyOffset(),o.left-=y.left,o.top-=y.top),c=t.pageX-o.left,g=t.pageY-d-o.top-v),i.selectionmode!="multiplerowsextended"&&i.selectionmode!="multiplecellsextended"&&i.selectionmode!="multiplecellsadvanced"||i.mousecaptured!=!0))if(i.enablehover){if(i.disabled)return;if(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())return;if(l=this._hittestrow(c,g),!l)return;if(p=l.row,f=l.index,this.hoveredrow!=-1&&f!=-1&&this.hoveredrow==f&&this.selectionmode.indexOf("cell")==-1&&this.selectionmode!="checkbox")return;if(this._clearhoverstyle(),f==-1||p==undefined)return;if(u=this.hittestinfo[f].visualrow,u==null)return;if(this.hittestinfo[f].details)return;if(t.clientX>n(u).width()+n(u).coord().left)return;if(s=0,h=u.cells.length,i.rowdetails&&i.showrowdetailscolumn?this.rtl?(h-=1,h-=this.groups.length):s=1+this.groups.length:this.groupable&&(this.rtl?h-=this.groups.length:s=this.groups.length),u.cells.length==0)return;if(tt=u.cells[s].className,p.group||this.selectionmode.indexOf("row")>=0&&tt.indexOf("jqx-grid-cell-selected")!=-1)return;if(this.hoveredrow=f,this.selectionmode.indexOf("cell")!=-1||this.selectionmode=="checkbox"){var a=-1,w=this.hScrollInstance,it=w.value;for(this.rtl&&this.hScrollBar.css("visibility")!="hidden"&&(it=w.max-w.value),r=s;r<h;r++)if(b=parseInt(n(this.columnsrow[0].cells[r]).css("left"))-it,rt=b+n(this.columnsrow[0].cells[r]).width(),rt>=c&&c>=b){a=r;break}if(a!=-1&&(e=u.cells[a],e.className.indexOf("jqx-grid-cell-selected")==-1)){if(this.editcell&&(k=this._getcolumnat(a),k&&this.editcell.row==f&&this.editcell.column==k.datafield))return;n(e).addClass(this.toTP("jqx-grid-cell-hover")),n(e).addClass(this.toTP("jqx-fill-state-hover"))}return}for(r=s;r<h;r++)e=u.cells[r],n(e).addClass(this.toTP("jqx-grid-cell-hover")),n(e).addClass(this.toTP("jqx-fill-state-hover"))}else return!0}})})(jQuery);
//# sourceMappingURL=jqxgrid.selection.min.js.map