(function(n){n.jqx.jqxWidget("jqxDocking","",{}),n.extend(n.jqx._jqxDocking.prototype,{defineInstance:function(){this.orientation="horizontal",this.mode="default",this.floatingWindowOpacity=.3,this.panelsRoundedCorners=!0,this.disabled=!1,this.width="auto",this.height="auto",this.windowsMode=null,this.cookies=!1,this.cookieOptions={},this.windowsOffset=5,this.rtl=!1,this._windowOptions={},this._draggedFired=!1,this._dragging=!1,this._draggingItem=null,this._panels=[],this._windows=[],this._indicator=null,this._events=["dragEnd","dragStart"]},createInstance:function(){if(!this.host.jqxWindow)throw new Error("jqxDocking: Missing reference to jqxwindow.js.");this._refresh(!0),this.disabled&&(this.disabled=!1,this.disable())},refresh:function(n){n||this._performLayout()},_refresh:function(){this._render(),this._removeClasses(),this._addClasses(),this._setWindowsOptions(!0),this._performLayout(),this._cookieHandler(),this._cookieExporter(),this._removeEventListeners(),this._addEventListeners();var t=n.Event("resize");this.host.trigger(t)},_addClasses:function(){var n;for(this.host.addClass("jqx-docking"),n=0;n<this._panels.length;n+=1)this._panels[n].addClass(this.toThemeProperty("jqx-docking-panel")),this.panelsRoundedCorners&&this._panels[n].addClass(this.toThemeProperty("jqx-rc-all"));for(n=0;n<this._windows.length;n+=1)this._windows[n].addClass(this.toThemeProperty("jqx-docking-window"))},_removeClasses:function(){var n;for(this.host.removeClass("jqx-docking"),n=0;n<this._panels.length;n+=1)this._panels[n].removeClass(this.toThemeProperty("jqx-docking-panel")),this._panels[n].removeClass(this.toThemeProperty("jqx-rc-all"));for(n=0;n<this._windows.length;n+=1)this._windows[n].removeClass(this.toThemeProperty("jqx-docking-window"))},_render:function(){for(var i=this.host.children("div"),t=0;t<i.length;t+=1)this._panels.push(n(i[t])),this._renderWindows(n(i[t]))},_renderWindows:function(t){for(var r=t.children("div"),i=0;i<r.length;i+=1)this._windows.push(n(r[i])),n(r[i]).jqxWindow({keyboardNavigation:!1,rtl:this.rtl,theme:this.theme,enableResize:!1,width:n(r[i]).css("width"),maxWidth:Number.MAX_VALUE}),n(r[i]).detach(),t.append(n(r[i]));t.append('<div class="spacer" style="clear: both;"><\/div>')},_performLayout:function(){this.host.css("width",this.width),this.host.css("height",this.height),this._performWindowsLayout(),this._performPanelsLayout(),this._performWindowsLayout()},_performPanelsLayout:function(){for(var n,r=this.host.width(),i=0,t=0;t<this._panels.length;t+=1)n=this._panels[t],n.css("height","auto"),n.css("min-width","auto"),this.orientation==="vertical"?(n.css("width","auto"),n.css("float","none")):(i+=this._handleHorizontalSize(n,i,r),t>0&&n.css("margin-left",-this.windowsOffset)),n.css("min-width",n.width());this.orientation==="horizontal"&&i<r&&this._fillContainer(r,i)},_handleHorizontalSize:function(n,t,i){var u=i/this._panels.length,r,f=n.outerWidth()-n.width();return n.css("float","left"),(n.css("width")==="auto"||parseInt(n.css("width"),10)===0)&&n.width(u-f),t+n.outerWidth()>=i&&(t+u<i?(r=u-f,n.css("min-width",r),n.width(r)):(r=n.width()-(t+n.outerWidth()-i),n.css("min-width",r),n.width(r))),n.outerWidth()},_fillContainer:function(t,i){var f=this._panels.length,r=this._panels[f-1],u=t-i+r.width();n.jqx.browser.msie&&n.jqx.browser.version<9&&(u-=this._panels.length),r.width(u)},_performWindowsLayout:function(){for(var t,n=0;n<this._windows.length;n+=1)t=this._getWindowOptions(this._windows[n]),this._windows[n].ischildof(this.host)&&(t?t.mode!=="floating"&&(this._windows[n].css("margin",this.windowsOffset),this._windows[n].css("position","static")):this.mode!=="floating"&&(this._windows[n].css("position","static"),this._windows[n].css("margin",this.windowsOffset))),this._setWindowSize(this._windows[n],t)},_setWindowSize:function(n,t){if(t.mode!=="floating"&&n.ischildof(this.host)){var i=n.parent().width()-(n.outerWidth()-n.width())-2*this.windowsOffset;this.orientation==="vertical"?n.jqxWindow("width",i):n.jqxWindow("width",i)}this._setWindowOption(n,"size",{width:n.width(),height:n.height()})},_setWindowsOptions:function(n){for(var i,r,u,f,t=0;t<this._windows.length;t+=1)r=this._windows[t].attr("id"),u=this._getWindowOptions(r),n||(f="TEDX"),i=null,this.windowsMode&&this.windowsMode.hasOwnProperty(r)?(i=this.windowsMode[r],this._setWindowOption(this._windows[t],"mode",i)):typeof u!="undefined"&&typeof u.mode=="undefined"&&(i=this.mode,this._setWindowOption(this._windows[t],"mode",i)),n&&(this._setWindowOption(this._windows[t],"resizable",!0),i=="floating"?this._windows[t].jqxWindow({enableResize:!0}):this._windows[t].jqxWindow({enableResize:!1}),this._setWindowOption(this._windows[t],"size",{height:this._windows[t].height(),width:this._windows[t].width()}))},_removeEventListeners:function(){for(var n=0;n<this._windows.length;n+=1)this.removeHandler(this._windows[n],"moving",this._itemDragging),this.removeHandler(this._windows[n],"moved",this._itemDrop),this.removeHandler(this._windows[n],"resized",this._itemResized),this.removeHandler(this._windows[n],"collapse",this._collapsed),this.removeHandler(this._windows[n],"expand",this._expanded)},_addEventListeners:function(){for(var i,t=0;t<this._windows.length;t+=1)this._addEventListenersTo(this._windows[t]);i=this,n.jqx.utilities.resize(this.host,function(){i._performLayout()})},_addEventListenersTo:function(n){this.addHandler(n,"moving",this._itemDragging,{self:this}),this.addHandler(n,"moved",this._itemDrop,{self:this}),this.addHandler(n,"resized",this._itemResized,{self:this}),this.addHandler(n,"collapse",this._collapsed,{self:this}),this.addHandler(n,"expand",this._expanded,{self:this})},_itemDragging:function(t){var i=t.data.self,r=n(t.target),e=i._getWindowOptions(r),u,f;if(r.removeClass(i.toThemeProperty("jqx-docking-window")),r.css("margin","0px"),i._dragging||i._prepareForDragging(r),e.mode!=="floating")return u={x:t.args.pageX,y:t.args.pageY},f=i._getMouseOverPanel(u),f?i._mouseOverPanel(f,u):i._mouseLeavePanel(),i._draggedFired||(i._raiseEvent(1,{window:n(r).attr("id")}),i._draggedFired=!0),!0},_prepareForDragging:function(t){this._dragging=!0;var i={parent:t.parent(),next:t.next(),prev:t.prev()};this._setWindowOption(t,"lastPosition",i),t.detach(),n(document.body).append(t),this._setDraggingStyles(t),this._draggingItem=t},_setDraggingStyles:function(n){n.css({position:"absolute",left:n.offset().left,top:n.offset().top}),n.fadeTo(0,this.floatingWindowOpacity)},_getMouseOverPanel:function(n){for(var t=0;t<this._panels.length;t+=1)if(this._isMouseOverItem(this._panels[t],n,!1))return this._panels[t];return null},_mouseOverPanel:function(n,t){var r,i,u;if(this._dragging){if(r=n.children("div"),i=this._getHoverWindow(t,r),i==="indicator")return;u=this._centerOffset(i,t),this._handleIndicator(n,i,u)}},_getHoverWindow:function(t,i){var r;if(this._isMouseOverItem(this._indicator,t,!0))return"indicator";for(r=0;r<i.length;r+=1)if(this._isMouseOverItem(n(i[r]),t,!0))return n(i[r]);return null},_centerOffset:function(n,t){if(n){var r={x:n.offset().left,y:n.offset().top},u=n.height(),f=n.width(),i;return(i=r.y+u/2,t.y>i)?"next":"prev"}return"all"},_handleIndicator:function(n,t,i){var r=this._getIndicator(t);i==="all"?this.orientation==="vertical"?r.insertBefore(n.children(".spacer")):n.append(r):i==="prev"?r.insertBefore(t):r.insertAfter(t),this._resizeIndicator(r,n)},_getIndicator:function(){var t=this._indicator;return t||(t=n('<div class="'+this.toThemeProperty("jqx-docking-drop-indicator")+'"><\/div>')),this._indicator=t,this._indicator.css("margin",this.windowsOffset),this.orientation==="vertical"&&this._indicator.css("float","left"),t},_resizeIndicator:function(n,t){this.orientation==="horizontal"?(n.width(t.width()-(n.outerWidth(!0)-n.width())),n.height(this._draggingItem.height())):(n.width(this._draggingItem.width()),n.height(this._draggingItem.height()))},_mouseLeavePanel:function(){this._indicator&&(this._indicator.remove(),this._indicator=null)},_itemDrop:function(t){var i=t.data.self,r=n(t.currentTarget);i._dragging=!1,i._indicator?(r.detach(),r.insertAfter(i._indicator),i._indicator.remove(),i._dropFixer(r)):i._dropHandler(r),r.fadeTo(0,1),r.focus(),i._indicator=null,i._cookieExporter(),i._draggedFired=!1,i._raiseEvent(0,{window:r.attr("id")})},_dropFixer:function(n){n.css("position","static"),n.addClass(this.toThemeProperty("jqx-docking-window")),n.css("margin",this.windowsOffset),n.jqxWindow("enableResize",!1),this.orientation==="horizontal"&&this._fixWindowSize(n)},_dropHandler:function(n){var t=this._getWindowOptions(n);this.mode==="docked"?this._dropDocked(n):this._dropFloating(n)},_dropDocked:function(n){var i=this._getWindowOptions(n),t=i.lastPosition;n.detach(),t.next[0]?n.insertBefore(t.next):t.prev[0]?n.insertAfter(t.prev):t.parent.append(n),this._dropFixer(n)},_fixWindowSize:function(t){n(t).jqxWindow({width:t.parent().width()-(t.outerWidth()-t.width())-2*parseInt(this.windowsOffset,10)})},_itemResized:function(t){var i=t.data.self,r=n(t.currentTarget);i._setWindowOption(r,"size",{width:t.args.width,height:t.args.height}),i._cookieExporter()},_dropFloating:function(t){var i;n(t).jqxWindow("collapsed")||(i=this._getWindowOptions(t),n(t).jqxWindow("enableResize",i.resizable)),n(document.body).append(t),this._restoreWindowSize(t)},_restoreWindowSize:function(t){var i=this._getWindowOptions(t);n(t).jqxWindow({width:i.size.width})},_isMouseOverItem:function(n,t,i){if(!n)return!1;var o=n.outerWidth(!0),s=n.outerHeight(!0),r=n.width(),u=n.height(),f=n.offset().top,e=n.offset().left;return(i&&(f-=(s-u)/2,e-=(o-r)/2,r=o,u=s),e<=t.x&&e+r>=t.x&&f<=t.y&&f+u+2*this._draggingItem.height()/3>=t.y)?!0:!1},_cookieHandler:function(){if(this.cookies){var t=n.jqx.cookie.cookie("jqxDocking"+this.element.id);t!==null&&(this.importLayout(t),layoutImported=!0)}},_cookieExporter:function(){this.cookies&&n.jqx.cookie.cookie("jqxDocking"+this.element.id,this.exportLayout(),this.cookieOptions)},_indexOf:function(n,t){for(var i=0;i<t.length;i+=1)if(n[0]===t[i][0])return i;return-1},_exportFixed:function(){for(var e=[],t="",u,i,f,r=0;r<this._panels.length;r+=1){for(t+='"panel'+r+'": {',u=this._panels[r].children(),f=0;f<u.length;f+=1)i=n(u[f]),i.attr("id")&&(e.push(i),t+='"'+i.attr("id")+'":{"collapsed":'+i.jqxWindow("collapsed")+"},");u.length>1&&(t=t.substring(0,t.length-1)),t+="},"}return t=t.substring(0,t.length-1),{JSON:t,children:e}},_exportFloating:function(t){var i="",r,u;for(i+='"floating":{',u=0;u<this._windows.length;u+=1)r=n(this._windows[u]),this._indexOf(r,t)===-1&&(i+='"'+r.attr("id")+'":{"x":"'+r.css("left")+'","y":"'+r.css("top")+'","width":"'+r.jqxWindow("width")+'","height":"'+r.jqxWindow("height")+'","collapsed":'+r.jqxWindow("collapsed")+"},");return i.substring(i.length-1,i.length)===","&&(i=i.substring(0,i.length-1)),i+"}"},_importFixed:function(t){var i;for(i in t)if(i!=="orientation"&&i!=="floating"&&t.hasOwnProperty(i)){order=i.substring(i.length-1,i.length),order=parseInt(order,10),children=t[i];for(i in children)n("#"+i).css("position","static"),children[i].collapsed&&function(t){setTimeout(function(){n("#"+t).jqxWindow("collapsed",!0)},0)}(i),this._panels[order].append(n("#"+i)),this.orientation==="horizontal"&&this._fixWindowSize(n("#"+i))}},_importFloating:function(t){var r=t.floating,u,i;for(i in r)r.hasOwnProperty(i)&&(n("#"+i).css("position","absolute"),n(document.body).append(n("#"+i)),u=this._dragging,n("#"+i).jqxWindow("move",r[i].x,r[i].y),this._dragging=u,n("#"+i).jqxWindow("width",r[i].width),n("#"+i).jqxWindow("height",r[i].height),n("#"+i).jqxWindow("enableResize",!0),this._setWindowsOptions(!0),function(t){setTimeout(function(){n("#"+t).jqxWindow("collapsed",r[t].collapsed)},0)}(i),n("#"+i).fadeTo(0,1))},_getWindowOptions:function(n){return typeof n=="object"&&n!==null&&(n=n.length>0?n.attr("id"):n.id),this._windowOptions[n]},_setWindowOption:function(n,t,i){typeof n=="object"&&n!==null&&(n=n.length>0?n.attr("id"):n.id),typeof this._windowOptions[n]=="undefined"&&(this._windowOptions[n]={}),this._windowOptions[n][t]=i,t==="mode"&&this.setWindowMode(n,i)},_expanded:function(n){var t=n.data.self;t._cookieExporter()},_collapsed:function(n){var t=n.data.self;t._cookieExporter()},_raiseEvent:function(t){var i=n.Event(this._events[t]);return i.args=arguments[1],this.host.trigger(i)},_moveWindow:function(t,i,r){var e=i.children(),u=null,f=0;n.each(e,function(){n(this).css("position")=="static"&&(f==r&&this!=t[0]&&(u=this),f++)}),f<=r?t.appendTo(i):u!=null&&t.insertBefore(u),t.css("position","static")},propertyChangedHandler:function(t,i,r,u){switch(i){case"rtl":n.each(t._windows,function(){this.jqxWindow({rtl:u})});break;case"theme":n.each(t._windows,function(){this.jqxWindow({theme:u})});break;case"orientation":case"height":case"width":t._performLayout(),t._cookieExporter();break;case"panelsRoundedCorners":t._removeClasses(),t._addClasses();break;case"disabled":u?(t.disabled=!1,t.disable()):(t.disabled=!0,t.enable());break;case"windowsMode":case"mode":t._setWindowsOptions(!1);break;case"cookies":t._cookieExporter();break;case"windowsOffset":t._performLayout()}},destroy:function(){this._removeEventListeners(),this.host.remove(),this.windowsMode=null,this.cookieOptions=null,this._windowOptions=null,this._panels=null,this._windows=null,this._events=null},disable:function(){if(!this.disabled){this.disabled=!0,this._removeEventListeners();for(var t=0;t<this._windows.length;t+=1)this._windows[t][0].style.opacity="",n(this._windows[t]).jqxWindow("disable")}},enable:function(){if(this.disabled){this.disabled=!1,this._addEventListeners();for(var t=0;t<this._windows.length;t+=1)n(this._windows[t]).jqxWindow("enable")}},move:function(t,i,r){var i=this._panels[i],u,f;i&&(u=n(i.children(".spacer")),u.detach(),t=n("#"+t),f=this._getWindowOptions(t),f.mode!=="floating")&&(this._moveWindow(t,i,r),i.append(u),this._cookieExporter(),this._dropFixer(t))},exportLayout:function(){var n="{",t=this._exportFixed();return n+=t.JSON+","+this._exportFloating(t.children)+',"orientation": "'+this.orientation+'"',n+"}"},importLayout:function(t){try{var i=n.parseJSON(t);this.orientation=i.orientation,this._performLayout(),this._importFixed(i),this._importFloating(i)}catch(r){alert("Invalid JSON string.")}},setWindowMode:function(t,i){var t=n("#"+t),r=this._getWindowOptions(t);i==="floating"?(t.css("position","absolute"),this._windowOptions[t.attr("id")].mode=i):r.mode==="floating"&&t.css("position")==="absolute"&&(r.lastPosition?this._dropDocked(t):(this._panels[0].append(t),this._dropFixer(t))),this._windowOptions[t.attr("id")].mode=i},hideCloseButton:function(t){n("#"+t).jqxWindow("showCloseButton",!1)},showCloseButton:function(t){n("#"+t).jqxWindow("showCloseButton",!0)},hideCollapseButton:function(t){n("#"+t).jqxWindow("showCollapseButton",!1)},showCollapseButton:function(t){n("#"+t).jqxWindow("showCollapseButton",!0)},expandWindow:function(t,i){n("#"+t).jqxWindow("expand",i)},collapseWindow:function(t,i){n("#"+t).jqxWindow("collapse",i)},setWindowProperty:function(t,i,r){n("#"+t).jqxWindow(i,r)},getWindowProperty:function(t,i){return n("#"+t).jqxWindow(i)},setWindowPosition:function(t,i,r){var t=n("#"+t),u=this._getWindowOptions(t);u.mode==="floating"&&(t.css("position","absolute"),n(t).jqxWindow("move",i,r,null,!1))},hideAllCloseButtons:function(){for(var n=0;n<this._windows.length;n+=1)this._windows[n].jqxWindow("showCloseButton",!1)},hideAllCollapseButtons:function(){for(var n=0;n<this._windows.length;n+=1)this._windows[n].jqxWindow("showCollapseButton",!1)},showAllCloseButtons:function(){for(var n=0;n<this._windows.length;n+=1)this._windows[n].jqxWindow("showCloseButton",!0)},showAllCollapseButtons:function(){for(var n=0;n<this._windows.length;n+=1)this._windows[n].jqxWindow("showCollapseButton",!0)},pinWindow:function(t){n("#"+t).jqxWindow("draggable",!1)},unpinWindow:function(t){n("#"+t).jqxWindow("draggable",!0)},setDraggingMode:function(t){var i=n("#"+t);this._prepareForDragging(i),i.fadeTo(0,1)},enableWindowResize:function(t){t=n("#"+t),t.css("position")==="absolute"&&(this._setWindowOption(t,"resizable",!0),t.jqxWindow("enableResize",!0))},disableWindowResize:function(t){t=n("#"+t),this._setWindowOption(t,"resizable",!1),t.jqxWindow("enableResize",!1)},addWindow:function(t,i,r,u){var f="#"+t;n(f).jqxWindow({keyboardNavigation:!1,rtl:this.rtl,theme:this.theme,enableResize:!1,width:n(f).css("width"),maxWidth:Number.MAX_VALUE}),this._panels[0].append(n(f)),this._windows.push(n(f)),i?this._setWindowOption(n(f),"mode",i):this._setWindowOption(n(f),"mode",this.mode),this._setWindowOption(n(f),"resizable",!0),this._setWindowOption(n(f),"size",{width:n(f).width(),height:n(f).height()}),i=="floating"?n(f).jqxWindow({enableResize:!0}):n(f).jqxWindow({enableResize:!1}),this._panels[r]!=null&&this._setWindowOption(n(f),"size",{width:this._panels[r].width(),height:this._panels[r].height()}),this._addEventListenersTo(n(f)),typeof r!="undefined"&&typeof u!="undefined"&&this.move(t,r,u),this._dropFixer(n(f))},closeWindow:function(t){n("#"+t).jqxWindow("closeWindow")}})})(jQuery);
//# sourceMappingURL=jqxdocking.min.js.map