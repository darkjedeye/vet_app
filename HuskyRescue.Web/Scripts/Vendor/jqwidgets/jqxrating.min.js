(function(n){n.jqx.jqxWidget("jqxRating","",{}),n.extend(n.jqx._jqxRating.prototype,{defineInstance:function(){this.count=5,this.disabled=!1,this.value=0,this.height="auto",this.width="auto",this.precision=1,this.singleVote=!1,this.itemHeight="20",this.itemWidth="20",this._itemHeight,this._itemWidth,this._images=[],this.aria={"aria-valuenow":{name:"value",type:"number"},"aria-disabled":{name:"disabled",type:"boolean"}},this._events=["change"],this._invalidArgumentExceptions={invalidPrecision:"The value of the precision property is invalid!",invalidWidth:"Width you've entered is invalid!",invalidHeight:"Height you've entered is invalid!",invalidCount:"You've entered invalid value for the count property!",invalidValue:"You've entered invalid value property!"}},createInstance:function(){n.jqx.aria(this),this._createRating()},destroy:function(){this.host.remove()},val:function(n){return arguments.length==0||typeof n=="object"?this.value:(this.value=typeof n=="string"?parseInt(n):n,this.setValue(this.value),this.value)},_createRating:function(){this.host.css("display","none"),this.host.empty(),this._addInput(),this._validateProperties(),this._render(),this._performLayout(),this._removeEventHandlers(),this._addEventHandlers(),this.host.css("display","block")},_addInput:function(){var t=this.host.attr("name");t||(t=this.element.id),this.input=n("<input type='hidden'/>"),this.host.append(this.input),this.input.attr("name",t),this.input.val(this.value.toString())},_render:function(){for(var t=1;t<=this.count;t++)this._images[t-1]=n('<div style="float:left;width:auto;height:auto;"><div style="position:absolute;width:auto;height:auto;visibility:hidden;" class="jqx-rating-hoverWrapper"><div style="width:auto;height:auto;float:left;" class="'+this.toThemeProperty("jqx-rating-image-hover")+'"><\/div><div style="visibility:hidden;width:auto;height:auto;" class="'+this.toThemeProperty("jqx-rating-image-backward")+'"><\/div><\/div><div style="position:absolute;width:auto;height:auto;" class="jqx-rating-voteWrapper"><div style="width:auto;height:auto;float:left;" class="'+this.toThemeProperty("jqx-rating-image-default")+'"><\/div><div style="width:0;height:auto;float:left;" class="'+this.toThemeProperty("jqx-rating-image-backward")+'"><\/div><\/div><\/div>'),this.host.append(this._images[t-1])},_performLayout:function(){for(var n=1;n<=this.count;n++){var t=this._images[n-1].find(this.toThemeProperty(".jqx-rating-image-backward",!0)),i=this._images[n-1].find(this.toThemeProperty(".jqx-rating-image-default",!0)),r=this._images[n-1].find(this.toThemeProperty(".jqx-rating-image-hover",!0)),u=this._getImageName(i),f=this._getImageName(r),e=this._getImageName(t);i.css("background-image","none"),r.css("background-image","none"),t.css("background-image","none"),this._appendImage(r,f,n-1),this._appendImage(t,e,n-1),this._appendImage(i,u,n-1)}},_setControlSize:function(n,t){this.host.css("height",this.height),this.host.css("width",this.width),this._itemHeight=this.itemHeight&&this.itemHeight!=="auto"?parseInt(this.itemHeight):t,this._itemWidth=this.itemWidth&&this.itemWidth!=="auto"?parseInt(this.itemWidth):n},_appendImage:function(t,i,r){var u=this,f=n('<img style="-moz-user-select:-moz-none;-khtml-user-select: none;-webkit-user-select:none;user-select:none;" class="'+this.toThemeProperty("jqx-rating-image")+'" src="'+i+'" />');return t.append(f),f.load(function(){u._initialized||(u._setControlSize(n(this).width(),n(this).height()),u._setValue(u.value,".jqx-rating-voteWrapper",".jqx-rating-image-default",".jqx-rating-image-backward"),u._initialized=!0),u._images[r].height(u._itemHeight),n(this).height(u._itemHeight),u._images[r].width(u._itemWidth),n(this).width(u._itemWidth)}),f},_validateProperties:function(){try{if(this.precision<.001||this.precision>1)throw this._invalidArgumentExceptions.invalidPrecision;if(this.height!=="auto"&&parseInt(this.height)<0)throw this._invalidArgumentExceptions.invalidHeight;if(this.width!=="auto"&&parseInt(this.width)<0)throw this._invalidArgumentExceptions.invalidWidth;if(this.count<=0)throw this._invalidArgumentExceptions.invalidCount;if(this.value>this.count||this.value<0)throw this._invalidArgumentExceptions.invalidValue;}catch(n){alert(n)}},_getImageIndex:function(n){for(var t=0;n!==this._images[t][0];)t++;return++t},_getRating:function(t,i){var u=this._getImageIndex(t),e;if(this.precision<1){for(var o=parseInt(i)-parseInt(n(t).position().left),f=this._itemWidth*this.precision,r=0;r<o;)r+=f;r>parseInt(this._itemWidth)-f&&(r=parseInt(this._itemWidth)),e=r/n(t).width(),u-=1-e}return u},_addEventHandlers:function(){for(var t=this,i=0;i<this.count;i++)n.jqx.mobile.isTouchDevice()||(this.addHandler(this._images[i],"mousemove",function(n){var i=t._getRating(this,n.pageX);t._setValue(i,".jqx-rating-hoverWrapper",".jqx-rating-image-hover",".jqx-rating-image-backward")}),this.addHandler(this._images[i],"mouseenter",function(){for(var i=t._getImageIndex(this),n=0;n<i;n++)t._images[n].children(".jqx-rating-hoverWrapper").css("z-index","10"),t._images[n].children(".jqx-rating-voteWrapper").css("z-index","1"),t._images[n].children(".jqx-rating-hoverWrapper").css("visibility","visible")}),this.addHandler(this._images[i],"mouseleave",function(){for(var i=t._getImageIndex(this),n=0;n<i;n++)t._images[n].children(".jqx-rating-voteWrapper").css("z-index","10"),t._images[n].children(".jqx-rating-hoverWrapper").css("z-index","1"),t._images[n].children(".jqx-rating-hoverWrapper").css("visibility","hidden")})),this.addHandler(this._images[i],"click",function(n){var i=t._getRating(this,n.pageX);t._raiseEvent(0,i),t._setValue(i,".jqx-rating-voteWrapper",".jqx-rating-image-default",".jqx-rating-image-backward"),t.singleVote&&t.disable(),n.stopPropagation()}),this.addHandler(this._images[i],"dragstart",function(){return!1})},_removeEventHandlers:function(){for(var n=0;n<this.count;n++)this.removeHandler(this._images[n],"mousemove"),this.removeHandler(this._images[n],"mouseenter"),this.removeHandler(this._images[n],"mouseleave"),this.removeHandler(this._images[n],"click"),this.removeHandler(this._images[n],"dragstart")},_getImageName:function(n){var t=n.css("background-image");return t=t.replace('url("',""),t=t.replace('")',""),t=t.replace("url(",""),t.replace(")","")},_setValue:function(t,i,r,u){for(var f=1;f<=this.count;f++){var e=1,o=this._images[f-1].children(i),s=o.children(r),h=o.children(u);f>t&&(e=Math.abs(f-t)<1?1-Math.abs(f-t):0),s.width(this._itemWidth*e),h.width(this._itemWidth-parseInt(s.width())),o.children(this.toThemeProperty(u)).children(0).css("margin-left",-this._itemWidth*e+"px")}n.jqx.aria(this,"aria-valuenow",t)},_raiseEvent:function(t,i){var r=new n.Event(this._events[t]);return r.owner=this,r.value=i,r.oldvalue=this.value,this.value=i,this.input&&this.input.val(this.value.toString()),this.host.trigger(r)},setValue:function(n){this._setValue(n,".jqx-rating-voteWrapper",".jqx-rating-image-default",".jqx-rating-image-backward"),this.value=n},getValue:function(){return this.value},disable:function(){this._removeEventHandlers(),this.disabled=!0,n.jqx.aria(this,"aria-disabled",!0)},enable:function(){this._removeEventHandlers(),this._addEventHandlers(),this.disabled=!1,n.jqx.aria(this,"aria-disabled",!1)},propertyChangedHandler:function(n,t,i,r){if(this._validateProperties(),t==="disabled"){r?this.disable():this.enable();return}if(t==="precision"){this.precision=r;return}this._createRating()}})})(jQuery);
//# sourceMappingURL=jqxrating.min.js.map