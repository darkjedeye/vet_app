(function(n){function v(n){return function(t,i){typeof t!="string"&&(i=t,t="*");var r,e,u,o=t.toLowerCase().split(c),f=0,s=o.length;if(jQuery.isFunction(i))for(;f<s;f++)r=o[f],u=/^\+/.test(r),u&&(r=r.substr(1)||"*"),e=n[r]=n[r]||[],e[u?"unshift":"push"](i)}}function u(n,t,i,r,f,e){f=f||t.dataTypes[0],e=e||{},e[f]=!0;for(var s,h=n[f],c=0,a=h?h.length:0,l=n===o;c<a&&(l||!s);c++)s=h[c](t,i,r),typeof s=="string"&&(!l||e[s]?s=undefined:(t.dataTypes.unshift(s),s=u(n,t,i,r,s,e)));return!l&&s||e["*"]||(s=u(n,t,i,r,"*",e)),s}function y(t,i){var r,u,f=n.jqx.data.ajaxSettings.flatOptions||{};for(r in i)i[r]!==undefined&&((f[r]?t:u||(u={}))[r]=i[r]);u&&jQuery.extend(!0,t,u)}function it(n,t,i){var e,r,f,o,s=n.contents,u=n.dataTypes,h=n.responseFields;for(r in h)r in i&&(t[h[r]]=i[r]);while(u[0]==="*")u.shift(),e===undefined&&(e=n.mimeType||t.getResponseHeader("content-type"));if(e)for(r in s)if(s[r]&&s[r].test(e)){u.unshift(r);break}if(u[0]in i)f=u[0];else{for(r in i){if(!u[0]||n.converters[r+" "+u[0]]){f=r;break}o||(o=r)}f=f||o}if(f)return f!==u[0]&&u.unshift(f),i[f]}function rt(n,t){var i,o,r,e,s=n.dataTypes.slice(),f=s[0],u={},h=0;if(n.dataFilter&&(t=n.dataFilter(t,n.dataType)),s[1])for(i in n.converters)u[i.toLowerCase()]=n.converters[i];for(;r=s[++h];)if(r!=="*"){if(f!=="*"&&f!==r){if(i=u[f+" "+r]||u["* "+r],!i)for(o in u)if(e=o.split(" "),e[1]===r&&(i=u[f+" "+e[0]]||u["* "+e[0]],i)){i===!0?i=u[o]:u[o]!==!0&&(r=e[0],s.splice(h--,0,r));break}if(i!==!0)if(i&&n.throws)t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function b(){try{return new window.XMLHttpRequest}catch(n){}}function et(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}var r,e,w;n.jqx.dataAdapter=function(t,i){var u,r;t!=undefined&&(t.dataFields!==undefined&&(t.datafields=t.dataFields),t.dataType!==undefined&&(t.datatype=t.dataType),t.localData!==undefined&&(t.localdata=t.localData),t.sortColumn!==undefined&&(t.sortcolumn=t.sortColumn),t.sortDirection!==undefined&&(t.sortdirection=t.sortDirection),t.sortOrder!==undefined&&(t.sortdirection=t.sortOrder),t.formatData!==undefined&&(t.formatdata=t.formatData),t.processData!==undefined&&(t.processdata=t.processData),t.pageSize!==undefined&&(t.pagesize=t.pageSize),t.pageNum!==undefined&&(t.pagenum=t.pageNum),t.updateRow!==undefined&&(t.updaterow=t.updateRow),t.addRow!==undefined&&(t.addrow=t.addRow),t.deleteRow!==undefined&&(t.deleterow=t.deleteRow),t.contentType!==undefined&&(t.contenttype=t.contentType),t.totalRecords!=undefined&&(t.totalRecords=t.totalRecords),t.loadError!=undefined&&(t.loadError=t.loadError),t.sortComparer!=undefined&&(t.sortcomparer=t.sortComparer)),this._source=t,this._options=i||{},this.records=[],this._downloadComplete=[],this._bindingUpdate=[],t!=undefined&&t.localdata!=null&&typeof t.localdata=="function"&&(u=t.localdata(),u!=null&&(t._localdata=t.localdata,r=this,t._localdata.subscribe&&(r._oldlocaldata=[],t._localdata.subscribe(function(t){var i=function(t){return jQuery.isArray(t)?jQuery.makeArray(i(n(t))):jQuery.extend(!0,{},t)};(r.suspendKO==!1||r.suspendKO==undefined||r._oldlocaldata.length==0)&&(r._oldlocaldata=i(t))},t._localdata,"beforeChange"),t._localdata.subscribe(function(n){if(r.suspendKO==!1||r.suspendKO==undefined){var i="";r._oldrecords=r.records,r._oldlocaldata.length==0&&(t.localdata=t._localdata()),r._oldlocaldata.length==0?i="change":(r._oldlocaldata.length==n.length&&(i="update"),r._oldlocaldata.length>n.length&&(i="remove"),r._oldlocaldata.length<n.length&&(i="add")),r.dataBind(null,i)}},t._localdata,"change"),r._knockoutdatasource=!0),t.localdata=u)),this._options.autoBind==!0&&this.dataBind()},n.jqx.dataAdapter.prototype={getrecords:function(){return this.records},beginUpdate:function(){this.isUpdating=!0},endUpdate:function(n){this.isUpdating=!1,n!=!1&&(this._changedrecords&&this._changedrecords.length>0?(this.callBindingUpdate("update"),this._changedrecords=[]):this.dataBind(null,""))},formatDate:function(t,i,r){return n.jqx.dataFormat.formatdate(t,i,r)},formatNumber:function(t,i,r){return n.jqx.dataFormat.formatnumber(t,i,r)},dataBind:function(t,i){var r,f,v,u,a,d,y,s,g,rt,h,nt,p,o,e,w,b,ut,c,l,tt,it,k;if(this.isUpdating!=!0&&(r=this._source,r)){if(n.jqx.dataFormat.datescache=[],r.dataFields!=null&&(r.datafields=r.dataFields),r.recordstartindex==undefined&&(r.recordstartindex=0),r.recordendindex==undefined&&(r.recordendindex=0),r.loadallrecords==undefined&&(r.loadallrecords=!0),r.sort!=undefined&&(this.sort=r.sort),this.filter=r.filter!=undefined?r.filter:null,r.sortcolumn!=undefined&&(this.sortcolumn=r.sortcolumn),r.sortdirection!=undefined&&(this.sortdirection=r.sortdirection),r.sortcomparer!=undefined&&(this.sortcomparer=r.sortcomparer),this.records=[],f=this._options||{},this.virtualmode=f.virtualmode!=undefined?f.virtualmode:!1,this.totalrecords=f.totalrecords!=undefined?f.totalrecords:0,this.pageable=f.pageable!=undefined?f.pageable:!1,this.pagesize=f.pagesize!=undefined?f.pagesize:0,this.pagenum=f.pagenum!=undefined?f.pagenum:0,this.cachedrecords=f.cachedrecords!=undefined?f.cachedrecords:[],this.originaldata=[],this.recordids=[],this.updaterow=f.updaterow!=undefined?f.updaterow:null,this.addrow=f.addrow!=undefined?f.addrow:null,this.deleterow=f.deleterow!=undefined?f.deleterow:null,this.cache=f.cache!=undefined?f.cache:!1,this.unboundmode=!1,r.formatdata!=undefined&&(f.formatData=r.formatdata),r.data!=undefined&&(f.data==undefined&&(f.data={}),n.extend(f.data,r.data)),this.mapChar=r.mapchar!=undefined?r.mapchar?r.mapchar:">":f.mapChar?f.mapChar:">",(f.unboundmode||r.unboundmode)&&(this.unboundmode=f.unboundmode||r.unboundmode),r.cache!=undefined&&(this.cache=r.cache),this.koSubscriptions)for(v=0;v<this.koSubscriptions.length;v++)this.koSubscriptions[v].dispose();this.koSubscriptions=[],this.pagenum<0&&(this.pagenum=0),u=this,a=r.datatype,(r.datatype==="csv"||r.datatype==="tab"||r.datatype=="text")&&(a="text"),d=f.async!=undefined?f.async:!0,r.async!=undefined&&(d=r.async);switch(a){case"local":case"array":case"observablearray":default:if(r.localdata==undefined&&r.length)for(r.localdata=[],e=0;e<r.length;e++)r.localdata[r.localdata.length]=r[e],r[e].uid=e;if(o=r.localdata.length,this.totalrecords=this.virtualmode?r.totalrecords||o:o,this.unboundmode&&(this.totalrecords=this.unboundmode?r.totalrecords||o:o,s=r.datafields?r.datafields.length:0,s>0))for(e=0;e<this.totalrecords;e++){for(h={},y=0;y<s;y++)h[r.datafields[y].name]="";h.uid=e,r.localdata[r.localdata.length]=h}if(this.totalrecords==undefined&&(this.totalrecords=0),s=r.datafields?r.datafields.length:0,g=function(t,i){for(var l={},e,f,s,h,c,o=0;o<i;o++)if(e=r.datafields[o],f="",undefined!=e&&e!=null){if(e.map){if(n.isFunction(e.map))f=e.map(t);else if(s=e.map.split(u.mapChar),s.length>0){for(h=t,c=0;c<s.length;c++)h=h[s[c]];f=h}else f=t[e.map];f!=undefined&&f!=null?f=f.toString():f==undefined&&f!=null&&(f="")}f==""&&(f=t[e.name],f!=undefined&&f!=null&&(f=r._localdata&&f.subscribe?f():f.toString())),f=u.getvaluebytype(f,e),e.displayname!=undefined?l[e.displayname]=f:l[e.name]=f}return l},r._localdata){if(this._changedrecords=[],this.records=[],rt=r._localdata(),n.each(rt,function(t,f){var l,h,a;if(typeof f=="string")u.records.push(f);else{var e={},c=0,o=this;n.each(this,function(i){var a=null,h="string",b,v,l,k,d,f,y,p,w;if(s>0){for(b=!1,v=0;v<s;v++)if(l=r.datafields[v],l!=undefined&&l.name==i){b=!0,a=l.map,h=l.type;break}if(!b)return!0}if(k=n.isFunction(o[i]),k)f=o[i](),h!="string"&&(f=u.getvaluebytype(f,{type:h})),e[i]=f,o[i].subscribe&&(d=t,u.koSubscriptions[u.koSubscriptions.length]=o[i].subscribe(function(n){var r=d,t;if(e[i]=n,t={index:r,oldrecord:e,record:e},u._changedrecords.push(t),!u.isUpdating)return u.callBindingUpdate("update"),u._changedrecords=[],!1}));else{if(f=o[i],a!=null)if(y=a.split(u.mapChar),y.length>0){for(p=o,w=0;w<y.length;w++)p=p[y[w]];f=p}else f=o[a];h!="string"&&(f=u.getvaluebytype(f,{type:h})),e[i]=f,e[i]!=undefined&&(c+=e[i].toString().length+e[i].toString().substr(0,1))}}),l=u.getid(r.id,o,t),e.uid=l,u.records.push(e),e._koindex=c,u._oldrecords&&(h=u.records.length-1,i=="update"&&u._oldrecords[h]._koindex!=c&&(a={index:h,oldrecord:u._oldrecords[h],record:e},u._changedrecords.push(a)))}}),i=="add")for(o=u.records.length,e=0;e<o;e++){for(h=u.records[e],nt=!1,p=0;p<u._oldrecords.length;p++)if(u._oldrecords[p]._koindex===h._koindex){nt=!0;break}nt||u._changedrecords.push({index:e,oldrecord:null,record:h,position:e!=0?"last":"first"})}else if(i=="remove")for(o=u._oldrecords.length,e=0;e<o;e++)w=u._oldrecords[e],u.records[e]?u.records[e]._koindex!=w._koindex&&u._changedrecords.push({index:e,oldrecord:w,record:null}):u._changedrecords.push({index:e,oldrecord:w,record:null})}else n.isArray(r.localdata)?s==0?n.each(r.localdata,function(t,i){var e=n.extend({},this),f;if(typeof i=="string")return u.records=r.localdata,!1;f=u.getid(r.id,e,t),typeof f=="object"&&(f=t),e.uid=f,u.records[u.records.length]=e}):n.each(r.localdata,function(t){var i=this,e=g(i,s),f=u.getid(r.id,e,t);typeof f=="object"&&(f=t),i=n.extend({},e),i.uid=f,u.records[u.records.length]=i}):(this.records=[],n.each(r.localdata,function(n){var i=u.getid(r.id,this,n),f,t;s>0?(f=this,t=g(f,s),t.uid=i,u.records[u.records.length]=t):(this.uid=i,u.records[u.records.length]=this)}));this.originaldata=r.localdata,this.cachedrecords=this.records,this.addForeignValues(r),f.uniqueDataFields&&(c=this.getUniqueRecords(this.records,f.uniqueDataFields),this.records=c,this.cachedrecords=c),f.beforeLoadComplete&&(b=f.beforeLoadComplete(u.records,this.originaldata),b!=undefined&&(u.records=b,u.cachedrecords=b)),f.autoSort&&f.autoSortField&&(ut=Object.prototype.toString,Object.prototype.toString=typeof field=="function"?field:function(){return this[f.autoSortField]},u.records.sort(function(t,i){if(t===undefined&&(t=null),i===undefined&&(i=null),t===null&&i===null)return 0;if(t===null&&i!==null)return 1;if(t!==null&&i===null)return-1;if((t=t.toString(),i=i.toString(),n.jqx.dataFormat.isNumber(t)&&n.jqx.dataFormat.isNumber(i))||n.jqx.dataFormat.isDate(t)&&n.jqx.dataFormat.isDate(i))return t<i?-1:t>i?1:0;n.jqx.dataFormat.isNumber(t)||n.jqx.dataFormat.isNumber(i)||(t=String(t).toLowerCase(),i=String(i).toLowerCase());try{if(t<i)return-1;if(t>i)return 1}catch(r){var u=r}return 0}),Object.prototype.toString=ut),u.buildHierarchy(),n.isFunction(f.loadComplete)&&f.loadComplete(r.localdata);break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":if(r.localdata!=null){n.isFunction(r.beforeprocessing)&&r.beforeprocessing(r.localdata),r.datatype==="xml"?u.loadxml(r.localdata,r.localdata,r):a==="text"?u.loadtext(r.localdata,r):u.loadjson(r.localdata,r.localdata,r),u.addForeignValues(r),f.uniqueDataFields&&(c=u.getUniqueRecords(u.records,f.uniqueDataFields),u.records=c,u.cachedrecords=c),u.buildHierarchy.call(u),n.isFunction(f.loadComplete)&&f.loadComplete(r.localdata);return}l=f.data!=undefined?f.data:{},r.processdata&&r.processdata(l),n.isFunction(f.processData)&&f.processData(l),n.isFunction(f.formatData)&&(tt=f.formatData(l),tt!=undefined&&(l=tt)),it="application/x-www-form-urlencoded",f.contentType&&(it=f.contentType),k="GET",r.type&&(k=r.type),f.type&&(k=f.type),r.url&&r.url.length>0?n.isFunction(f.loadServerData)?u._requestData(l,r,f):this.xhr=n.jqx.data.ajax({dataType:a,cache:this.cache,type:k,url:r.url,async:d,contentType:it,data:l,success:function(t,i,e){var o,s,c,h;if(n.isFunction(r.beforeprocessing)&&(o=r.beforeprocessing(t,i,e),o!=undefined&&(t=o)),n.isFunction(f.downloadComplete)&&(o=f.downloadComplete(t,i,e),o!=undefined&&(t=o)),t==null){u.records=[],u.cachedrecords=[],u.originaldata=[],u.callDownloadComplete(),n.isFunction(f.loadComplete)&&f.loadComplete([]);return}s=t,t.records&&(s=t.records),t.totalrecords!=undefined&&(r.totalrecords=t.totalrecords),r.datatype==="xml"?u.loadxml(null,s,r):a==="text"?u.loadtext(s,r):u.loadjson(null,s,r),u.addForeignValues(r),f.uniqueDataFields&&(c=u.getUniqueRecords(u.records,f.uniqueDataFields),u.records=c,u.cachedrecords=c),f.beforeLoadComplete&&(h=f.beforeLoadComplete(u.records,t),h!=undefined&&(u.records=h,u.cachedrecords=h)),u.buildHierarchy.call(u),u.callDownloadComplete(),n.isFunction(f.loadComplete)&&f.loadComplete(t,i,e,u.records)},error:function(t,i,e){n.isFunction(r.loaderror)&&r.loaderror(t,i,e),n.isFunction(f.loadError)&&f.loadError(t,i,e),t=null,u.callDownloadComplete()},beforeSend:function(t,i){n.isFunction(f.beforeSend)&&f.beforeSend(t,i),n.isFunction(r.beforesend)&&r.beforesend(t,i)}}):(u.callDownloadComplete(),n.isFunction(f.loadComplete)&&f.loadComplete(data))}this.callBindingUpdate(i)}},buildHierarchy:function(){var i=this._source,r=[],e,u,f,t,o,s,n;if(i.datafields){for(e=!1,u="",n=0;n<i.datafields.length;n++)f=i.datafields[n],f&&f.type=="array"&&(u=f,e=!0);if(e){if(!i.hierarchicalDataFields||i.hierarchicalDataFields.length==0)throw new Error("jqxDataAdapter: hierarchicalDataFields Array is not initialized!");for(this.hierarchy=this.records,n=0;n<this.records.length;n++)t=this.records[n],t.records=t[u.name],t.level=0,t.parent=null,t.label=t[i.hierarchicalDataFields[0].name],t.data=t,t.expanded===undefined&&(t.expanded=!1),o=function(n,t){var f,r;if(!t){n.records=[];return}for(f=0;f<t.length;f++)r=t[f],r.records=r[u.name],r.level=n.level+1,r.parent=n,r.label=r[i.hierarchicalDataFields[0].name],r.data=r,r.expanded===undefined&&(r.expanded=!1),o(r,r.records)},o(t,t.records);return}if(i.hierarchicalDataFields){for(s=[],n=0;n<i.hierarchicalDataFields.length;n++)s.push(i.hierarchicalDataFields[n].name);r=this.getGroupedRecords(s,"records","label",null,"data",null,"parent")}return this.hierarchy=r,r}},addForeignValues:function(n){for(var i=this,p=n.datafields?n.datafields.length:0,t,o,s,f,c,l,a,v,r,u,e=0;e<p;e++)if(t=n.datafields[e],t!=undefined)if(t.values!=undefined)for(t.value==undefined&&(t.value=t.name),t.values.value==undefined&&(t.values.value=t.value),o=[],i.pageable&&i.virtualmode?(s=i.pagenum*i.pagesize,f=s+i.pagesize,f>i.totalrecords&&(f=i.totalrecords)):(s=0,f=i.records.length),r=s;r<f;r++){var u=i.records[r],y=t.name,h=u[t.value];if(o[h]!=undefined)u[y]=o[h];else for(c=0;c<t.values.source.length;c++)if(l=t.values.source[c],a=l[t.values.value],a==undefined&&(a=l.uid),a==h){v=l[t.values.name],u[y]=v,o[h]=v;break}}else if(t.value!=undefined)for(r=0;r<i.records.length;r++)u=i.records[r],u[t.name]=u[t.value]},abort:function(){this.xhr&&this.xhr.readyState!=4&&(this.xhr.abort(),me.callDownloadComplete())},_requestData:function(t,i,r){var u=this,f=function(t){t.totalrecords&&(i.totalrecords=t.totalrecords,u.totalrecords=t.totalrecords),t.records&&(u.records=t.records,u.cachedrecords=t.records),n.isFunction(r.loadComplete)&&r.loadComplete(data),u.callDownloadComplete()};r.loadServerData(t,i,f)},getUniqueRecords:function(n,t){var i,r,u,f,s;if(n&&t){var h=n.length,c=t.length,e=[],o=[];for(i=0;i<h;i++)if(r=n[i],u="",r!=undefined){for(f=0;f<c;f++)s=t[f],u+=r[s]+"_";o[u]||(e[e.length]=r),o[u]=!0}}return e},getAggregatedData:function(t,i,r){var h=r,f,s,c,a,v,l,o,u,e;if((h||(h=this.records),f={},s=h.length,s!=0)&&s!=undefined){for(c=0;c<s;c++)for(a=h[c],o=0;o<t.length;o++)u=t[o],e=a[u.name],u.aggregates&&(f[u.name]=f[u.name]||{},v=function(t){for(obj in t){var i=f[u.name][obj];i==null&&(f[u.name][obj]=0,i=0),n.isFunction(t[obj])&&(i=t[obj](i,e,u.name,a)),f[u.name][obj]=i}},l=parseFloat(e),l=isNaN(l)?!1:!0,l&&(e=parseFloat(e)),typeof e=="number"&&isFinite(e)?n.each(u.aggregates,function(){var n=f[u.name][this];if(n==null&&(n=0,this=="min"&&(n=9999999999999),this=="max"&&(n=-9999999999999)),this=="sum"||this=="avg"||this=="stdev"||this=="stdevp"||this=="var"||this=="varp")n+=parseFloat(e);else if(this=="product")c==0?n=parseFloat(e):n*=parseFloat(e);else if(this=="min")n=Math.min(n,parseFloat(e));else if(this=="max")n=Math.max(n,parseFloat(e));else if(this=="count")n++;else if(typeof this=="object"){v(this);return}f[u.name][this]=n}):n.each(u.aggregates,function(){if(this=="min"||this=="max"||this=="count"||this=="product"||this=="sum"||this=="avg"||this=="stdev"||this=="stdevp"||this=="var"||this=="varp"){var n=f[u.name][this];return n==null&&(n=0),f[u.name][this]=n,!0}typeof this=="object"&&v(this)}));for(o=0;o<t.length;o++)u=t[o],f[u.name].avg!=undefined?(e=f[u.name].avg,f[u.name].avg=e/h.length):f[u.name].count!=undefined&&(f[u.name].count=s),(f[u.name].stdev||f[u.name].stdevp||f[u.name]["var"]||f[u.name].varp)&&n.each(u.aggregates,function(){var t,c,r,n;if(this=="stdev"||this=="var"||this=="varp"||this=="stdevp"){var l=f[u.name][this],e=s,o=l/s,i=0;for(t=0;t<s;t++)c=h[t],r=c[u.name],i+=(r-o)*(r-o);n=this=="stdevp"||this=="varp"?e:e-1,n==0&&(n=1),this=="var"||this=="varp"?f[u.name][this]=i/n:(this=="stdevp"||this=="stdev")&&(f[u.name][this]=Math.sqrt(i/n))}}),u.formatStrings&&n.each(u.aggregates,function(t){var e=u.formatStrings[t],r;if(e)if(this=="min"||this=="max"||this=="count"||this=="product"||this=="sum"||this=="avg"||this=="stdev"||this=="stdevp"||this=="var"||this=="varp")r=f[u.name][this],f[u.name][this]=n.jqx.dataFormat.formatnumber(r,e,i);else if(typeof this=="object")for(obj in this)r=f[u.name][obj],f[u.name][obj]=n.jqx.dataFormat.formatnumber(r,e,i)});return f}},bindDownloadComplete:function(n,t){this._downloadComplete[this._downloadComplete.length]={id:n,func:t}},unbindDownloadComplete:function(n){for(var t=0;t<this._downloadComplete.length;t++)if(this._downloadComplete[t].id==n){this._downloadComplete[t].func=null,this._downloadComplete.splice(t,1);break}},callDownloadComplete:function(){for(var t,n=0;n<this._downloadComplete.length;n++)t=this._downloadComplete[n],t.func!=null&&t.func()},setSource:function(n){this._source=n},generatekey:function(){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},getGroupedRecords:function(t,i,r,u,f,e,o){for(var d=this,g=[],w,h,a,rt,ut,k,y,b,ft,l,c=0;c<t.length;c++)g[c]=d.generatekey();i||(i="items"),r||(r="group"),f||(f="record"),o||(o="parentItem"),undefined===e&&(e="value");var nt=[],et=0,p=[],tt=t.length,it=this.records,ot=it.length,st=function(t){var i=t;return u&&n.each(u,function(){this.name&&this.map&&(i[this.map]=i[this.name])}),i};for(w=0;w<ot;w++){for(h=st(it[w]),id=h[d.uniqueId],a=[],rt=0,c=0;c<tt;c++)(ut=t[c],k=h[ut],null!=k)&&(a[rt++]={value:k,hash:g[c]});if(a.length!=tt)break;var s=null,v="",ht=-1;for(y=0;y<a.length;y++){if(ht++,b=a[y].value,ft=a[y].hash,v=v+"_"+ft+"_"+b,p[v]!=undefined&&p[v]!=null){s=p[v];continue}s==null?(s={level:0},s[o]=null,s[r]=b,s[f]=h,s.expanded=h.expanded!==undefined?h.expanded:!1,e&&(s[e]=h[e]),s[i]=[],nt[et++]=s):(l={level:s.level+1},l[o]=s,l[r]=b,l[i]=[],l[f]=h,l.expanded=h.expanded!==undefined?h.expanded:!1,e&&(l[e]=h[e]),s[i][s[i].length]=l,s=l),p[v]=s,s!=null&&y===a.length-1&&(s.leaf=!0)}}return nt},getRecordsHierarchy:function(t,i,r,u){var y=[],k=this.records,e,f,h,a,v;if(this.records.length==0)return null;var l=r!=null?r:"items",o=[],p=k,w=p.length,b=function(t){var i=t;return u&&n.each(u,function(){this.name&&this.map&&(i[this.map]=i[this.name])}),i};for(e=0;e<w;e++){var f=n.extend({},p[e]),s=f[i],c=f[t];o[c]={parentid:s,item:f}}for(e=0;e<w;e++){var f=n.extend({},p[e]),s=f[i],c=f[t];if(o[s]!=undefined){f={parentid:s,item:o[c].item},h=o[s].item,h[l]||(h[l]=[]);var d=h[l].length,a=f.item,v=b(a);h[l][d]=v,o[s].item=h,o[c]=f}else a=o[c].item,v=b(a),y[y.length]=v}return y},bindBindingUpdate:function(n,t){this._bindingUpdate[this._bindingUpdate.length]={id:n,func:t}},unbindBindingUpdate:function(n){for(var t=0;t<this._bindingUpdate.length;t++)if(this._bindingUpdate[t].id==n){this._bindingUpdate[t].func=null,this._bindingUpdate.splice(t,1);break}},callBindingUpdate:function(n){for(var i,t=0;t<this._bindingUpdate.length;t++)i=this._bindingUpdate[t],i.func!=null&&i.func(n)},getid:function(t,i,r){if(n(t,i).length>0)return n(t,i).text();if(t&&t.toString().length>0){var u=n(i).attr(t);if(u!=null&&u.toString().length>0)return u}return r},loadjson:function(t,i,r){var t,y,s,a,p,c,w,b,ut,k,ft,d,l,h,v,nt,tt,f,u,e,g,o,it,rt;if(typeof t=="string"&&(t=n.parseJSON(t)),r.root==undefined&&(r.root=""),r.record==undefined&&(r.record=""),t=t||i,t||(t=[]),y=this,r.root!=""){if(e=r.root.split(y.mapChar),e.length>1){for(s=t,o=0;o<e.length;o++)s!=undefined&&(s=s[e[o]]);t=s}else if(t[r.root]!=undefined?t=t[r.root]:n.each(t,function(){var n=this;if(this==r.root)return t=this,!1;this[r.root]!=undefined&&(t=this[r.root])}),!t&&(e=r.root.split(y.mapChar),e.length>0)){for(s=t,o=0;o<e.length;o++)s!=undefined&&(s=s[e[o]]);t=s}}else if(!t.length)for(obj in t)if(n.isArray(t[obj])){t=t[obj];break}if(t!=null&&t.length==undefined&&(t=n.makeArray(t)),t==null||t.length==undefined){alert("JSON Parse error.");return}if(t.length==0){this.totalrecords=0;return}if(a=t.length,this.totalrecords=this.virtualmode?r.totalrecords||a:a,this.records=[],this.originaldata=[],p=this.records,c=this.pageable?this.pagesize*this.pagenum:r.recordstartindex,this.recordids=[],r.loadallrecords&&(c=0,a=this.totalrecords),w=0,this.virtualmode&&(c=this.pageable?this.pagesize*this.pagenum:r.recordstartindex,w=c,c=0,a=this.totalrecords),b=r.datafields?r.datafields.length:0,b==0){ut=t[0],k=[];for(obj in ut)ft=obj,k[k.length]={name:ft};r.datafields=k,b=k.length}for(d=c,l=c;l<a;l++){if(h=t[l],h==undefined)break;if((!r.record||r.record==""||(h=h[r.record],h!=undefined))&&(v=this.getid(r.id,h,l),typeof v=="object"&&(v=l),!this.recordids[v])){for(this.recordids[v]=h,nt={},tt=0;tt<b;tt++)if(f=r.datafields[tt],u="",undefined!=f&&f!=null){if(f.map){if(n.isFunction(f.map))u=f.map(h);else if(e=f.map.split(y.mapChar),e.length>0){for(g=h,o=0;o<e.length;o++)g!=undefined&&(g=g[e[o]]);u=g}else u=h[f.map];u!=undefined&&u!=null?u=u.toString():u==undefined&&u!=null&&(u="")}u!=""||f.map||(u=h[f.name],u==undefined&&u!=null&&(u=""),f.value!=undefined&&u!=undefined&&(it=u[f.value],it!=undefined&&(u=it))),u=this.getvaluebytype(u,f),f.displayname!=undefined?nt[f.displayname]=u:nt[f.name]=u,f.type==="array"&&(rt=function(t){var o,f,s,u,i,h,e,c,l;if(t)for(o=0;o<t.length;o++)for(f=t[o],s=0;s<b;s++)if(u=r.datafields[s],i="",undefined!=u&&u!=null){if(u.map){if(n.isFunction(u.map))i=u.map(f);else if(h=u.map.split(y.mapChar),h.length>0){for(e=f,c=0;c<h.length;c++)e!=undefined&&(e=e[h[c]]);i=e}else i=f[u.map];i!=undefined&&i!=null?i=i.toString():i==undefined&&i!=null&&(i="")}i!=""||u.map||(i=f[u.name],i==undefined&&i!=null&&(i=""),u.value!=undefined&&i!=undefined&&(l=i[u.value],l!=undefined&&(i=l))),i=this.getvaluebytype(i,u),u.displayname!=undefined?f[u.displayname]=i:f[u.name]=i,u.type==="array"&&rt.call(this,i)}},rt.call(this,u))}(r.recordendindex<=0||c<r.recordendindex)&&(p[w+d]=n.extend({},nt),p[w+d].uid=v,this.originaldata[w+d]=n.extend({},p[l]),d++)}}this.records=p,this.cachedrecords=this.records},loadxml:function(t,i,r){var t,s,c,o,l,y,d,a,g,v,h,e,p,w,b,f,u,k,rt;if(typeof t=="string"&&(t=i=n(n.parseXML(t)),t=null),r.root==undefined&&(r.root=""),r.record==undefined&&(r.record=""),t=n.jqx.browser.msie&&i?i.xml!=undefined?n(r.root+" "+r.record,n.parseXML(i.xml)):t||n(r.root+" "+r.record,i):t||n(r.root+" "+r.record,i),t||(t=[]),s=t.length,t.length!=0){if(this.totalrecords=this.virtualmode?r.totalrecords||s:s,this.records=[],this.originaldata=[],c=this.records,o=this.pageable?this.pagesize*this.pagenum:r.recordstartindex,this.recordids=[],r.loadallrecords&&(o=0,s=this.totalrecords),l=0,this.virtualmode&&(o=this.pageable?this.pagesize*this.pagenum:r.recordstartindex,l=o,o=0,s=this.totalrecords),y=r.datafields?r.datafields.length:0,y==0){d=t[0],a=[];for(obj in d)g=obj,a[a.length]={name:g};r.datafields=a,y=a.length}for(v=o,h=o;h<s;h++){if(e=t[h],e==undefined)break;if(p=this.getid(r.id,e,h),!this.recordids[p]){for(this.recordids[p]=e,w={},b=0;b<y;b++)if(f=r.datafields[b],u="",undefined!=f&&f!=null){if(f.map)if(n.isFunction(f.map))u=f.map(e);else{if(k=f.map.indexOf("["),k<0)u=n(f.map,e).text();else{var nt=f.map.substring(0,k-1),tt=f.map.indexOf("]"),it=f.map.substring(k+1,tt);u=n(nt,e).attr(it),u==undefined&&(u="")}u==""&&(u=n(e).attr(f.map),u==undefined&&(u=""))}u==""&&(u=n(f.name,e).text(),u==""&&(u=n(e).attr(f.name),u==undefined&&(u="")),u==""&&e.nodeName&&e.nodeName==f.name&&e.firstChild&&(u=n(e.firstChild).text())),rt=u,u=this.getvaluebytype(u,f),f.displayname!=undefined?w[f.displayname]=u:w[f.name]=u}(r.recordendindex<=0||o<r.recordendindex)&&(c[l+v]=n.extend({},w),c[l+v].uid=p,this.originaldata[l+v]=n.extend({},c[h]),v++)}}this.records=c,this.cachedrecords=this.records}},loadtext:function(t,i){var s,e,h,b,l,r,a,v,p,w,f,u,c,k;if(t!=null){var d=i.rowDelimiter||this.rowDelimiter||"\n",y=t.split(d),o=y.length;for(this.totalrecords=this.virtualmode?i.totalrecords||o:o,this.records=[],this.originaldata=[],s=this.records,e=this.pageable?this.pagesize*this.pagenum:i.recordstartindex,this.recordids=[],i.loadallrecords&&(e=0,o=this.totalrecords),h=0,this.virtualmode&&(e=this.pageable?this.pagesize*this.pagenum:i.recordstartindex,h=e,e=0,o=this.totalrecords),b=i.datafields.length,l=i.columnDelimiter||this.columnDelimiter,l||(l=i.datatype==="tab"?"\t":","),r=e;r<o;r++)if(a=y[r],v=this.getid(i.id,a,r),!this.recordids[v]){for(this.recordids[v]=a,p={},w=y[r].split(l),f=0;f<b;f++)f>=w.length||(u=i.datafields[f],c=w[f],u.map&&n.isFunction(u.map)&&(c=u.map(a)),u.type&&(c=this.getvaluebytype(c,u)),k=u.map||u.name||f.toString(),p[k]=c);s[h+r]=n.extend({},p),s[h+r].uid=v,this.originaldata[h+r]=n.extend({},s[r])}this.records=s,this.cachedrecords=this.records}},getvaluebytype:function(t,i){var u=t,r,f,t;return t==null?t:(i.type=="date"?t=="NaN"?t="":(r=new Date(t),typeof t=="string"&&i.format&&(f=n.jqx.dataFormat.parsedate(t,i.format),f!=null&&(r=f)),t=r.toString()=="NaN"||r.toString()=="Invalid Date"?n.jqx.dataFormat?n.jqx.dataFormat.tryparsedate(t):r:r,t==null&&(t=u)):i.type=="float"||i.type=="number"||i.type=="decimal"?t=="NaN"?t="":(t=parseFloat(t),isNaN(t)&&(t=u)):i.type=="int"||i.type=="integer"?(t=parseInt(t),isNaN(t)&&(t=u)):(i.type=="bool"||i.type=="boolean")&&(t!=null&&t.toLowerCase!=undefined&&(t.toLowerCase()=="false"?t=!1:t.toLowerCase()=="true"&&(t=!0)),t=t==1?!0:t==0&&t!==""?!1:""),t)}},n.jqx.dataFormat={},n.extend(n.jqx.dataFormat,{regexTrim:/^\s+|\s+$/g,regexInfinity:/^[+-]?infinity$/i,regexHex:/^0x[a-f0-9]+$/i,regexParseFloat:/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,toString:Object.prototype.toString,isBoolean:function(n){return typeof n=="boolean"},isObject:function(t){return t&&(typeof t=="object"||n.isFunction(t))||!1},isDate:function(n){return n instanceof Date},arrayIndexOf:function(n,t){if(n.indexOf)return n.indexOf(t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"&&isFinite(n)},isNull:function(n){return n===null},isUndefined:function(n){return typeof n=="undefined"},isValue:function(n){return this.isObject(n)||this.isString(n)||this.isNumber(n)||this.isBoolean(n)},isEmpty:function(t){return!this.isString(t)&&this.isValue(t)?!1:this.isValue(t)?(t=n.trim(t).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),t===""):!0},startsWith:function(n,t){return n.indexOf(t)===0},endsWith:function(n,t){return n.substr(n.length-t.length)===t},trim:function(n){return(n+"").replace(this.regexTrim,"")},isArray:function(n){return this.toString.call(n)==="[object Array]"},defaultcalendar:function(){return{"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","}},expandFormat:function(n,t){t=t||"F";var i,u=n.patterns,r=t.length;if(r===1){if(i=u[t],!i)throw"Invalid date format string '"+t+"'.";t=i}else r===2&&t.charAt(0)==="%"&&(t=t.charAt(1));return t},getEra:function(n,t){var r,u,i,f;if(!t||typeof n=="string")return 0;for(u=n.getTime(),i=0,f=t.length;i<f;i++)if(r=t[i].start,r===null||u>=r)return i;return 0},toUpper:function(n){return n.split(" ").join(" ").toUpperCase()},toUpperArray:function(n){for(var i=[],t=0,r=n.length;t<r;t++)i[t]=this.toUpper(n[t]);return i},getEraYear:function(n,t,i,r){var u=n.getFullYear();return!r&&t.eras&&(u-=t.eras[i].offset),u},toUpper:function(n){return n?n.toUpperCase():""},getDayIndex:function(n,t,i){var r,f=n.days,u=n._upperDays;return u||(n._upperDays=u=[this.toUpperArray(f.names),this.toUpperArray(f.namesAbbr),this.toUpperArray(f.namesShort)]),t=t.toUpperCase(),i?(r=this.arrayIndexOf(u[1],t),r===-1&&(r=this.arrayIndexOf(u[2],t))):r=this.arrayIndexOf(u[0],t),r},getMonthIndex:function(n,t,i){var e=n.months,o=n.monthsGenitive||n.months,r=n._upperMonths,f=n._upperMonthsGen,u;return r||(n._upperMonths=r=[this.toUpperArray(e.names),this.toUpperArray(e.namesAbbr)],n._upperMonthsGen=f=[this.toUpperArray(o.names),this.toUpperArray(o.namesAbbr)]),t=this.toUpper(t),u=this.arrayIndexOf(i?r[1]:r[0],t),u<0&&(u=this.arrayIndexOf(i?f[1]:f[0],t)),u},appendPreOrPostMatch:function(n,t){for(var f=0,i=!1,u,r=0,e=n.length;r<e;r++){u=n.charAt(r);switch(u){case"'":i?t.push("'"):f++,i=!1;break;case"\\":i&&t.push("\\"),i=!i;break;default:t.push(u),i=!1}}return f},getTokenRegExp:function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},formatlink:function(n,t){var i="";return(t&&t.target&&(i="target="+t.target),i!="")?"<a "+i+' href="'+n+'">'+n+"<\/a>":'<a href="'+n+'">'+n+"<\/a>"},formatemail:function(n){return'<a href="mailto:'+n+'">'+n+"<\/a>"},formatnumber:function(n,t,i){var s,r,l,c,a,y,e,v,o;if((i==undefined||i==null||i=="")&&(i=this.defaultcalendar()),t===""||t===null)return n;this.isNumber(n)||(n*=1),t.length>1&&(s=parseInt(t.slice(1),10)),r={},l=t.charAt(0).toUpperCase(),r.thousandsSeparator=i.thousandsseparator,r.decimalSeparator=i.decimalseparator;switch(l){case"D":case"d":case"F":case"f":r.decimalPlaces=s;break;case"N":case"n":r.decimalPlaces=0;break;case"C":case"c":r.decimalPlaces=s,i.currencysymbolposition=="before"?r.prefix=i.currencysymbol:r.suffix=i.currencysymbol;break;case"P":case"p":r.suffix=i.percentsymbol,r.decimalPlaces=s;break;default:throw"Bad number format specifier: "+l;}if(this.isNumber(n)){var p=n<0,u=n+"",h=r.decimalSeparator?r.decimalSeparator:".",f;if(this.isNumber(r.decimalPlaces)&&(c=r.decimalPlaces,a=Math.pow(10,c),u=(n*a).toFixed(0)/a+"",f=u.lastIndexOf("."),c>0))for(f<0?(u+=h,f=u.length-1):h!=="."&&(u=u.replace(".",h));u.length-1-f<c;)u+="0";if(r.thousandsSeparator){for(y=r.thousandsSeparator,f=u.lastIndexOf(h),f=f>-1?f:u.length,e=u.substring(f),v=-1,o=f;o>0;o--)v++,v%3==0&&o!==f&&(!p||o>1)&&(e=y+e),e=u.charAt(o-1)+e;u=e}return u=r.prefix?r.prefix+u:u,r.suffix?u+r.suffix:u}return n},tryparsedate:function(n,t){var h,l,u,i,r,f,e,a,o,s,c;if((t==undefined||t==null)&&(t=this.defaultcalendar()),h=this,n=="")return null;if(n==null||n.substring||(n=n.toString()),n!=null&&n.substring(0,6)=="/Date(")return(l=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/,i=new Date(+n.replace(/\/Date\((\d+)\)\//,"$1")),i=="Invalid Date"&&(u=n.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/),i=null,u&&(i=new Date(1*u[1]+36e5*u[2]+6e4*u[3]))),(i==null||i=="Invalid Date"||isNaN(i))&&(r=l.exec(n),r&&(f=new Date(parseInt(r[1])),r[2]&&(e=parseInt(r[3]),r[2]==="-"&&(e=-e),a=f.getUTCMinutes(),f.setUTCMinutes(a-e)),!isNaN(f.valueOf()))))?f:i;patterns=t.patterns;for(prop in patterns)if(i=h.parsedate(n,patterns[prop],t),i)return prop=="ISO"&&(o=h.parsedate(n,patterns.ISO2,t),o)?o:i;if(n!=null){var o=null,v=[":","/","-"],y=!0;for(s=0;s<v.length;s++)n.indexOf(v[s])!=-1&&(y=!1);if(y&&(c=new Number(n),!isNaN(c)))return new Date(c)}return null},getparseregexp:function(n,t){var f=n._parseRegExp,o,v,e,y,i,p,w;if(f){if(o=f[t],o)return o}else n._parseRegExp=f={};for(var s=this.expandFormat(n,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),r=["^"],c=[],h=0,l=0,a=this.getTokenRegExp(),u;(u=a.exec(s))!==null;){if(v=s.slice(h,u.index),h=a.lastIndex,l+=this.appendPreOrPostMatch(v,r),l%2){r.push(u[0]);continue}e=u[0],y=e.length;switch(e){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":i="(\\D+)";break;case"tt":case"t":i="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":i="(\\d{"+y+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":i="(\\d\\d?)";break;case"zzz":i="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":i="([+-]?\\d\\d?)";break;case"/":i="(\\"+n["/"]+")";break;default:throw"Invalid date format pattern '"+e+"'.";}i&&r.push(i),c.push(u[0])}return this.appendPreOrPostMatch(s.slice(h),r),r.push("$"),p=r.join("").replace(/\s+/g,"\\s+"),w={regExp:p,groups:c},f[t]=w},outOfRange:function(n,t,i){return n<t||n>i},expandYear:function(n,t){var u=new Date,f=getEra(u),i,r;return t<100&&(i=n.twoDigitYearMax,i=typeof i=="string"?(new Date).getFullYear()%100+parseInt(i,10):i,r=this.getEraYear(u,n,f),t+=r-r%100,t>i&&(t-=100)),t},parsedate:function(n,t,i){var a,ht,u,k,d,v,y,lt,f,at,ut,ft;(i==undefined||i==null)&&(i=this.defaultcalendar()),n=this.trim(n);var r=i,et=this.getparseregexp(r,t),ot=new RegExp(et.regExp).exec(n);if(ot===null)return null;var st=et.groups,g=null,h=null,s=null,c=null,p=null,o=0,l,nt=0,tt=0,it=0,w=null,rt=!1;for(a=0,ht=st.length;a<ht;a++)if(u=ot[a+1],u){var ct=st[a],b=ct.length,e=parseInt(u,10);switch(ct){case"dd":case"d":if(c=e,this.outOfRange(c,1,31))return null;break;case"MMM":case"MMMM":if(s=this.getMonthIndex(r,u,b===3),this.outOfRange(s,0,11))return null;break;case"M":case"MM":if(s=e-1,this.outOfRange(s,0,11))return null;break;case"y":case"yy":case"yyyy":if(h=b<4?this.expandYear(r,e):e,this.outOfRange(h,0,9999))return null;break;case"h":case"hh":if(o=e,o===12&&(o=0),this.outOfRange(o,0,11))return null;break;case"H":case"HH":if(o=e,this.outOfRange(o,0,23))return null;break;case"m":case"mm":if(nt=e,this.outOfRange(nt,0,59))return null;break;case"s":case"ss":if(tt=e,this.outOfRange(tt,0,59))return null;break;case"tt":case"t":if(rt=r.PM&&(u===r.PM[0]||u===r.PM[1]||u===r.PM[2]),!rt&&(!r.AM||u!==r.AM[0]&&u!==r.AM[1]&&u!==r.AM[2]))return null;break;case"f":case"ff":case"fff":if(it=e*Math.pow(10,3-b),this.outOfRange(it,0,999))return null;break;case"ddd":case"dddd":if(p=this.getDayIndex(r,u,b===3),this.outOfRange(p,0,6))return null;break;case"zzz":if((k=u.split(/:/),k.length!==2)||(l=parseInt(k[0],10),this.outOfRange(l,-12,13))||(d=parseInt(k[1],10),this.outOfRange(d,0,59)))return null;w=l*60+(startsWith(u,"-")?-d:d);break;case"z":case"zz":if(l=e,this.outOfRange(l,-12,13))return null;w=l*60;break;case"g":case"gg":if(v=u,!v||!r.eras)return null;for(v=trim(v.toLowerCase()),y=0,lt=r.eras.length;y<lt;y++)if(v===r.eras[y].name.toLowerCase()){g=y;break}if(g===null)return null}}if(f=new Date,ut=r.convert,at=f.getFullYear(),h===null?h=at:r.eras&&(h+=r.eras[g||0].offset),s===null&&(s=0),c===null&&(c=1),ut){if(f=ut.toGregorian(h,s,c),f===null)return null}else if((f.setFullYear(h,s,c),f.getDate()!==c)||p!==null&&f.getDay()!==p)return null;return rt&&o<12&&(o+=12),f.setHours(o,nt,tt,it),w!==null&&(ft=f.getMinutes()-(w+f.getTimezoneOffset()),f.setHours(f.getHours()+parseInt(ft/60,10),ft%60)),f},cleardatescache:function(){this.datescache=[]},formatdate:function(n,t,i){function f(n,t){var i,r=n+"";return t>1&&r.length<t?(i=nt[t-2]+r,i.substr(i.length-t,t)):r}function v(n,t){if(d)return d[t];if(n.getMonth!=undefined)switch(t){case 0:return n.getFullYear();case 1:return n.getMonth();case 2:return n.getDate()}}var c,r,a,p,l,u,g,o,y;if((i==undefined||i==null)&&(i=this.defaultcalendar()),typeof n=="string")return n;if(c=n.toString()+"_"+t,this.datescache&&this.datescache[c])return this.datescache[c];if(!t||!t.length||t==="i")return this.formatDate(n,i.patterns.F,culture);a=i.eras,p=t==="s",t=this.expandFormat(i,t),r=[];for(var e,nt=["0","00","000"],s,w,tt=/([^d]|^)(d|dd)([^d]|$)/g,b=0,k=this.getTokenRegExp(),d;;){var it=k.lastIndex,h=k.exec(t),rt=t.slice(it,h?h.index:t.length);if(b+=this.appendPreOrPostMatch(rt,r),!h)break;if(b%2){r.push(h[0]);continue}l=h[0],u=l.length;switch(l){case"ddd":case"dddd":g=u===3?i.days.namesAbbr:i.days.names,r.push(g[n.getDay()]);break;case"d":case"dd":s=!0,r.push(f(v(n,2),u));break;case"MMM":case"MMMM":o=v(n,1),r.push(i.months[u===3?"namesAbbr":"names"][o]);break;case"M":case"MM":r.push(f(v(n,1)+1,u));break;case"y":case"yy":case"yyyy":o=this.getEraYear(n,i,this.getEra(n,a),p),u<4&&(o=o%100),r.push(f(o,u));break;case"h":case"hh":e=n.getHours()%12,e===0&&(e=12),r.push(f(e,u));break;case"H":case"HH":r.push(f(n.getHours(),u));break;case"m":case"mm":r.push(f(n.getMinutes(),u));break;case"s":case"ss":r.push(f(n.getSeconds(),u));break;case"t":case"tt":o=n.getHours()<12?i.AM?i.AM[0]:" ":i.PM?i.PM[0]:" ",r.push(u===1?o.charAt(0):o);break;case"f":case"ff":case"fff":r.push(f(n.getMilliseconds(),3).substr(0,u));break;case"z":case"zz":e=n.getTimezoneOffset()/60,r.push((e<=0?"+":"-")+f(Math.floor(Math.abs(e)),u));break;case"zzz":e=n.getTimezoneOffset()/60,r.push((e<=0?"+":"-")+f(Math.floor(Math.abs(e)),2)+":"+f(Math.abs(n.getTimezoneOffset()%60),2));break;case"g":case"gg":i.eras&&r.push(i.eras[getEra(n,a)].name);break;case"/":r.push(i["/"]);break;default:throw"Invalid date format pattern '"+l+"'.";}}return y=r.join(""),this.datescache||(this.datescache=[]),this.datescache[c]=y,y}}),n.jqx.data={};var t,i,k=/#.*$/,d=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,g=/^(?:GET|HEAD)$/,nt=/^\/\//,s=/\?/,tt=/([?&])_=[^&]*/,h=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,c=/\s+/,ot=jQuery.fn.load,o={},l={},a=["*/"]+["*"];try{i=location.href}catch(st){i=document.createElement("a"),i.href="",i=i.href}t=h.exec(i.toLowerCase())||[],n.extend(n.jqx.data,{ajaxSetup:function(t,i){return i?y(t,n.jqx.data.ajaxSettings):(i=t,t=n.jqx.data.ajaxSettings),y(t,i),t},ajaxSettings:{url:i,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(t[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":a},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:v(o),ajaxTransport:v(l),ajax:function(i,r){function st(n,t,i,r){var u,c,h,l,s,o=t;v!==2&&(v=2,ct&&clearTimeout(ct),w=undefined,ht=r||"",e.readyState=n>0?4:0,i&&(l=it(f,e,i)),n>=200&&n<300||n===304?(f.ifModified&&(s=e.getResponseHeader("Last-Modified"),s&&(jQuery.lastModified[y]=s),s=e.getResponseHeader("Etag"),s&&(jQuery.etag[y]=s)),n===304?(o="notmodified",u=!0):(u=rt(f,l),o=u.state,c=u.data,h=u.error,u=!h)):(h=o,(!o||n)&&(o="error",n<0&&(n=0))),e.status=n,e.statusText=(t||o)+"",u?at.resolveWith(p,[c,o,e]):at.rejectWith(p,[e,o,h]),e.statusCode(ot),ot=undefined,ft&&lt.trigger("ajax"+(u?"Success":"Error"),[e,f,u?c:h]),pt.fireWith(p,[e,o]),ft&&(lt.trigger("ajaxComplete",[e,f]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}var vt,yt;typeof i=="object"&&(r=i,i=undefined),r=r||{};var y,ht,et,w,ct,b,ft,ut,f=n.jqx.data.ajaxSetup({},r),p=f.context||f,lt=p!==f&&(p.nodeType||p instanceof jQuery)?jQuery(p):jQuery.event,at=jQuery.Deferred(),pt=jQuery.Callbacks("once memory"),ot=f.statusCode||{},wt={},bt={},v=0,kt="canceled",e={readyState:0,setRequestHeader:function(n,t){if(!v){var i=n.toLowerCase();n=bt[i]=bt[i]||n,wt[n]=t}return this},getAllResponseHeaders:function(){return v===2?ht:null},getResponseHeader:function(n){var t;if(v===2){if(!et)for(et={};t=d.exec(ht);)et[t[1].toLowerCase()]=t[2];t=et[n.toLowerCase()]}return t===undefined?null:t},overrideMimeType:function(n){return v||(f.mimeType=n),this},abort:function(n){return n=n||kt,w&&w.abort(n),st(0,n),this}};if(at.promise(e),e.success=e.done,e.error=e.fail,e.complete=pt.add,e.statusCode=function(n){if(n){var t;if(v<2)for(t in n)ot[t]=[ot[t],n[t]];else t=n[e.status],e.always(t)}return this},f.url=((i||f.url)+"").replace(k,"").replace(nt,t[1]+"//"),f.dataTypes=jQuery.trim(f.dataType||"*").toLowerCase().split(c),f.crossDomain==null&&(b=h.exec(f.url.toLowerCase()),f.crossDomain=!!(b&&(b[1]!==t[1]||b[2]!==t[2]||(b[3]||(b[1]==="http:"?80:443))!=(t[3]||(t[1]==="http:"?80:443))))),f.data&&f.processData&&typeof f.data!="string"&&(f.data=jQuery.param(f.data,f.traditional)),u(o,f,r,e),v===2)return e;ft=f.global,f.type=f.type.toUpperCase(),f.hasContent=!g.test(f.type),ft&&jQuery.active++==0&&jQuery.event.trigger("ajaxStart"),f.hasContent||(f.data&&(f.url+=(s.test(f.url)?"&":"?")+f.data,delete f.data),y=f.url,f.cache===!1&&(vt=jQuery.now(),yt=f.url.replace(tt,"$1_="+vt),f.url=yt+(yt===f.url?(s.test(f.url)?"&":"?")+"_="+vt:""))),(f.data&&f.hasContent&&f.contentType!==!1||r.contentType)&&e.setRequestHeader("Content-Type",f.contentType),f.ifModified&&(y=y||f.url,jQuery.lastModified[y]&&e.setRequestHeader("If-Modified-Since",jQuery.lastModified[y]),jQuery.etag[y]&&e.setRequestHeader("If-None-Match",jQuery.etag[y])),e.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+(f.dataTypes[0]!=="*"?", "+a+"; q=0.01":""):f.accepts["*"]);for(ut in f.headers)e.setRequestHeader(ut,f.headers[ut]);if(f.beforeSend&&(f.beforeSend.call(p,e,f)===!1||v===2))return e.abort();kt="abort";for(ut in{success:1,error:1,complete:1})e[ut](f[ut]);if(w=u(l,f,r,e),w){e.readyState=1,ft&&lt.trigger("ajaxSend",[e,f]),f.async&&f.timeout>0&&(ct=setTimeout(function(){e.abort("timeout")},f.timeout));try{v=1,w.send(wt,st)}catch(dt){if(v<2)st(-1,dt);else throw dt;}}else st(-1,"No Transport");return e},active:0,lastModified:{},etag:{}});var p=[],ut=/\?/,f=/(=)\?(?=&|$)|\?\?/,ft=jQuery.now();n.jqx.data.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=p.pop()||jQuery.expando+"_"+ft++;return this[n]=!0,n}}),n.jqx.data.ajaxPrefilter("json jsonp",function(n,t,i){var r,e,u,o=n.data,s=n.url,h=n.jsonp!==!1,c=h&&f.test(s),l=h&&!c&&typeof o=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&f.test(o);if(n.dataTypes[0]==="jsonp"||c||l)return r=n.jsonpCallback=jQuery.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,e=window[r],c?n.url=s.replace(f,"$1"+r):l?n.data=o.replace(f,"$1"+r):h&&(n.url+=(ut.test(s)?"&":"?")+n.jsonp+"="+r),n.converters["script json"]=function(){return u||jQuery.error(r+" was not called"),u[0]},n.dataTypes[0]="json",window[r]=function(){u=arguments},i.always(function(){window[r]=e,n[r]&&(n.jsonpCallback=t.jsonpCallback,p.push(r)),u&&jQuery.isFunction(e)&&e(u[0]),u=e=undefined}),"script"}),n.jqx.data.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(n){return jQuery.globalEval(n),n}}}),n.jqx.data.ajaxPrefilter("script",function(n){n.cache===undefined&&(n.cache=!1),n.crossDomain&&(n.type="GET",n.global=!1)}),n.jqx.data.ajaxTransport("script",function(n){if(n.crossDomain){var t,i=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(r,u){t=document.createElement("script"),t.async="async",n.scriptCharset&&(t.charset=n.scriptCharset),t.src=n.url,t.onload=t.onreadystatechange=function(n,r){(r||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,i&&t.parentNode&&i.removeChild(t),t=undefined,r||u(200,"success"))},i.insertBefore(t,i.firstChild)},abort:function(){if(t)t.onload(0,1)}}}}),e=window.ActiveXObject?function(){for(var n in r)r[n](0,1)}:!1,w=0,n.jqx.data.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&b()||et()}:b,function(n){jQuery.extend(jQuery.support,{ajax:!!n,cors:!!n&&"withCredentials"in n})}(n.jqx.data.ajaxSettings.xhr()),jQuery.support.ajax&&n.jqx.data.ajaxTransport(function(n){if(!n.crossDomain||jQuery.support.cors){var t;return{send:function(i,u){var s,o,f=n.xhr();if(n.username?f.open(n.type,n.url,n.async,n.username,n.password):f.open(n.type,n.url,n.async),n.xhrFields)for(o in n.xhrFields)f[o]=n.xhrFields[o];n.mimeType&&f.overrideMimeType&&f.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(o in i)f.setRequestHeader(o,i[o])}catch(h){}f.send(n.hasContent&&n.data||null),t=function(i,o){var h,a,v,c,l;try{if(t&&(o||f.readyState===4))if(t=undefined,s&&(f.onreadystatechange=jQuery.noop,e&&delete r[s]),o)f.readyState!==4&&f.abort();else{h=f.status,v=f.getAllResponseHeaders(),c={},l=f.responseXML,l&&l.documentElement&&(c.xml=l);try{c.text=f.responseText}catch(p){}try{a=f.statusText}catch(p){a=""}h||!n.isLocal||n.crossDomain?h===1223&&(h=204):h=c.text?200:404}}catch(y){o||u(-1,y)}c&&u(h,a,c,v)},n.async?f.readyState===4?setTimeout(t,0):(s=++w,e&&(r||(r={},jQuery(window).unload(e)),r[s]=t),f.onreadystatechange=t):t()},abort:function(){t&&t(0,1)}}}}),n.jqx.filter=function(){var r;this.operator="and";var s=1,u=["EMPTY","NOT_EMPTY","CONTAINS","CONTAINS_CASE_SENSITIVE","DOES_NOT_CONTAIN","DOES_NOT_CONTAIN_CASE_SENSITIVE","STARTS_WITH","STARTS_WITH_CASE_SENSITIVE","ENDS_WITH","ENDS_WITH_CASE_SENSITIVE","EQUAL","EQUAL_CASE_SENSITIVE","NULL","NOT_NULL"],f=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],e=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],o=["EQUAL","NOT_EQUAL"],t=[],i=[];this.evaluate=function(n){for(var u=!0,f,r=0;r<t.length;r++)f=t[r].evaluate(n),u=r==0?f:i[r]==s||i[r]=="or"?u||f:u&&f;return u},this.getfilterscount=function(){return t.length},this.setoperatorsbyfiltertype=function(n,t){switch(n){case"numericfilter":f=t;break;case"stringfilter":u=t;break;case"datefilter":e=t;break;case"booleanfilter":o=t}},this.getoperatorsbyfiltertype=function(n){var t=[];switch(n){case"numericfilter":t=f.slice(0);break;case"stringfilter":t=u.slice(0);break;case"datefilter":t=e.slice(0);break;case"booleanfilter":t=o.slice(0)}return t},r=function(){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return n()+"-"+n()+"-"+n()},this.createfilter=function(n,t,i,r,u,f){if(n==null||n==undefined)return null;switch(n){case"numericfilter":return new l(t,i.toUpperCase());case"stringfilter":return new h(t,i.toUpperCase());case"datefilter":return new a(t,i.toUpperCase(),u,f);case"booleanfilter":return new c(t,i.toUpperCase());case"custom":return new v(t,i.toUpperCase(),r)}throw new Error("jqxGrid: There is no such filter type. The available filter types are: 'numericfilter', 'stringfilter', 'datefilter' and 'booleanfilter'");},this.getfilters=function(){for(var r=[],u,n=0;n<t.length;n++)u={value:t[n].filtervalue,condition:t[n].comparisonoperator,operator:i[n],type:t[n].type},r[n]=u;return r},this.addfilter=function(n,u){t[t.length]=u,u.key=r(),i[i.length]=n},this.removefilter=function(n){for(var r=0;r<t.length;r++)if(t[r].key==n.key){t.splice(r,1),i.splice(r,1);break}},this.getoperatorat=function(n){return n==undefined||n==null?null:n<0||n>t.length?null:i[n]},this.setoperatorat=function(n,r){if(n==undefined||n==null||n<0||n>t.length)return null;i[r]=r},this.getfilterat=function(n){return n==undefined||n==null?null:n<0||n>t.length?null:t[n]},this.setfilterat=function(n,i){if(n==undefined||n==null||n<0||n>t.length)return null;i.key=r(),t[n]=i},this.clear=function(){t=[],i=[]};var h=function(t,i){this.filtervalue=t,this.comparisonoperator=i,this.type="stringfilter",this.evaluate=function(t){var r=this.filtervalue,u=this.comparisonoperator,i;if(t==null||t==undefined||t=="")return u=="NULL"?!0:!1;i="";try{i=t.toString()}catch(f){return!0}switch(u){case"EQUAL":return n.jqx.string.equalsIgnoreCase(i,r);case"EQUAL_CASE_SENSITIVE":return n.jqx.string.equals(i,r);case"NOT_EQUAL":return!n.jqx.string.equalsIgnoreCase(i,r);case"NOT_EQUAL_CASE_SENSITIVE":return!n.jqx.string.equals(i,r);case"CONTAINS":return n.jqx.string.containsIgnoreCase(i,r);case"CONTAINS_CASE_SENSITIVE":return n.jqx.string.contains(i,r);case"DOES_NOT_CONTAIN":return!n.jqx.string.containsIgnoreCase(i,r);case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!n.jqx.string.contains(i,r);case"EMPTY":return i=="";case"NOT_EMPTY":return i!="";case"NOT_NULL":return i!=null;case"STARTS_WITH":return n.jqx.string.startsWithIgnoreCase(i,r);case"ENDS_WITH":return n.jqx.string.endsWithIgnoreCase(i,r);case"ENDS_WITH_CASE_SENSITIVE":return n.jqx.string.endsWith(i,r);case"STARTS_WITH_CASE_SENSITIVE":return n.jqx.string.startsWith(i,r);default:return!1}}},c=function(n,t){this.filtervalue=n,this.comparisonoperator=t,this.type="booleanfilter",this.evaluate=function(n){var i=this.filtervalue,r=this.comparisonoperator,t;if(n==null||n==undefined)return r=="NULL"?!0:!1;t=n;switch(r){case"EQUAL":return t==i||t.toString()==i.toString();case"NOT_EQUAL":return t!=i&&t.toString()!=i.toString();default:return!1}}},l=function(t,i){this.filtervalue=t,this.comparisonoperator=i,this.type="numericfilter",this.evaluate=function(t){var r=this.filtervalue,u=this.comparisonoperator,i;if(t===null||t===undefined||t==="")return u=="NOT_NULL"?!1:u=="NULL"?!0:!1;if(u=="NULL")return!1;if(u=="NOT_NULL")return!0;i=t;try{i=parseFloat(i)}catch(f){if(t.toString()!="")return!1}switch(u){case"EQUAL":return i==r;case"NOT_EQUAL":return i!=r;case"GREATER_THAN":return i>r;case"GREATER_THAN_OR_EQUAL":return i>=r;case"LESS_THAN":return i<r;case"LESS_THAN_OR_EQUAL":return i<=r;case"STARTS_WITH":return n.jqx.string.startsWithIgnoreCase(i.toString(),r.toString());case"ENDS_WITH":return n.jqx.string.endsWithIgnoreCase(i.toString(),r.toString());case"ENDS_WITH_CASE_SENSITIVE":return n.jqx.string.endsWith(i.toString(),r.toString());case"STARTS_WITH_CASE_SENSITIVE":return n.jqx.string.startsWith(i.toString(),r.toString());case"CONTAINS":return n.jqx.string.containsIgnoreCase(i.toString(),r.toString());case"CONTAINS_CASE_SENSITIVE":return n.jqx.string.contains(i.toString(),r.toString());case"DOES_NOT_CONTAIN":return!n.jqx.string.containsIgnoreCase(i.toString(),r.toString());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!n.jqx.string.contains(i.toString(),r.toString());default:return!0}}},a=function(t,i,r,u){var e,o,f;this.filtervalue=t,this.type="datefilter",r!=undefined&&u!=undefined?(e=n.jqx.dataFormat.parsedate(t,r,u),e!=null?this.filterdate=e:(o=n.jqx.dataFormat.tryparsedate(t,u),o!=null&&(this.filterdate=o))):(f=new Date(t),this.filterdate=f.toString()=="NaN"||f.toString()=="Invalid Date"?n.jqx.dataFormat.tryparsedate(t):f),this.filterdate||(f=new Date(t),this.filterdate=f.toString()=="NaN"||f.toString()=="Invalid Date"?n.jqx.dataFormat.tryparsedate(t):f),this.comparisonoperator=i,this.evaluate=function(t){var r=this.filtervalue,e=this.comparisonoperator,i,s,f,o,u;if(t==null||t==undefined||t=="")return e=="NOT_NULL"?!1:e=="NULL"?!0:!1;if(e=="NULL")return!1;if(e=="NOT_NULL")return!0;i=new Date,i.setFullYear(1900,0,1),i.setHours(12,0,0,0);try{s=new Date(t),t=s.toString()=="NaN"||s.toString()=="Invalid Date"?n.jqx.dataFormat.tryparsedate(t):s,i=t}catch(h){if(t.toString()!="")return!1}if(this.filterdate!=null)r=this.filterdate;else if(r.indexOf&&(r.indexOf(":")!=-1||!isNaN(parseInt(r)))){for(f=new Date(i),f.setHours(12,0,0,0),o=r.split(":"),u=0;u<o.length;u++)u==0&&f.setHours(o[u]),u==1&&f.setMinutes(o[u]),u==2&&f.setSeconds(o[u]);r=f}i==null&&(i="");switch(e){case"EQUAL":return i.toString()==r.toString();case"NOT_EQUAL":return i.toString()!=r.toString();case"GREATER_THAN":return i>r;case"GREATER_THAN_OR_EQUAL":return i>=r;case"LESS_THAN":return i<r;case"LESS_THAN_OR_EQUAL":return i<=r;case"STARTS_WITH":return n.jqx.string.startsWithIgnoreCase(i.toString(),r.toString());case"ENDS_WITH":return n.jqx.string.endsWithIgnoreCase(i.toString(),r.toString());case"ENDS_WITH_CASE_SENSITIVE":return n.jqx.string.endsWith(i.toString(),r.toString());case"STARTS_WITH_CASE_SENSITIVE":return n.jqx.string.startsWith(i.toString(),r.toString());case"CONTAINS":return n.jqx.string.containsIgnoreCase(i.toString(),r.toString());case"CONTAINS_CASE_SENSITIVE":return n.jqx.string.contains(i.toString(),r.toString());case"DOES_NOT_CONTAIN":return!n.jqx.string.containsIgnoreCase(i.toString(),r.toString());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!n.jqx.string.contains(i.toString(),r.toString());default:return!0}}},v=function(n,t,i){this.filtervalue=n,this.comparisonoperator=t,this.evaluate=function(n){return i(this.filtervalue,n,this.comparisonoperator)}}}})(jQuery);
//# sourceMappingURL=jqxdata.min.js.map