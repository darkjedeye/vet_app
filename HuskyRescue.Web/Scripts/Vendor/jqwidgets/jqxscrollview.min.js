(function(n){var t=0;n.jqx.jqxWidget("jqxScrollView","",{}),n.extend(n.jqx._jqxScrollView.prototype,{defineInstance:function(){this.width=320,this.height=320,this.buttonsOffset=[0,0],this.moveThreshold=.5,this.currentPage=0,this.animationDuration=300,this.showButtons=!0,this.bounceEnabled=!0,this.slideShow=!1,this.slideDuration=3e3,this.disabled=!1,this._mouseDown=!1,this._movePermited=!1,this._startX=-1,this._startOffset=-1,this._lastOffset=-1,this._events=["pageChanged"],this._eventsMap={mousedown:n.jqx.mobile.getTouchEventName("touchstart"),mouseup:n.jqx.mobile.getTouchEventName("touchend"),mousemove:n.jqx.mobile.getTouchEventName("touchmove")}},createInstance:function(){t+=1,this._instanceId=t,this._isTouchDevice=n.jqx.mobile.isTouchDevice();var i=this;n.jqx.utilities.resize(this.host,function(){i.refresh()})},refresh:function(){if(this.host.width(this.width),this.host.height(this.height),this._render(),this._performLayout(),this.moveThreshold.toString().indexOf("%")>=0&&(this.moveThreshold=parseInt(this.moveThreshold,10)/100),this._refreshPages(),this._refreshButtons(),this._removeEventListeners(),this._addEventListeners(),this._changePage(this.currentPage,!1,0),this.slideShow){var n=this;this.slideShowTimer=setInterval(function(){n.currentPage>=n._pages.length-1?n._changePage(0,!0,n.animationDuration):n._changePage(n.currentPage+1,!0,n.animationDuration)},this.slideDuration)}else this.slideShowTimer!=undefined&&clearInterval(this.slideShowTimer)},destroy:function(){this.host.remove()},_getEvent:function(n){return this._isTouchDevice?this._eventsMap[n]:n},_eventNamespace:function(){return".scrollview"+this._instanceId},_removeEventListeners:function(){this.removeHandler(this._innerWrapper),this.removeHandler(this.host,this._getEvent("mousemove")+this._eventNamespace()),this.removeHandler(n(document),this._getEvent("mouseup")+this._eventNamespace())},_getCoordinate:function(n,t){return this._isTouchDevice&&n.originalEvent.touches?n.originalEvent.touches[0][t]:n[t]},_draggedRight:function(){if(this.currentPage>0){var t=this.currentPage-1,i=n(this._pages[t]),r=i.offset().left+i.outerWidth(),u=r-this.host.offset().left;if(u>=this.host.width()*this.moveThreshold)return this.changePage(t),!0}return!1},_draggedLeft:function(){if(this.currentPage+1<this._pages.length){var t=this.currentPage+1,i=n(this._pages[t]),r=this.host.width()-(i.offset().left-this.host.offset().left);if(r>=this.host.width()*this.moveThreshold)return this.changePage(t),!0}return!1},_dropTarget:function(){var n;n=this._movedLeft?this._draggedLeft():this._draggedRight(),n||this.changePage(this.currentPage,!1)},_scrollEnabled:function(n){return this._mouseDown?(this._movePermited||(this._isTouchDevice||Math.abs(this._getCoordinate(n,"pageX")-this._startX)>=5)&&(this._movePermited=!0),this._movePermited):!1},_setMoveDirection:function(n){this._movedLeft=this._lastOffset>n?!0:!1},_getBounceOffset:function(n){var t=-(this._innerWrapper.width()-this.host.width());return n>0?n=0:n<t&&(n=t),n},_addEventListeners:function(){var t=this,i;this.addHandler(this._innerWrapper,this._getEvent("mousedown")+this._eventNamespace(),function(n){t._mouseDown=!0,t._startX=t._getCoordinate(n,"pageX"),t._startOffset=t._lastOffset=parseInt(t._innerWrapper.css("margin-left"),10)}),this.addHandler(this.host,"dragstart",function(){return!1}),this.addHandler(this.host,this._getEvent("mousemove")+this._eventNamespace(),function(n){if(t._scrollEnabled(n)){var i=t._startOffset+t._getCoordinate(n,"pageX")-t._startX;return t.bounceEnabled||(i=t._getBounceOffset(i)),t._innerWrapper.css("margin-left",i),t._setMoveDirection(i),t._lastOffset=i,n.preventDefault(),!1}return!0}),this.addHandler(n(document),this._getEvent("mouseup")+this._eventNamespace(),function(){t._movePermited&&t._dropTarget(),t._movePermited=!1,t._mouseDown=!1});try{(document.referrer!=""||window.frameElement)&&(window.top!=null&&window.parent&&document.referrer&&(parentLocation=document.referrer),parentLocation.indexOf(document.location.host)!=-1&&(i=function(){t._movePermited&&t._dropTarget(),t._movePermited=!1,t._mouseDown=!1},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",i,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",i)))}catch(r){}},_render:function(){this.host.addClass(this.toThemeProperty("jqx-scrollview")),this.host.css({overflow:"hidden",position:"relative"})},_performLayout:function(){this.host.css({width:this.width,height:this.height})},_renderPages:function(){this._innerWrapper||(this._innerWrapper=n("<div/>"),this.host.wrapInner(this._innerWrapper),this._innerWrapper=this.host.children().first()),this._innerWrapper.addClass(this.toThemeProperty("jqx-scrollview-inner-wrapper")),this._innerWrapper.height(this.host.height())},_refreshPage:function(n){n.addClass(this.toThemeProperty("jqx-scrollview-page")),this._performPageLayout(n)},_refreshPages:function(){var i=this,t=0;this._renderPages(),this._pages=this._innerWrapper.children(),this._pages.each(function(){i._refreshPage(n(this)),t+=n(this).outerWidth(!0)}),this._innerWrapper.width(t)},_performPageLayout:function(n){n.css("float","left"),n.width(this.host.width()),n.height(this.host.height())},_refreshButtons:function(){this._renderButtons(),this._removeButtonsEventListeners(),this._addButtonsEventListeners(),this._performButtonsLayout()},_removeButtonsEventListeners:function(){var t=this;this._buttonsContainer.children().each(function(){t.removeHandler(n(this))})},_addButtonsEventListeners:function(){var t=this;this._buttonsContainer.children().each(function(i){t.addHandler(n(this),"click",function(){t.changePage(i)})})},_performButtonsLayout:function(){var n=(this.host.width()-this._buttonsContainer.width())/2,t=this._buttonsContainer.outerHeight()!=0?this._buttonsContainer.outerHeight():14;this._buttonsContainer.css({position:"absolute",left:n+parseInt(this.buttonsOffset[0],10),top:this.host.height()-2*t+parseInt(this.buttonsOffset[1],10)-1})},_renderButtons:function(){var i,t;for(this._buttonsContainer&&this._buttonsContainer.remove(),this._buttons=[],this._buttonsContainer=n("<span/>"),t=0;t<this._pages.length;t+=1)i=n('<span class="'+this.toThemeProperty("jqx-scrollview-button")+" "+this.toThemeProperty("jqx-fill-state-normal")+'"><\/span>'),this._buttonsContainer.append(i),this._buttons[t]=i;this._buttonsContainer.appendTo(this.host),this.showButtons||this._buttonsContainer.hide()},_raiseEvent:function(t,i){var r=new n.Event(this._events[t]);return r.args=i,this.host.trigger(r)},_swapButtons:function(n,t){this._buttons[n].removeClass(this.toThemeProperty("jqx-scrollview-button-selected")),this._buttons[n].removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this._buttons[t].addClass(this.toThemeProperty("jqx-scrollview-button-selected")),this._buttons[t].addClass(this.toThemeProperty("jqx-fill-state-pressed"))},_changePage:function(t,i,r){if(!this.disabled){var u=n(this._pages[t]),f=(this.host.width()-u.width())/2,e=u.offset().left-this._innerWrapper.offset().left-f,o=this.currentPage,s=this;typeof r=="undefined"&&(r=this.animationDuration),this._innerWrapper.stop(),this._swapButtons(this.currentPage,t),this.currentPage=t,this._innerWrapper.animate({marginLeft:-e},r,function(){i&&s._raiseEvent(0,{currentPage:t,oldPage:o})})}},propertyChangedHandler:function(n,t,i,r){if(t==="currentPage")n.currentPage=i,n.changePage(r);else if(/(buttonsOffset|width|height)/.test(t))n.refresh();else{if(t==="showButtons"){r?n._buttonsContainer.css("display","block"):n._buttonsContainer.css("display","none");return}t=="slideShow"&&n.refresh()}},changePage:function(n){if(n>=this._pages.length||n<0)throw new Error("Invalid index!");this._changePage(n,!0)},forward:function(){this.currentPage+1<this._pages.length&&this.changePage(this.currentPage+1)},back:function(){this.currentPage-1>=0&&this.changePage(this.currentPage-1)}})})(jQuery);
//# sourceMappingURL=jqxscrollview.min.js.map