(function(n){n.jqx.jqxWidget("jqxInput","",{}),n.extend(n.jqx._jqxInput.prototype,{defineInstance:function(){this.disabled=!1,this.filter=this.filter||this._filter,this.sort=this.sort||this._sort,this.highlight=this.highlight||this._highlight,this.renderer=this.renderer||this._renderer,this.opened=!1,this.$popup=n("<ul><\/ul>"),this.source=[],this.roundedCorners=!0,this.searchMode="default",this.placeHolder="",this.width=null,this.height=null,this.value="",this.rtl=!1,this.displayMember="",this.valueMember="",this.events=["select","open","close"],this.popupZIndex=2e4,this.items=8,this.item='<li><a href="#"><\/a><\/li>',this.minLength=1,this.maxLength=null},createInstance:function(){this.render()},render:function(){var i,r,u,t;if(this.element.nodeName.toLowerCase()=="div"){if(this.baseHost=this.element,i=this.host.find("input"),r=!1,n.each(i,function(){var t=this.type;if(t==null||t=="text"||t=="textarea")return i=n(this),r=!0,!1}),!r)throw new Error("jqxInput: Missing Text Input in the Input Group");i.length>0&&(this.baseHost=n(this.element),this.host=i,this.element=i[0],this.baseHost.addClass(this.toThemeProperty("jqx-widget")),this.baseHost.addClass(this.toThemeProperty("jqx-rc-all")),this.baseHost.addClass(this.toThemeProperty("jqx-input-group")),u=this.baseHost.children(),t=this,n.each(u,function(i){n(this).addClass(t.toThemeProperty("jqx-input-group-addon")),n(this).removeClass(t.toThemeProperty("jqx-rc-all")),i==0&&n(this).addClass(t.toThemeProperty("jqx-rc-l")),i==u.length-1&&n(this).addClass(t.toThemeProperty("jqx-rc-r")),this!=t.element&&n(this).addClass(t.toThemeProperty("jqx-fill-state-normal"))}))}this.addHandlers(),this.rtl&&this.host.addClass(this.toThemeProperty("jqx-rtl")),this.host.attr("role","textbox"),n.jqx.aria(this,"aria-autocomplete","both"),n.jqx.aria(this,"aria-disabled",this.disabled),n.jqx.aria(this,"aria-readonly",!1),n.jqx.aria(this,"aria-multiline",!1),this.source&&this.source.length&&n.jqx.aria(this,"aria-haspopup",!0),this.value!=""&&(this.element.value=this.value),this._oldsource=this.source,this._updateSource()},_updateSource:function(){var t=this,r=function(i){return n.map(i,function(n){if(n==undefined)return null;if(typeof n=="string")return{label:n,value:n};if(typeof n!="string"){var i="",r="";return t.displayMember!=""&&t.displayMember!=undefined&&n[t.displayMember]&&(i=n[t.displayMember]),t.valueMember!=""&&t.valueMember!=undefined&&(r=n[t.valueMember]),i==""&&(i=n.label),r==""&&(r=n.value),{label:i,value:r}}return n})},i;if(this.source&&this.source._source){this.adapter=this.source,this.adapter._source.localdata!=null?(this.adapter.unbindBindingUpdate(this.element.id),this.adapter.bindBindingUpdate(this.element.id,function(){t.source=r(t.adapter.records)})):(i={},this.adapter._options.data?n.extend(t.adapter._options.data,i):(this.source._source.data&&n.extend(i,this.source._source.data),this.adapter._options.data=i),this.adapter.unbindDownloadComplete(this.element.id),this.adapter.bindDownloadComplete(this.element.id,function(){t.source=r(t.adapter.records)})),this.source.dataBind();return}n.isFunction(this.source)||(this.source=r(this.source))},_refreshClasses:function(t){var i=t?"addClass":"removeClass";this.host[i](this.toThemeProperty("jqx-widget-content")),this.host[i](this.toThemeProperty("jqx-input")),this.host[i](this.toThemeProperty("jqx-widget")),this.$popup[i](this.toThemeProperty("jqx-popup")),n.jqx.browser.msie&&this.$popup[i](this.toThemeProperty("jqx-noshadow")),this.$popup[i](this.toThemeProperty("jqx-input-popup")),this.$popup[i](this.toThemeProperty("jqx-menu")),this.$popup[i](this.toThemeProperty("jqx-menu-vertical")),this.$popup[i](this.toThemeProperty("jqx-menu-dropdown")),this.$popup[i](this.toThemeProperty("jqx-widget")),this.$popup[i](this.toThemeProperty("jqx-widget-content")),this.roundedCorners&&(this.host[i](this.toThemeProperty("jqx-rc-all")),this.$popup[i](this.toThemeProperty("jqx-rc-all"))),this.disabled?this.host[i](this.toThemeProperty("jqx-fill-state-disabled")):this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},selectAll:function(){var n=this.host;setTimeout(function(){if("selectionStart"in n[0])n[0].focus(),n[0].setSelectionRange(0,n[0].value.length);else{var t=n[0].createTextRange();t.collapse(!0),t.moveEnd("character",n[0].value.length),t.moveStart("character",0),t.select()}},10)},selectLast:function(){var n=this.host;this.selectStart(n[0].value.length)},selectFirst:function(){var n=this.host;this.selectStart(0)},selectStart:function(n){var t=this.host;setTimeout(function(){if("selectionStart"in t[0])t[0].focus(),t[0].setSelectionRange(n,n);else{var i=t[0].createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",n),i.select()}},10)},focus:function(){try{this.host.focus()}catch(n){}},refresh:function(){if(this._refreshClasses(!1),this._refreshClasses(!0),this.baseHost){if(this.width&&this.baseHost.width(this.width),this.height){this.baseHost.height(this.height);var r=this,i=0,t=this.baseHost.height()-2;n.jqx.browser.msie&&n.jqx.browser.version<8&&this.baseHost.css("display","inline-block"),n.each(this.baseHost.children(),function(){n(this).css("height","100%"),n.jqx.browser.msie&&n.jqx.browser.version<8&&n(this).css("height",t+"px"),this!==r.element&&(i+=n(this).outerWidth()+2)}),this.host.css("width",this.baseHost.width()-i-4+"px"),n.jqx.browser.msie&&n.jqx.browser.version<9&&(this.host.css("min-height",t+"px"),this.host.css("line-height",t+"px"))}}else this.width&&this.host.width(this.width),this.height&&this.host.height(this.height);this.host.attr("disabled",this.disabled),this.maxLength&&this.host.attr("maxlength",this.maxLength),this.host.attr("placeholder")||this._refreshPlaceHolder()},_refreshPlaceHolder:function(){if("placeholder"in this.element)this.host.attr("placeHolder",this.placeHolder);else{var n=this;this.host.val()==""&&(this.host.val(this.placeHolder),this.host.focus(function(){n.host.val()==n.placeHolder&&n.host.val("")}),this.host.blur(function(){(n.host.val()==""||n.host.val()==n.placeHolder)&&n.host.val(n.placeHolder)}))}},destroy:function(){this.removeHandlers(),this.host.remove(),this.$popup&&this.$popup.remove()},propertyChangedHandler:function(t,i,r,u){if(i=="placeHolder"){t._refreshPlaceHolder();return}if(i=="opened"){u?t.open():t.close();return}i=="source"&&(t._oldsource=u,t._updateSource()),(i=="displayMember"||i=="valueMember")&&(t.source=t._oldsource,t._updateSource()),i=="disabled"&&n.jqx.aria(t,"aria-disabled",t.disabled),i=="value"&&(t.element.value=u),t.refresh()},select:function(){var t=this.$popup.find(".jqx-fill-state-pressed").attr("data-value"),n=this.$popup.find(".jqx-fill-state-pressed").attr("data-name");return this.host.val(this.renderer(n,this.host.val())),this._raiseEvent("0",{item:{label:n,value:t},label:n,value:t}),this.close()},val:function(n){return arguments.length==0||n!=null&&typeof n=="object"?this.element.value:(this.value=n,this.element.value=n,this.element.value)},_raiseEvent:function(n,t){var r,i;return t==undefined&&(t={owner:null}),r=this.events[n],t.owner=this,i=new jQuery.Event(r),i.owner=this,i.args=t,i.preventDefault&&i.preventDefault(),this.host.trigger(i)},_renderer:function(n){return n},open:function(){var t=n.extend({},this.host.coord(!0),{height:this.host[0].offsetHeight}),i,r,u;return this.$popup.parent().length==0&&(i=this.element.id+"_popup",this.$popup[0].id=i,n.jqx.aria(this,"aria-owns",i)),this.$popup.appendTo(n(document.body)).css({position:"absolute",zIndex:this.popupZIndex,top:t.top+t.height,left:t.left}).show(),r=0,u=this.$popup.children(),n.each(u,function(){r+=n(this).outerHeight(!0)-1}),this.$popup.height(r),this.opened=!0,this._raiseEvent("1",{popup:this.$popup}),n.jqx.aria(this,"aria-expanded",!0),this},close:function(){return this.$popup.hide(),this.opened=!1,this._raiseEvent("2",{popup:this.$popup}),n.jqx.aria(this,"aria-expanded",!1),this},suggest:function(){var t;return(this.query=this.host.val(),!this.query||this.query.length<this.minLength)?this.opened?this.close():this:(t=n.isFunction(this.source)?this.source(this.query,n.proxy(this.load,this)):this.source,t)?this.load(t):this},load:function(t){var i=this;return(t=n.grep(t,function(n){return i.filter(n)}),t=this.sort(t),!t.length)?this.opened?this.close():this:this._render(t.slice(0,this.items)).open()},_filter:function(t){var r=this.query,i=t;t.label!=null&&(i=t.label);switch(this.searchMode){case"containsignorecase":default:return n.jqx.string.containsIgnoreCase(i,r);case"contains":return n.jqx.string.contains(i,r);case"equals":return n.jqx.string.equals(i,r);case"equalsignorecase":return n.jqx.string.equalsIgnoreCase(i,r);case"startswith":return n.jqx.string.startsWith(i,r);case"startswithignorecase":return n.jqx.string.startsWithIgnoreCase(i,r);case"endswith":return n.jqx.string.endsWith(i,r);case"endswithignorecase":return n.jqx.string.endsWithIgnoreCase(i,r)}},_sort:function(n){for(var u=[],f=[],e=[],t,i,r=0;r<n.length;r++)t=n[r],i=t,t.label&&(i=t.label),i.toLowerCase().indexOf(this.query.toLowerCase())===0?u.push(t):i.indexOf(this.query)>=0?f.push(t):i.toLowerCase().indexOf(this.query.toLowerCase())>=0&&e.push(t);return u.concat(f,e)},_highlight:function(n){var t=this.query,i=new RegExp("("+t+")","ig");return n.replace(i,function(n,t){return"<b>"+t+"<\/b>"})},_render:function(t){var i=this;return t=n(t).map(function(t,r){var f=r,u;return t=r.value!=undefined?r.label!=undefined?n(i.item).attr({"data-name":r.label,"data-value":r.value}):n(i.item).attr({"data-name":r.value,"data-value":r.value}):r.label!=undefined?n(i.item).attr({"data-value":r.label,"data-name":r.label}):n(i.item).attr({"data-value":r,"data-name":r}),r.label&&(f=r.label),t.find("a").html(i.highlight(f)),u="",i.rtl&&(u=" "+i.toThemeProperty("jqx-rtl")),t[0].className=i.toThemeProperty("jqx-item")+" "+i.toThemeProperty("jqx-menu-item")+" "+i.toThemeProperty("jqx-rc-all")+u,t[0]}),t.first().addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.$popup.html(t),this.$popup.width(this.host.width()-4),this},next:function(){var i=this.$popup.find(".jqx-fill-state-pressed").removeClass(this.toThemeProperty("jqx-fill-state-pressed")),t=i.next();t.length||(t=n(this.$popup.find("li")[0])),t.addClass(this.toThemeProperty("jqx-fill-state-pressed"))},prev:function(){var t=this.$popup.find(".jqx-fill-state-pressed").removeClass(this.toThemeProperty("jqx-fill-state-pressed")),n=t.prev();n.length||(n=this.$popup.find("li").last()),n.addClass(this.toThemeProperty("jqx-fill-state-pressed"))},addHandlers:function(){if(this.addHandler(this.host,"focus",n.proxy(this.focus,this)),this.addHandler(this.host,"blur",n.proxy(this.blur,this)),this.addHandler(this.host,"keypress",n.proxy(this.keypress,this)),this.addHandler(this.host,"keyup",n.proxy(this.keyup,this)),this.addHandler(this.host,"keydown",n.proxy(this.keydown,this)),this.addHandler(this.$popup,"mousedown",n.proxy(this.click,this)),this.host.on)this.$popup.on("mouseenter","li",n.proxy(this.mouseenter,this));else this.$popup.bind("mouseenter","li",n.proxy(this.mouseenter,this))},removeHandlers:function(){this.removeHandler(this.host,"blur",n.proxy(this.blur,this)),this.removeHandler(this.host,"keypress",n.proxy(this.keypress,this)),this.removeHandler(this.host,"keyup",n.proxy(this.keyup,this)),this.removeHandler(this.host,"keydown",n.proxy(this.keydown,this)),this.removeHandler(this.$popup,"mousedown",n.proxy(this.click,this)),this.host.off?this.$popup.off("mouseenter","li",n.proxy(this.mouseenter,this)):this.$popup.unbind("mouseenter","li",n.proxy(this.mouseenter,this))},move:function(n){if(this.opened){switch(n.keyCode){case 9:case 13:case 27:n.preventDefault();break;case 38:n.preventDefault(),this.prev();break;case 40:n.preventDefault(),this.next()}n.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~n.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(n){this.suppressKeyPressRepeat||this.move(n)},keyup:function(n){switch(n.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.opened)return;this.select(n,this);break;case 27:if(!this.opened)return;this.close();break;default:var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.suggest()},300)}n.stopPropagation(),n.preventDefault()},clear:function(){this.host.val("")},blur:function(){var n=this;setTimeout(function(){n.close()},150),n.host.removeClass(n.toThemeProperty("jqx-fill-state-focus")),this.value=this.host.val()},focus:function(){var n=this;n.host.addClass(n.toThemeProperty("jqx-fill-state-focus"))},click:function(n){n.stopPropagation(),n.preventDefault(),this.select(n,this)},mouseenter:function(t){this.$popup.find(".jqx-fill-state-pressed").removeClass(this.toThemeProperty("jqx-fill-state-pressed")),n(t.currentTarget).addClass(this.toThemeProperty("jqx-fill-state-pressed"))}})})(jQuery);
//# sourceMappingURL=jqxinput.min.js.map