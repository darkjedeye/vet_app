(function(n){n.jqx.jqxWidget("jqxNumberInput","",{}),n.extend(n.jqx._jqxNumberInput.prototype,{defineInstance:function(){this.value=null,this.decimal=0,this.min=-99999999,this.max=99999999,this.width=null,this.validationMessage="Invalid value",this.height=50,this.textAlign="right",this.readOnly=!1,this.promptChar="_",this.decimalDigits=2,this.decimalSeparator=".",this.groupSeparator=",",this.groupSize=3,this.symbol="",this.symbolPosition="left",this.digits=8,this.negative=!1,this.negativeSymbol="-",this.disabled=!1,this.inputMode="advanced",this.spinButtons=!1,this.spinButtonsWidth=18,this.spinButtonsStep=1,this.autoValidate=!0,this.spinMode="advanced",this.touchMode="auto",this.rtl=!1,this.events=["valuechanged","textchanged","mousedown","mouseup","keydown","keyup","keypress","change"],this.aria={"aria-valuenow":{name:"decimal",type:"number"},"aria-valuemin":{name:"min",type:"number"},"aria-valuemax":{name:"max",type:"number"},"aria-disabled":{name:"disabled",type:"boolean"}},this.invalidArgumentExceptions=["invalid argument exception"]},createInstance:function(){var n=this.host.attr("value");n!=undefined&&(this.decimal=n),this.value!=null&&(this.decimal=this.value),this.render()},_doTouchHandling:function(){var n=this,f=n.savedValue,r,i,t,u;if(n.parsing||(n.parsing=!0),n.parsing){for(n.numberInput.val()&&n.numberInput.val().indexOf("-")==0?n.setvalue("negative",!0):n.setvalue("negative",!1),r=n.numberInput.val(),i=0;i<r.length-1;i++)if(t=r.substring(i,i+1),isNaN(parseFloat(t))&&t!=n.symbol&&t!="%"&&t!="$"&&t!="."&&t!=","&&t!="-"){n.numberInput[0].value=f,n.parsing=!1;return}n.ValueString=n.GetValueString(n.numberInput.val(),n.decimalSeparator,n.decimalSeparator!=""),n.ValueString=new Number(n.ValueString).toFixed(n.decimalDigits),n._parseDecimalInSimpleMode(),n.decimal=n.ValueString,u=n.getvalue("negative"),u&&(n.decimal="-"+n.ValueString),n.parsing=!1}},render:function(){var i,r,e,f,t;this.host.attr({role:"spinbutton"}),this.host.attr("data-role","input"),n.jqx.aria(this),n.jqx.aria(this,"aria-multiline",!1),t=this,n.jqx.utilities.resize(this.host,function(){t._render()}),(this.officeMode||this.theme&&this.theme.indexOf("office")!=-1)&&this.spinButtonsWidth==18&&(this.spinButtonsWidth=15),(n.jqx.mobile.isTouchDevice()||this.touchMode===!0)&&(this.inputMode="textbox",this.spinMode="simple"),this.decimalSeparator==""&&(this.decimalSeparator=" "),this.host.addClass(this.toThemeProperty("jqx-input")),this.host.addClass(this.toThemeProperty("jqx-rc-all")),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-widget-content")),this.host.addClass(this.toThemeProperty("jqx-numberinput")),this.spinButtons?this._spinButtons():(this.numberInput=n("<input autocomplete='off' type='textarea'/>").appendTo(this.host),this.numberInput.addClass(this.toThemeProperty("jqx-input-content")),this.numberInput.addClass(this.toThemeProperty("jqx-widget-content"))),i=this.host.attr("name"),i||(i=this.element.id),this.numberInput.attr("name",i),(n.jqx.mobile.isTouchDevice()||this.touchMode===!0||this.inputMode=="textbox")&&(t=this,t.savedValue="",this.addHandler(this.numberInput,"focus",function(){t.savedValue=t.numberInput[0].value}),this.addHandler(this.numberInput,"change",function(){t._doTouchHandling()})),r=n.data(this.host[0],"jqxNumberInput"),r.jqxNumberInput=this,t=this,this.removeHandler(this.host,"loadContent"),this.addHandler(this.host,"loadContent",function(){t._render()}),this.host.parents("form").length>0&&(this.removeHandler(this.host.parents("form"),"loadContent"),this.addHandler(this.host.parents("form"),"reset",function(){setTimeout(function(){t.setDecimal(0)},10)})),this.propertyChangeMap.disabled=function(n,t,i,r){r?(n.numberInput.addClass(u.toThemeProperty("jqx-input-disabled")),n.numberInput.attr("disabled",!0)):(n.host.removeClass(u.toThemeProperty("jqx-input-disabled")),n.numberInput.attr("disabled",!1)),n.spinButtons&&n.host.jqxRepeatButton&&(n.upbutton.jqxRepeatButton({disabled:r}),n.downbutton.jqxRepeatButton({disabled:r}))},this.disabled&&(this.numberInput.addClass(this.toThemeProperty("jqx-input-disabled")),this.numberInput.attr("disabled",!0),this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))),this.selectedText="",this.decimalSeparatorPosition=-1;var o=this.element.id,s=this.element,u=this;this.oldValue=this._value(),this.items=[],e=this.value,f=this.decimal,this._initializeLiterals(),this._render(),this.setDecimal(f),t=this,setTimeout(function(){t._render(!1)},100),this._addHandlers()},refresh:function(n){n||this._render()},wheel:function(n,t){var r=0,i;if(n||(n=window.event),n.originalEvent&&n.originalEvent.wheelDelta&&(n.wheelDelta=n.originalEvent.wheelDelta),n.wheelDelta?r=n.wheelDelta/120:n.detail&&(r=-n.detail/3),r)return i=t._handleDelta(r),n.preventDefault&&n.preventDefault(),n.originalEvent!=null&&(n.originalEvent.mouseHandled=!0),n.stopPropagation!=undefined&&n.stopPropagation(),i?(i=!1,n.returnValue=i,i):!1;n.preventDefault&&n.preventDefault(),n.returnValue=!1},_handleDelta:function(n){return n<0?this.spinDown():this.spinUp(),!0},_addHandlers:function(){var t=this,i;this.addHandler(this.numberInput,"mousedown",function(n){return t._raiseEvent(2,n)}),this._mousewheelfunc=this._mousewheelfunc||function(n){if(!t.editcell)return t.wheel(n,t),!1},this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"mousewheel",this._mousewheelfunc),i="",this.addHandler(this.numberInput,"focus",function(){n.data(t.numberInput,"selectionstart",t._selection().start),t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")),t.spincontainer&&t.spincontainer.addClass(t.toThemeProperty("jqx-numberinput-focus")),i=t.numberInput.val()}),this.addHandler(this.numberInput,"blur",function(r){if(t.inputMode=="simple"&&t._exitSimpleInputMode(r,t,!1,i),t.autoValidate){var u=parseFloat(t.decimal),f=t.getvalue("negative");f&&t.decimal>0&&(u=-parseFloat(t.decimal)),u>t.max&&(t._disableSetSelection=!0,t.setDecimal(t.max),t._disableSetSelection=!1),u<t.min&&(t._disableSetSelection=!0,t.setDecimal(t.min),t._disableSetSelection=!1)}return t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")),t.spincontainer&&t.spincontainer.removeClass(t.toThemeProperty("jqx-numberinput-focus")),t.numberInput.val()!=i&&(t._raiseEvent(7,r),n.jqx.aria(t,"aria-valuenow",t.decimal),t.element.value=t.decimal),!0}),this.addHandler(this.numberInput,"mouseup",function(n){return t._raiseEvent(3,n)}),this.addHandler(this.numberInput,"keydown",function(n){return t._raiseEvent(4,n)}),this.addHandler(this.numberInput,"keyup",function(n){return t._raiseEvent(5,n)}),this.addHandler(this.numberInput,"keypress",function(n){return t._raiseEvent(6,n)})},focus:function(){try{this.numberInput.focus()}catch(n){}},_removeHandlers:function(){var t=this,i;this.removeHandler(this.numberInput,"mousedown"),i=n.jqx.mobile.isOperaMiniMobileBrowser(),i&&this.removeHandler(n(document),"click."+this.element.id,t._exitSimpleInputMode,t),this.removeHandler(this.numberInput,"focus"),this.removeHandler(this.numberInput,"blur"),this.removeHandler(this.numberInput,"mouseup"),this.removeHandler(this.numberInput,"keydown"),this.removeHandler(this.numberInput,"keyup"),this.removeHandler(this.numberInput,"keypress")},_spinButtons:function(){var t,i,r;if(this.host.jqxRepeatButton)this.numberInput?this.numberInput.css("float","left"):(this.numberInput=n("<input autocomplete='off' style='position: relative; float: left;' type='textarea'/>"),this.numberInput.appendTo(this.host),this.numberInput.addClass(this.toThemeProperty("jqx-input-content")),this.numberInput.addClass(this.toThemeProperty("jqx-widget-content"))),this.spincontainer&&(this.upbutton&&this.upbutton.jqxRepeatButton("destroy"),this.downbutton&&this.downbutton.jqxRepeatButton("destroy"),this.spincontainer.remove()),this.spincontainer=n('<div style="float: right; height: 100%; overflow: hidden; position: relative;"><\/div>'),this.rtl&&(this.spincontainer.css("float","right"),this.numberInput.css("float","right")),this.host.append(this.spincontainer),this.upbutton=n('<div style="overflow: hidden; padding: 0px; margin-left: -1px; position: relative;"><div><\/div><\/div>'),this.spincontainer.append(this.upbutton),this.upbutton.jqxRepeatButton({overrideTheme:!0,disabled:this.disabled,roundedCorners:"top-right"}),this.downbutton=n('<div style="overflow: hidden; padding: 0px; margin-left: -1px; position: relative;"><div><\/div><\/div>'),this.spincontainer.append(this.downbutton),this.downbutton.jqxRepeatButton({overrideTheme:!0,disabled:this.disabled,roundedCorners:"bottom-right"}),t=this,this.downbutton.addClass(this.toThemeProperty("jqx-fill-state-normal")),this.upbutton.addClass(this.toThemeProperty("jqx-fill-state-normal")),this.upbutton.addClass(this.toThemeProperty("jqx-rc-tr")),this.downbutton.addClass(this.toThemeProperty("jqx-rc-br")),this.addHandler(this.downbutton,"mouseup",function(){t.disabled||(t.downbutton.removeClass(t.toThemeProperty("jqx-fill-state-pressed")),t._downArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-selected")))}),this.addHandler(this.upbutton,"mouseup",function(){t.disabled||(t.upbutton.removeClass(t.toThemeProperty("jqx-fill-state-pressed")),t._upArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-up-selected")))}),this.removeHandler(n(document),"mouseup."+this.element.id),this.addHandler(n(document),"mouseup."+this.element.id,function(){t.upbutton.removeClass(t.toThemeProperty("jqx-fill-state-pressed")),t._upArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-up-selected")),t.downbutton.removeClass(t.toThemeProperty("jqx-fill-state-pressed")),t._downArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-selected"))}),this.addHandler(this.downbutton,"mousedown",function(i){if(!t.disabled)return n.jqx.browser.msie&&n.jqx.browser.version<9&&(t._inputSelection=t._selection()),t.downbutton.addClass(t.toThemeProperty("jqx-fill-state-pressed")),t._downArrow.addClass(t.toThemeProperty("jqx-icon-arrow-down-selected")),i.preventDefault(),i.stopPropagation(),!1}),this.addHandler(this.upbutton,"mousedown",function(i){if(!t.disabled)return n.jqx.browser.msie&&n.jqx.browser.version<9&&(t._inputSelection=t._selection()),t.upbutton.addClass(t.toThemeProperty("jqx-fill-state-pressed")),t._upArrow.addClass(t.toThemeProperty("jqx-icon-arrow-up-selected")),i.preventDefault(),i.stopPropagation(),!1}),this.addHandler(this.upbutton,"mouseenter",function(){t.upbutton.addClass(t.toThemeProperty("jqx-fill-state-hover")),t._upArrow.addClass(t.toThemeProperty("jqx-icon-arrow-up-hover"))}),this.addHandler(this.upbutton,"mouseleave",function(){t.upbutton.removeClass(t.toThemeProperty("jqx-fill-state-hover")),t._upArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-up-hover"))}),this.addHandler(this.downbutton,"mouseenter",function(){t.downbutton.addClass(t.toThemeProperty("jqx-fill-state-hover")),t._downArrow.addClass(t.toThemeProperty("jqx-icon-arrow-down-hover"))}),this.addHandler(this.downbutton,"mouseleave",function(){t.downbutton.removeClass(t.toThemeProperty("jqx-fill-state-hover")),t._downArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-hover"))}),this.upbutton.css("border-width","0px"),this.downbutton.css("border-width","0px"),this.disabled?(this.upbutton[0].disabled=!0,this.downbutton[0].disabled=!0):(this.upbutton[0].disabled=!1,this.downbutton[0].disabled=!1),this.spincontainer.addClass(this.toThemeProperty("jqx-input")),this.spincontainer.addClass(this.toThemeProperty("jqx-rc-r")),this.spincontainer.css("border-width","0px"),this.rtl?this.spincontainer.css("border-right-width","1px"):this.spincontainer.css("border-left-width","1px"),this._upArrow=this.upbutton.find("div"),this._downArrow=this.downbutton.find("div"),this._upArrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")),this._downArrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")),this._upArrow.addClass(this.toThemeProperty("jqx-input-icon")),this._downArrow.addClass(this.toThemeProperty("jqx-input-icon")),t=this,this._upArrow.hover(function(){t.disabled||t._upArrow.addClass(t.toThemeProperty("jqx-icon-arrow-up-hover"))},function(){t._upArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-up-hover"))}),this._downArrow.hover(function(){t.disabled||t._downArrow.addClass(t.toThemeProperty("jqx-icon-arrow-down-hover"))},function(){t._downArrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-hover"))}),i=n.jqx.mobile.isTouchDevice(),r="click",i&&(r=n.jqx.mobile.getTouchEventName("touchstart")),this.addHandler(this.downbutton,r,function(r){return i?(r.preventDefault(),r.stopPropagation()):(t._selection().start==0&&t._setSelectionStart(t.numberInput.val().length),n.jqx.browser.msie&&n.jqx.browser.version<9&&t._setSelectionStart(t._inputSelection.start)),t.spinDown(),!1}),this.addHandler(this.upbutton,r,function(r){return i?(r.preventDefault(),r.stopPropagation()):(t._selection().start==0&&t._setSelectionStart(t.numberInput.val().length),n.jqx.browser.msie&&n.jqx.browser.version<9&&t._setSelectionStart(t._inputSelection.start)),t.spinUp(),!1});else throw new Error("jqxNumberInput: Missing reference to jqxbuttons.js.");},spinDown:function(){var t=this,a,v,e,y,u,h,l,f,i,s;if(t.spinMode!="none"&&(s=this.getvalue("negative"),a=s?-1:0,(n.jqx.mobile.isTouchDevice()||this.inputMode=="textbox")&&t._doTouchHandling(),!t.disabled)){var o=this._selection(),p=this.decimal,r=this.getDecimal();if(r<this.min){r=this.min,this.setDecimal(this.min),this._setSelectionStart(o.start),this.spinDown();return}if(r>this.max){r=this.max,this.setDecimal(this.max),this._setSelectionStart(o.start),this.spinDown();return}if(t.spinButtonsStep<0&&(t.spinButtonsStep=1),e=parseInt(t.decimal)+t.spinButtonsStep,e=e.toString().length,v=a+e<=t.digits,t.spinMode!="advanced"){if(r-t.spinButtonsStep>=t.min&&v){for(u=1,h=0;h<t.decimalDigits;h++)u=u*10;f=u*r-u*t.spinButtonsStep,f=f/u,f=this._parseDecimalValueToEditorValue(f),t.setDecimal(f)}}else{var c=this._getspindecimal(),w=this._getSeparatorPosition(),r=parseFloat(c.decimal);t.spinButtonsStep<0&&(t.spinButtonsStep=1),e=parseInt(r)+t.spinButtonsStep,e=e.toString().length;var v=a+e<=t.digits,u=1,l=c.decimal.indexOf(".");if(l!=-1){for(y=c.decimal.length-l-1,u=1,h=0;h<y;h++)u=u*10;r-=new Number(t.spinButtonsStep/u),r=r.toFixed(y),l=r.toString().indexOf("."),l==-1&&(r=r.toString()+"."),i=r.toString()+c.afterdecimal,i=new Number(i),i=i.toFixed(t.decimalDigits),i>=t.min&&(i=this._parseDecimalValueToEditorValue(i),t.setDecimal(i))}else r-t.spinButtonsStep>=t.min&&v&&(f=u*r-u*t.spinButtonsStep,f=f/u,i=f.toString()+c.afterdecimal,i>=t.min&&(i=this._parseDecimalValueToEditorValue(i),t.setDecimal(i)))}if(i==undefined||this.inputMode!="simple"){this._setSelectionStart(o.start),t.savedValue=t.numberInput[0].value;return}i=this.decimal.toString(),s=this.getvalue("negative"),a==0&&s?this._setSelectionStart(o.start+1):i!=undefined&&(p==undefined||p.toString().length==i.length)?this._setSelectionStart(o.start):s?this._setSelectionStart(o.start+1):this._setSelectionStart(o.start-1)}},_getspindecimal:function(){var u=this._selection(),r="",a=this._getSeparatorPosition(),t=this._getVisibleItems(),s=this._getHiddenPrefixCount(),h=this.numberInput.val(),o,f,n,i,e,c,l;for(this.numberInput.val().length==u.start&&u.length==0&&(this._setSelection(u.start,u.start+1),u=this._selection()),o=this.inputMode!="advanced",n=0;n<u.start;n++){if(o){i=h.substring(n,n+1),e=!isNaN(parseInt(i)),e&&(r+=i),i==this.decimalSeparator&&(r+=i);continue}t[n].canEdit&&t[n].character!=this.promptChar?r+=t[n].character:t[n].canEdit||this.decimalSeparatorPosition==-1||t[n]!=t[this.decimalSeparatorPosition-s]||(r.length==0&&(r="0"),r+=t[n].character)}for(f="",n=u.start;n<t.length;n++){if(o){i=h.substring(n,n+1),e=!isNaN(parseInt(i)),e&&(f+=i),i==this.decimalSeparator&&(f+=i);continue}t[n].canEdit&&t[n].character!=this.promptChar?f+=t[n].character:t[n].canEdit||this.decimalSeparatorPosition==-1||t[n]!=t[this.decimalSeparatorPosition-s]||(f+=t[n].character)}return c=this.getvalue("negative"),l=c?"-"+this._parseDecimalValue(r).toString():this._parseDecimalValue(r).toString(),{decimal:l,afterdecimal:this._parseDecimalValue(f)}},_parseDecimalValue:function(n){var t;return this.decimalSeparator!="."&&(t=n.toString().indexOf(this.decimalSeparator),t>=0)?n.toString().substring(0,t)+"."+n.toString().substring(t+1):n},_parseDecimalValueToEditorValue:function(n){var t;return this.decimalSeparator!="."&&(t=n.toString().indexOf("."),t>=0)?n.toString().substring(0,t)+this.decimalSeparator+n.toString().substring(t+1):n},spinUp:function(){var t=this,v,y,e,p,u,h,l,f,i,a,o;if(t.spinMode!="none"&&((n.jqx.mobile.isTouchDevice()||this.inputMode=="textbox")&&t._doTouchHandling(),o=this.getvalue("negative"),v=o?-1:0,!t.disabled)){var s=this._selection(),w=t.decimal,r=t.getDecimal();if(r<this.min){r=this.min,this.setDecimal(this.min),this._setSelectionStart(s.start),this.spinUp();return}if(r>this.max){r=this.max,this.setDecimal(this.max),this._setSelectionStart(s.start),this.spinUp();return}if(t.spinButtonsStep<0&&(t.spinButtonsStep=1),e=parseInt(t.decimal)+t.spinButtonsStep,e=e.toString().length,y=v+e<=t.digits,t.spinMode!="advanced"){if(r+t.spinButtonsStep<=t.max&&y){for(u=1,h=0;h<t.decimalDigits;h++)u=u*10;f=u*r+u*t.spinButtonsStep,f=f/u,f=this._parseDecimalValueToEditorValue(f),t.setDecimal(f)}}else{var c=this._getspindecimal(),b=this._getSeparatorPosition(),r=parseFloat(c.decimal);t.spinButtonsStep<0&&(t.spinButtonsStep=1),e=parseInt(r)+t.spinButtonsStep,e=e.toString().length;var y=v+e<=t.digits,u=1,l=c.decimal.indexOf(".");if(l!=-1){for(p=c.decimal.length-l-1,u=1,h=0;h<p;h++)u=u*10;r+=new Number(t.spinButtonsStep/u),r=r.toFixed(p),l=r.toString().indexOf("."),l==-1&&(r=r.toString()+"."),i=r.toString()+c.afterdecimal,i=new Number(i),i=i.toFixed(t.decimalDigits),a=new Number(i).toFixed(t.decimalDigits),a<=t.max?(i=this._parseDecimalValueToEditorValue(i),t.setDecimal(i)):i=undefined}else r+t.spinButtonsStep<=t.max&&y&&(f=u*r+u*t.spinButtonsStep,f=f/u,i=f.toString()+c.afterdecimal,a=new Number(i).toFixed(t.decimalDigits),a<=t.max?(i=this._parseDecimalValueToEditorValue(i),o&&i.indexOf("-")==-1&&c.decimal!="-0"&&(i="-"+i),t.setDecimal(i)):i=undefined)}if(i==undefined||this.inputMode!="simple"){this._setSelectionStart(s.start),t.savedValue=t.numberInput[0].value;return}i=this.decimal.toString(),o=this.getvalue("negative"),v!=-1||o?i!=undefined&&(w==undefined||w.toString().length==i.length)?this._setSelectionStart(s.start):o?this._setSelectionStart(-1+s.start):this._setSelectionStart(1+s.start):this._setSelectionStart(-1+s.start)}},_exitSimpleInputMode:function(t,i,r){var s;if(i==undefined&&(i=t.data),i!=null){if(r==undefined){if(t.target!=null&&i.element!=null&&(t.target.id!=undefined&&t.target.id.toString().length>0&&i.host.find("#"+t.target.id).length>0||t.target==i.element))return;var f=i.host.offset(),e=f.left,o=f.top,h=i.host.width(),c=i.host.height(),u=n(t.target).offset();if(u.left>=e&&u.left<=e+h&&u.top>=o&&u.top<=o+c)return}if(n.jqx.mobile.isOperaMiniBrowser()&&i.numberInput.attr("readonly",!0),!i.disabled&&!i.readOnly)return(s=n.data(i.numberInput,"simpleInputMode"),s==null)?void 0:(n.data(i.numberInput,"simpleInputMode",null),this._parseDecimalInSimpleMode(),!1)}},_getDecimalInSimpleMode:function(){var n=this.decimal,t,i;return this.decimalSeparator!="."&&(t=n.toString().indexOf(this.decimalSeparator),t>0&&(i=n.toString().substring(0,t),n=i+"."+n.toString().substring(t+1))),n},_parseDecimalInSimpleMode:function(n){var f=this,h=f.getvalue("negative"),t=this.ValueString,r,e,o,i,u,s;t==undefined&&(t=this.GetValueString(this.numberInput.val(),this.decimalSeparator,this.decimalSeparator!="")),this.decimalSeparator!="."&&(r=t.toString().indexOf("."),r>0&&(e=t.toString().substring(0,r),o=e+this.decimalSeparator+t.toString().substring(r+1),t=o)),i=h?"-":"",this.symbolPosition=="left"&&(i+=this.symbol),u=this.digits%this.groupSize,u==0&&(u=this.groupSize),s=t.toString(),i+=s,this.symbolPosition=="right"&&(i+=this.symbol),n!=!1&&f.numberInput.val(i)},_enterSimpleInputMode:function(t,i){var u,f,r;(i==undefined&&(i=t.data),u=this._selection(),i!=null)&&(f=i.getvalue("negative"),r=i.decimal,f&&r>0&&(r=-r),i.numberInput.val(r),n.data(i.numberInput,"simpleInputMode",!0),n.jqx.mobile.isOperaMiniBrowser()&&i.numberInput.attr("readonly",!1),this._parseDecimalInSimpleMode(),this._setSelectionStart(u.start))},setvalue:function(n,t){this[n]!=undefined&&(n=="decimal"?this._setDecimal(t):(this[n]=t,this.propertyChangedHandler(this,n,t,t)))},getvalue:function(n){return n=="decimal"&&this.negative!=undefined&&this.negative==!0?-Math.abs(this[n]):n in this?this[n]:null},_getString:function(){for(var t="",i,n=0;n<this.items.length;n++)i=this.items[n].character,t+=i;return t},_literal:function(n,t,i,r){return{character:n,regex:t,canEdit:i,isSeparator:r}},_initializeLiterals:function(){var t,s,o,e,h,i,r,n;if(this.inputMode!="textbox"){for(t=0,s=this.negativeSymbol.length,n=0;n<s;n++){var i=this.negativeSymbol.substring(n,n+1),u="",f=!1,r=null;r=this.negative?this._literal(i,u,f,!1):this._literal("",u,f,!1),this.items[t]=r,t++}if(o=this.symbol.length,this.symbolPosition=="left")for(n=0;n<o;n++){var i=this.symbol.substring(n,n+1),u="",f=!1,r=this._literal(i,u,f,!1);this.items[t]=r,t++}for(e=this.digits%this.groupSize,e==0&&(e=this.groupSize),n=0;n<this.digits;n++){var i=this.promptChar,u="\\d",f=!0,r=this._literal(i,u,f,!1);this.items[t]=r,t++,n<this.digits-1&&this.groupSeparator!=undefined&&this.groupSeparator.length>0?(e--,e==0&&(e=this.groupSize,h=this._literal(this.groupSeparator,"",!1,!1),this.items[t]=h,t++)):n==this.digits-1&&(r.character=0)}if(this.decimalSeparatorPosition=-1,this.decimalDigits!=undefined&&this.decimalDigits>0)for(i=this.decimalSeparator,i.length==0&&(i="."),r=this._literal(i,"",!1,!0),this.items[t]=r,this.decimalSeparatorPosition=t,t++,n=0;n<this.decimalDigits;n++){var u="\\d",c=this._literal(0,u,!0,!1);this.items[t]=c,t++}if(this.symbolPosition=="right")for(n=0;n<o;n++){var i=this.symbol.substring(n,n+1),u="",f=!1,r=this._literal(i,u,f);this.items[t]=r,t++}}},_match:function(n,t){var i=new RegExp(t,"i");return i.test(n)},_raiseEvent:function(t,i){var y=this.events[t],s={},l,c,u,a,v,f;if(s.owner=this,this.host.css("display")=="none")return!0;var r=i.charCode?i.charCode:i.keyCode?i.keyCode:0,e=!0,h=this.readOnly,u=this;if((t==3||t==2)&&!this.disabled)if(this.inputMode!="simple"&&this.inputMode!="textbox")this._handleMouse(i);else return!0;if(t==0&&(l=this.getvalue("decimal"),this.max<l||this.min>l?this.host.addClass(this.toThemeProperty("jqx-input-invalid")):(this.host.removeClass(this.toThemeProperty("jqx-input-invalid")),this.host.addClass(this.toThemeProperty("jqx-input")),this.host.addClass(this.toThemeProperty("jqx-rc-all")))),c=new jQuery.Event(y),c.owner=this,s.value=this.getvalue("decimal"),s.text=this.numberInput.val(),c.args=s,e=this.host.trigger(c),u=this,this.inputMode=="textbox")return e;if(this.inputMode!="simple"){if(t==4){if(h||this.disabled)return!1;e=u._handleKeyDown(i,r)}else if(t==5)(h||this.disabled)&&(e=!1);else if(t==6){if(h||this.disabled)return!1;e=u._handleKeyPress(i,r)}}else if(t==4||t==5||t==6){if(n.jqx.mobile.isTouchDevice()||this.touchMode===!0)return!0;if(h||this.disabled)return!1;var p=String.fromCharCode(r),w=parseInt(p),o=!0;if(i.ctrlKey||i.shiftKey||r>=65&&r<=90&&(o=!1),t==6&&n.jqx.browser.opera!=undefined&&r==8)return!1;if(o){if(t==4&&(o=u._handleSimpleKeyDown(i,r)),(r==189||r==45||r==109||r==173)&&(a=u._selection(),t==4&&(v=u.getvalue("negative"),v==!1?u.setvalue("negative",!0):u.setvalue("negative",!1),u._parseDecimalInSimpleMode(),u._setSelectionStart(a.start),o=!1)),!n.jqx.browser.msie&&(f=i,f.ctrlKey&&r==99||f.ctrlKey&&r==67||f.ctrlKey&&r==122||f.ctrlKey&&r==90||f.ctrlKey&&r==118||f.ctrlKey&&r==86||f.shiftKey&&r==45))return t==6&&n.jqx.browser.webkit&&u._handleSimpleKeyDown(i,r),!1;if(i.ctrlKey&&r==97||i.ctrlKey&&r==65)return!0;if(t==6&&o)return this._isSpecialKey(r)}return o}return e},GetSelectionInValue:function(n,t,r,u){var f=0,e,o;for(i=0;i<t.length;i++){if(i>=n)break;e=t.substring(i,i+1),o=!isNaN(parseInt(e)),(o||u&&t.substring(i,i+1)==r)&&f++}return f},GetSelectionLengthInValue:function(n,t,r,u){var f=0,e,o;for(i=0;i<r.length;i++){if(i>=n+t)break;e=r.substring(i,i+1),o=!isNaN(parseInt(e)),(t>0&&i>=n&&o||i>=n&&r[i].toString()==u)&&f++}return f},GetInsertTypeByPositionInValue:function(n,t,i,r){var u="before",f=this.GetValueString(i,t,r),e=this.GetDigitsToSeparator(0,f,t);return n>e&&(u="after"),u},RemoveRange:function(n,t,i,r,u,f){var d=this.digits,c=n,l=t,a=0,g=this.decimal,nt=this._selection(),i=this.numberInput.val(),r=this.decimalSeparator,v=r!="",s,p,w,o,e,h,b,y,k;if(l==0&&this.ValueString.length<this.decimalPossibleChars-1)return a;for(s=this.GetSeparatorPositionInText(r,i),u||(s=this.GetSeparatorPositionInText(r,i)),s<0&&!v&&i.length>1&&(s=i.length),s==-1&&(s=i.length),p=v?1:0,t<2&&f==!0&&(w=this.ValueString.length-this.decimalDigits-p,w==d&&n+t<s&&l++),o="",e=0;e<i.length;e++){if(e<c||e>=c+l){o+=i.substring(e,e+1);continue}else if(h=i.substring(e,e+1),h==r){o+=r;continue}else if(h=i.substring(e,e+1),e>s){o+="0";continue}h=i.substring(e,e+1),b=!isNaN(parseInt(h)),b&&a++}return o.length==0&&(o="0"),u?this.numberInput.val(o):this.ValueString=o,y=o.substring(0,1),y==r&&isNaN(parseInt(y))&&(k="0"+o,o=k),this.ValueString=this.GetValueString(o,r,v),this.decimal=this.ValueString,this._parseDecimalInSimpleMode(),this._setSelectionStart(c),a},InsertDigit:function(n,t){var i,e,k,d,p,o,s,h,c,w;typeof this.digits!="number"&&(this.digits=parseInt(this.digits)),typeof this.decimalDigits!="number"&&(this.decimalDigits=parseInt(this.decimalDigits));var b=1+this.digits,r=this._selection(),a=this.getvalue("negative"),v=!1;r.start==0&&this.symbol!=""&&this.symbolPosition=="left"&&(this._setSelectionStart(r.start+1),r=this._selection(),v=!0),(a&&v||a&&!v&&r.start==0)&&(this._setSelectionStart(r.start+1),r=this._selection());var g=this.numberInput.val().substring(r.start,r.start+1),y=this.numberInput.val(),u=this.decimalSeparator,f=u!=""&&this.decimalDigits>0;if(g==this.symbol&&this.symbolPosition=="right")if(this.decimalDigits==0){if(this.ValueString=this.GetValueString(y,u,f),this.ValueString.length>=b)return}else return;this.ValueString=this.GetValueString(y,u,f),i=this.ValueString,this.decimalDigits>0&&t>=i.length&&(t=i.length-1),e="",t<i.length&&(e=i.substring(t,t+1));var l=!1,nt=this.GetInsertTypeByPositionInValue(t,u,y,f);if(nt=="after"&&(l=!0),k=f?1:0,e!=u&&this.ValueString.length-this.decimalDigits-k>=b-1&&(l=!0),d=!1,p=f?1:0,l||!this.ValueString||!(this.ValueString.length>=this.digits+this.decimalDigits+p)){if(l&&e!=u){if(d&&t++,o=i.substring(0,t),o.length==i.length&&this.ValueString.length>=this.digits+this.decimalDigits+p)return;s=n,h="",t+1<i.length&&(h=i.substring(t+1)),c=o+s+h,this.ValueString=c}else{var o=i.substring(0,t),s=n,h=i.substring(t),c=o+s+h;i.substring(0,1)=="0"&&(c=s+i.substring(1),e==u&&(this._setSelectionStart(r.start-1),r=this._selection())),this.ValueString=c}this.decimal=a?-this.ValueString:this.ValueString,this._parseDecimalInSimpleMode(),w=r.start,w+=1,this._setSelectionStart(w),this.value=this.decimal,this._raiseEvent(0,this.value),this._raiseEvent(1,this.numberInput.val())}},GetStringToSeparator:function(n,t,i){var f=t,r=this.GetSeparatorPositionInText(t,n),u=n.subString(0,r);return this.GetValueString(u,t,i)},GetSeparatorPositionInText:function(n,t){var r=-1;for(i=0;i<t.length;i++)if(t.substring(i,i+1)==n){r=i;break}return r},GetValueString:function(n,t){for(var u="",r,f,i=0;i<n.length;i++)r=n.substring(i,i+1),f=!isNaN(parseInt(r)),f&&(u+=r),r==t&&(u+=t);return u},Backspace:function(){var n=this._selection(),i=this._selection(),r=this.numberInput.val(),t,u;(n.start!=0||n.length!=0)&&(this.isBackSpace=!0,t=r.substring[(n.start,n.start+1)],u=!isNaN(parseInt(t)),n.start>0&&n.length==0&&(this._setSelectionStart(n.start-1),n=this._selection()),this.Delete(),this._setSelectionStart(i.start-1),this.isBackSpace=!1)},Delete:function(){var n=this._selection(),u=this.numberInput.val(),f=n.start,t=n.length,i,r;t=Math.max(t,1),this.ValueString=this.GetValueString(u,this.decimalSeparator,this.decimalSeparator!=""),this.RemoveRange(n.start,t,this.ValueString,".",!1),i=this.ValueString.substring(0,1),r=!isNaN(parseInt(i)),r||(this.ValueString="0"+this.ValueString),this.decimal=this.ValueString,this._parseDecimalInSimpleMode(),this._setSelectionStart(f),this.value=this.decimal,this._raiseEvent(0,this.value),this._raiseEvent(1,this.numberInput.val())},insertsimple:function(n){var i=this._selection(),r=this.numberInput.val(),f,t;if(i.start!=r.length||!(this.decimalDigits>0)){f=this.decimal,t=this.decimalSeparator,this.ValueString=this.GetValueString(r,t,t!="");var u=this.GetSelectionInValue(i.start,r,t,t!=""),e=this.GetSelectionLengthInValue(i.start,i.length,r,t),o=this.GetDigitsToSeparator(0,this.ValueString,t);this.decimalDigits>0&&u>=this.ValueString.length&&u--,this.RemoveRange(i.start,e,this.ValueString,t,!1,!0),this.InsertDigit(n,u,i)}},GetDigitsToSeparator:function(n,t,r){if(r==undefined&&(r="."),t.indexOf(r)<0)return t.length;for(i=0;i<t.length;i++)if(t.substring(i,i+1)==r){n=i;break}return n},_handleSimpleKeyDown:function(t,i){var r=this._selection(),e,o,l,h,u,s,f,y,a;if(r.start>=0&&r.start<this.items.length&&(s=String.fromCharCode(i)),this.rtl&&i==37)return e=t.shiftKey,o=e?1:0,e?this._setSelection(r.start+1-o,r.start+r.length+1):this._setSelection(r.start+1-o,r.start+1),!1;if(this.rtl&&i==39)return e=t.shiftKey,o=e?1:0,e?this._setSelection(r.start-1,r.length+o+r.start-1):this._setSelection(r.start-1,r.start-1),!1;if(i==8)return this.Backspace(),!1;if(i==190||i==110)return l=this.GetSeparatorPositionInText(this.decimalSeparator,this.numberInput.val()),this._setSelectionStart(l+1),!1;if(i==188){for(h=this.numberInput.val(),u=r.start;u<h.length;u++)if(h[u]==this.groupSeparator){this._setSelectionStart(1+u);break}return!1}if(t.ctrlKey&&i==99||t.ctrlKey&&i==67){var r=this._selection(),c="",v=this.numberInput.val();if(r.start>0||r.length>0)for(u=r.start;u<r.end;u++)c+=v.substring(u,u+1);return n.jqx.browser.msie&&window.clipboardData.setData("Text",c),this.savedText=c,!1}if(t.ctrlKey&&i==122||t.ctrlKey&&i==90)return!1;if(t.ctrlKey&&i==118||t.ctrlKey&&i==86||t.shiftKey&&i==45){if(this.savedText!=null&&this.savedText.length>0)for(u=0;u<this.savedText.length;u++)f=parseInt(this.savedText.substring(u,u+1)),isNaN(f)||this.insertsimple(f);return!1}return(s=String.fromCharCode(i),f=parseInt(s),i>=96&&i<=105&&(f=i-96,i=i-48),!isNaN(f))?(y=this,this.insertsimple(f),!1):i==46?(this.Delete(),!1):i==38?(this.spinUp(),!1):i==40?(this.spinDown(),!1):(a=this._isSpecialKey(i),!n.jqx.browser.mozilla)?!0:a},_getEditRange:function(){var n=0,t=0;for(i=0;i<this.items.length;i++)if(this.items[i].canEdit){n=i;break}for(i=this.items.length-1;i>=0;i--)if(this.items[i].canEdit){t=i;break}return{start:n,end:t}},_getVisibleItems:function(){var n=[],t=0;for(i=0;i<this.items.length;i++)this.items[i].character.toString().length>0&&(n[t]=this.items[i],t++);return n},_hasEmptyVisibleItems:function(){var n=this._getVisibleItems();for(i=0;i<n.length;i++)if(n[i].canEdit&&n[i].character==this.promptChar)return!0;return!1},_getFirstVisibleNonEmptyIndex:function(){var n=this._getVisibleItems();for(i=0;i<n.length;i++)if(n[i].canEdit&&n[i].character!=this.promptChar)return i},_handleMouse:function(){var t=this._selection(),n;t.length<=1&&(n=this._getFirstVisibleNonEmptyIndex(),t.start<n&&this._setSelectionStart(n))},_insertKey:function(t){var e,l,o,f,r,s,h;if(this.numberInput[0].focus(),e=String.fromCharCode(t),l=parseInt(e),!isNaN(l)){for(o=0,i=0;i<this.items.length;i++)this.items[i].character.length==0&&o++;if(f=this._selection(),r=this,f.start>=0&&f.start<=this.items.length){s=!1,h=this._getFirstVisibleNonEmptyIndex(),f.start<h&&f.length==0&&(isNaN(e)&&e!=" "||(this._setSelectionStart(h),f=this._selection()));var a=this._getFirstEditableItemIndex(),c=this._getLastEditableItemIndex(),u=this._getVisibleItems();n.each(u,function(n){var a,i,k,w,d,t,y,l,h,b,g,v;if((!(f.start>n)||n==u.length-1)&&(a=u[n],n>c&&(a=u[c]),!isNaN(e)&&e!=" ")&&a.canEdit&&(i=r._getSeparatorPosition(),r._match(e,a.regex))){if(!s&&f.length>0){for(j=f.start+o;j<f.end+o;j++)r.items[j].canEdit&&(r.items[j].character=j>i?"0":r.promptChar);h=r._getString(),s=!0}if(i=r._getSeparatorPosition(),k=r._hasEmptyVisibleItems(),f.start<=i&&k){for(w=n,r.decimalSeparatorPosition==-1&&f.start==i&&(w=n+1),t="",p=0;p<w;p++)u[p].canEdit&&u[p].character!=r.promptChar&&(t+=u[p].character);for(t+=e,l=r.decimal<1?1:0,f.start==i&&r.decimalSeparatorPosition!=-1&&(t+=r.decimalSeparator,l=0),p=w+l;p<u.length;p++)u[p].character==r.decimalSeparator&&u[p].isSeparator?t+=u[p].character:u[p].canEdit&&u[p].character!=r.promptChar&&(t+=u[p].character);r.decimalSeparator!="."&&(t=r._parseDecimalValue(t)),t=parseFloat(t).toString(),t=new Number(t),t=t.toFixed(r.decimalDigits),r.decimalSeparator!="."&&(t=r._parseDecimalValueToEditorValue(t)),r.setvalue("decimal",t),h=r._getString(),f.end<i?r._setSelectionStart(f.end+l):r._setSelectionStart(f.end),f.length>=1&&r._setSelectionStart(f.end),f.length==r.numberInput.val().length&&(v=r._moveCaretToDecimalSeparator(),d=r.decimalSeparatorPosition>=0?1:0,r._setSelectionStart(v-d))}else if(f.start<i||f.start>i){if(r.numberInput.val().length==f.start&&r.decimalSeparatorPosition!=-1||r.numberInput.val().length==f.start&&r.decimalSeparatorPosition==-1&&!k)return!1;for(t="",y=!1,p=0;p<n;p++)u[p].canEdit&&u[p].character!=r.promptChar&&(t+=u[p].character),u[p].character==r.decimalSeparator&&u[p].isSeparator&&(t+=u[p].character,y=!0);for(t+=e,l=r.decimal<1?1:0,y||f.start!=i-1||(t+=r.decimalSeparator,y=!0),p=n+1;p<u.length;p++)!y&&u[p].character==r.decimalSeparator&&u[p].isSeparator?t+=u[p].character:u[p].canEdit&&u[p].character!=r.promptChar&&(t+=u[p].character);if(r.setvalue("decimal",t),h=r._getString(),r.decimalSeparatorPosition<0&&a==u[c])return r._setSelectionStart(n),!1;b=h.indexOf(r.symbol),g=r.getvalue("negative")?1:0,b<=g&&(b=h.length),f.start<b?r._setSelectionStart(n+1):r._setSelectionStart(n),f.length>=1,f.length==r.numberInput.val().length&&(v=r._moveCaretToDecimalSeparator(),r._setSelectionStart(v-1))}return!1}})}}},_handleKeyPress:function(t,i){var r=this._selection(),u=this,f;return t.ctrlKey&&i==97||t.ctrlKey&&i==65?!0:i==8?(r.start>0&&u._setSelectionStart(r.start),!1):i==46?(r.start<this.items.length&&u._setSelectionStart(r.start),!1):((i==45||i==173||i==109||i==189)&&(f=this.getvalue("negative"),f==!1?this.setvalue("negative",!0):this.setvalue("negative",!1)),n.jqx.browser.msie&&this._insertKey(i),this._isSpecialKey(i))},_deleteSelectedText:function(){var r=this._selection(),t="",f=this._getSeparatorPosition(),n=this._getVisibleItems(),u=this._getHiddenPrefixCount();for(this.numberInput.val().length==r.start&&r.length==0&&(this._setSelection(r.start,r.start+1),r=this._selection()),i=0;i<r.start;i++)n[i].canEdit&&n[i].character!=this.promptChar?t+=n[i].character:n[i].canEdit||this.decimalSeparatorPosition==-1||n[i]!=n[this.decimalSeparatorPosition-u]||(t.length==0&&(t="0"),t+=n[i].character);for(i=r.start;i<r.end;i++)i>f&&this.decimalSeparatorPosition!=-1?n[i].canEdit&&n[i].character!=this.promptChar&&(t+="0"):n[i].canEdit||this.decimalSeparatorPosition==-1||n[i]!=n[this.decimalSeparatorPosition-u]||(t.length==0&&(t="0"),t+=n[i].character);for(i=r.end;i<n.length;i++)n[i].canEdit&&n[i].character!=this.promptChar?t+=n[i].character:n[i].canEdit||this.decimalSeparatorPosition==-1||n[i]!=n[this.decimalSeparatorPosition-u]||(t.length==0&&(t="0"),t+=n[i].character);return this.setvalue("decimal",t),r.length>0},_restoreInitialState:function(){var n=parseInt(this.decimalDigits);for(n>0&&(n+=2),k=this.items.length-1;k>this.items.length-1-n;k--)this.items[k].canEdit&&this.items[k].character==this.promptChar&&(this.items[k].character=0)},clear:function(){this.setDecimal(0)},clearDecimal:function(){if(this.inputMode=="textbox"){this.numberInput.val();return}for(var n=0;n<this.items.length;n++)this.items[n].canEdit&&(this.items[n].character=this.promptChar);this._restoreInitialState()},_saveSelectedText:function(){var r=this._selection(),u="",t=this._getVisibleItems();if(r.start>0||r.length>0)for(i=r.start;i<r.end;i++)t[i].canEdit&&t[i].character!=this.promptChar?u+=t[i].character:t[i].isSeparator&&(u+=t[i].character);return n.jqx.browser.msie&&window.clipboardData.setData("Text",u),u},_pasteSelectedText:function(){var f=this._selection(),i,e,o,t,r,u;if((this.selectedText=n.data(document.body,"jqxSelection"),!window.clipboardData||(i=window.clipboardData.getData("Text"),i==this.selectedText||!(i.length>0)||(this.selectedText=window.clipboardData.getData("Text"),this.selectedText!=null&&this.selectedText!=undefined)))&&(e=f.start,o=this._getVisibleItems(),this.selectedText!=null))for(t=0;t<this.selectedText.length;t++)r=parseInt(this.selectedText[t]),isNaN(r)||(u=48+r,this._insertKey(u))},_getHiddenPrefixCount:function(){var n=0;if(this.negative||n++,this.symbolPosition=="left")for(i=0;i<this.symbol.length;i++)this.symbol.substring(i,i+1)==""&&n++;return n},_getEditableItem:function(){var n=this._selection();for(i=0;i<this.items.length;i++)if(i<n.start&&this.items[i].canEdit&&this.items[i].character!=this.promptChar)return this.items[i];return null},_getEditableItems:function(){var n=[],t=0;for(i=0;i<this.items.length;i++)this.items[i].canEdit&&(n[t]=this.items[i],t++);return n},_getValidSelectionStart:function(){for(i=this.items.length-1;i>=0;i--)if(this.items[i].canEdit&&this.items[i].character!=this.promptChar)return i;return-1},_getEditableItemIndex:function(){var r=this._selection(),f=this._getHiddenPrefixCount(),n=this._getVisibleItems(),u=r.start,t=-1;for(i=0;i<u;i++)i<n.length&&n[i].canEdit&&(t=i+f);if(t==-1&&r.length>0)for(u=r.end,i=0;i<u;i++)if(i<n.length&&n[i].canEdit){t=i+f;break}return t},_getEditableItemByIndex:function(n){for(k=0;k<this.items.length;k++)if(k>n&&this.items[k].canEdit&&this.items[k].character!=this.promptChar)return k;return-1},_getFirstEditableItemIndex:function(){var n=this._getVisibleItems();for(m=0;m<n.length;m++)if(n[m].character!=this.promptChar&&n[m].canEdit&&n[m].character!="0")return m;return-1},_getLastEditableItemIndex:function(){var n=this._getVisibleItems();for(m=n.length-1;m>=0;m--)if(n[m].character!=this.promptChar&&n[m].canEdit)return m;return-1},_moveCaretToDecimalSeparator:function(){for(i=this.items.length-1;i>=0;i--)if(this.items[i].character==this.decimalSeparator&&this.items[i].isSeparator)return this.negative?(this._setSelectionStart(i+1),i):(this._setSelectionStart(i),i);return this.numberInput.val().length},_handleBackspace:function(){var n=this._selection(),u=this._getHiddenPrefixCount(),t=this._getEditableItemIndex()-u,i,f,r;t>=0?(n.length==0&&t!=-1&&this._setSelection(t,t+1),i=n.start>this._getSeparatorPosition()+1&&this.decimalSeparatorPosition>0,i&&(n=this._selection()),f=this._deleteSelectedText(),n.length<1||i?this._setSelectionStart(n.start):n.length>=1&&this._setSelectionStart(n.end),n.length==this.numberInput.val().length&&(r=this._moveCaretToDecimalSeparator(),this._setSelectionStart(r-1))):this._setSelectionStart(n.start)},_handleKeyDown:function(t,r){var u=this._selection(),e,v,s,o,h,l,c,f,a;if(this.rtl&&r==37)return e=t.shiftKey,f=e?1:0,e?this._setSelection(u.start+1-f,u.start+u.length+1):this._setSelection(u.start+1-f,u.start+1),!1;if(this.rtl&&r==39)return e=t.shiftKey,f=e?1:0,e?this._setSelection(u.start-1,u.length+f+u.start-1):this._setSelection(u.start-1,u.start-1),!1;if(t.ctrlKey&&r==97||t.ctrlKey&&r==65)return!0;if(t.ctrlKey&&r==120||t.ctrlKey&&r==88)return this.selectedText=this._saveSelectedText(t),n.data(document.body,"jqxSelection",this.selectedText),this._handleBackspace(),!1;if(t.ctrlKey&&r==99||t.ctrlKey&&r==67)return this.selectedText=this._saveSelectedText(t),n.data(document.body,"jqxSelection",this.selectedText),!1;if(t.ctrlKey&&r==122||t.ctrlKey&&r==90)return!1;if(t.ctrlKey&&r==118||t.ctrlKey&&r==86||t.shiftKey&&r==45)return this._pasteSelectedText(),!1;if(u.start>=0&&u.start<this.items.length&&(o=String.fromCharCode(r),v=this.items[u.start]),r==8)return this._handleBackspace(),!1;if(r==190||r==110)return this._moveCaretToDecimalSeparator(),!1;if(r==188){for(s=this.numberInput.val(),i=u.start;i<s.length;i++)if(s[i]==this.groupSeparator){this._setSelectionStart(1+i);break}return!1}return n.jqx.browser.msie==null&&(o=String.fromCharCode(r),h=parseInt(o),r>=96&&r<=105&&(h=r-96,r=r-48),!isNaN(h))?(l=this,l._insertKey(r),!1):r==46?(c=this._getVisibleItems(),u.start<c.length&&(f=c[u.start].canEdit==!1?2:1,u.length==0&&this._setSelection(u.start+f,u.start+f+u.length),this._handleBackspace(),new Number(this.decimal)<1||u.start>this._getSeparatorPosition()?this._setSelectionStart(u.end+f):u.start+1<this.decimalSeparatorPosition&&this._setSelectionStart(u.end+f)),!1):r==38?(this.spinUp(),!1):r==40?(this.spinDown(),!1):(a=this._isSpecialKey(r),!n.jqx.browser.mozilla)?!0:a},_isSpecialKey:function(n){return n!=8&&n!=9&&n!=13&&n!=35&&n!=36&&n!=37&&n!=39&&n!=27&&n!=46?!1:!0},_selection:function(){var n,t,r,u,i;try{return"selectionStart"in this.numberInput[0]?(n=this.numberInput[0],i=n.selectionEnd-n.selectionStart,{start:n.selectionStart,end:n.selectionEnd,length:i,text:n.value}):(t=document.selection.createRange(),t==null)?{start:0,end:n.value.length,length:0}:(r=this.numberInput[0].createTextRange(),u=r.duplicate(),r.moveToBookmark(t.getBookmark()),u.setEndPoint("EndToStart",r),i=t.text.length,{start:u.text.length,end:u.text.length+t.text.length,length:i,text:t.text})}catch(f){return{start:0,end:0,length:0}}},_setSelection:function(t,i){var u,r;if(this._disableSetSelection!=!0&&(u=n.jqx.mobile.isTouchDevice(),!u&&this.touchMode!=!0))try{"selectionStart"in this.numberInput[0]?(this.numberInput[0].focus(),this.numberInput[0].setSelectionRange(t,i)):(r=this.numberInput[0].createTextRange(),r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r.select())}catch(f){}},_setSelectionStart:function(t){this._setSelection(t,t),n.data(this.numberInput,"selectionstart",t)},_render:function(t){var h=parseInt(this.host.css("border-left-width")),c=parseInt(this.host.css("border-left-width")),s=parseInt(this.host.css("border-left-width")),l=parseInt(this.host.css("border-left-width")),r,e,f,i,o,u;this.numberInput.css("padding-top","0px"),this.numberInput.css("padding-bottom","0px"),this.host.height(this.height),this.host.width(this.width),r=this.host.width(),e=this.host.height(),this.numberInput.css({"border-left-width":0,"border-right-width":0,"border-bottom-width":0,"border-top-width":0}),this.numberInput.css("text-align",this.textAlign),f=this.numberInput.css("font-size"),this.numberInput.css("height",parseInt(f)+4+"px"),this.numberInput.css("width",r-2),i=e-2*s-parseInt(f)-2,isNaN(i)&&(i=0),i<0&&(i=0),this.spinButtons&&this.spincontainer&&(r-=parseInt(this.spinButtonsWidth-2),o=n.jqx.mobile.isTouchDevice(),o||this.touchMode===!0?(this.spincontainer.width(2*this.spinButtonsWidth),r-=this.spinButtonsWidth,this.upbutton.height("100%"),this.downbutton.height("100%"),this.downbutton.css("float","left"),this.upbutton.css("float","right"),this.upbutton.width(this.spinButtonsWidth),this.downbutton.width(1+this.spinButtonsWidth)):(this.spincontainer.width(this.spinButtonsWidth),this.upbutton.width(this.spinButtonsWidth+2),this.downbutton.width(this.spinButtonsWidth+2),this.upbutton.height("50%"),this.downbutton.height("50%"),this.spincontainer.width(this.spinButtonsWidth)),this._upArrow.height("100%"),this._downArrow.height("100%"),this.numberInput.css("width",r-6),this.numberInput.css("margin-right","2px")),u=i/2,n.jqx.browser.msie&&n.jqx.browser.version<8&&(u=i/4),this.numberInput.css("padding-left","0px"),this.numberInput.css("padding-right","0px"),this.numberInput.css("padding-top",Math.round(u)+"px"),this.numberInput.css("padding-bottom",Math.round(u)+"px"),(t==undefined||t==!0)&&(this.numberInput.val(this._getString()),this.inputMode!="advanced"&&this._parseDecimalInSimpleMode())},destroy:function(){this._removeHandlers(),this.host.remove()},inputValue:function(n){return n===undefined?this._value():(this.propertyChangedHandler(this,"value",this._value,n),this._refreshValue(),this)},_value:function(){return this.numberInput.val()},val:function(n){if(n!=undefined&&typeof n!="object")this.setDecimal(n);else return this.getDecimal()},getDecimal:function(){if(this.inputMode=="simple"&&(this._parseDecimalInSimpleMode(!1),this.decimal=this._getDecimalInSimpleMode(this.decimal)),this.decimal=="")return 0;var n=this.getvalue("negative");return n&&this.decimal>0?-parseFloat(this.decimal):parseFloat(this.decimal)},setDecimal:function(n){var u=n,t,i,r;this.decimalSeparator!="."?(n=n.toString(),t=n.indexOf("."),t!=-1&&(i=n.substring(0,t),r=n.substring(t+1),n=i+this.decimalSeparator+r),n<0?this.setvalue("negative",!0):this.setvalue("negative",!1),this._setDecimal(n)):(n<0?this.setvalue("negative",!0):this.setvalue("negative",!1),this._setDecimal(Math.abs(n))),u==null&&this.numberInput.val("")},_setDecimal:function(n){var s,t,e,c,l,a,n;(n==null||n==undefined)&&(n=0),n.toString().indexOf("e")!=-1&&(n=0),this.clearDecimal();var u=n.toString(),i="",o="",h=!0;for(u.length==0&&(u="0"),t=0;t<u.length;t++){if(u.substring(t,t+1)==this.decimalSeparator){h=!1;continue}h?i+=u.substring(t,t+1):o+=u.substring(t,t+1)}i.length>0&&(i=parseFloat(i).toString()),s=this.digits,s<i.length&&(i=i.substr(0,s));var r=0,f=this._getSeparatorPosition(),v=this._getHiddenPrefixCount();for(f=f+v,t=f;t>=0;t--)t<this.items.length&&this.items[t].canEdit&&r<i.length&&(this.items[t].character=i.substring(i.length-r-1,i.length-r),r++);for(r=0,t=f;t<this.items.length;t++)this.items[t].canEdit&&r<o.length&&(this.items[t].character=o.substring(r,r+1),r++);this._refreshValue(),this.decimalSeparator=="."?this.ValueString=new Number(n).toFixed(this.decimalDigits):(e=n.toString().indexOf(this.decimalSeparator),e>0?(c=n.toString().substring(0,e),l=c+"."+n.toString().substring(e+1),this.ValueString=new Number(l).toFixed(this.decimalDigits)):this.ValueString=new Number(n).toFixed(this.decimalDigits)),this.inputMode!="advanced"&&(this._parseDecimalInSimpleMode(),this._raiseEvent(1,this.ValueString)),this.inputMode=="textbox"&&(this.decimal=this.ValueString,a=this.getvalue("negative"),a&&(this.decimal="-"+this.ValueString)),n=this.val(),n<this.min||n>this.max?this.host.addClass("jqx-input-invalid"):this.host.removeClass("jqx-input-invalid")},_getSeparatorPosition:function(){var n=this._getHiddenPrefixCount();return this.decimalSeparatorPosition>0?this.decimalSeparatorPosition-n:this.items.length-n},_setTheme:function(){this.host.removeClass(),this.host.addClass(this.toThemeProperty("jqx-input")),this.host.addClass(this.toThemeProperty("jqx-rc-all")),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-widget-content")),this.host.addClass(this.toThemeProperty("jqx-numberinput")),this.spinButtons&&(this.downbutton.removeClass(),this.upbutton.removeClass(),this.downbutton.addClass(this.toThemeProperty("jqx-scrollbar-button-state-normal")),this.upbutton.addClass(this.toThemeProperty("jqx-scrollbar-button-state-normal")),this._upArrow.removeClass(),this._downArrow.removeClass(),this._upArrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")),this._downArrow.addClass(this.toThemeProperty("jqx-icon-arrow-down"))),this.numberInput.removeClass(),this.numberInput.addClass(this.toThemeProperty("jqx-input-content"))},propertyChangedHandler:function(t,r,u,f){var s,e,o;if((r=="digits"||r=="groupSize"||r=="decimalDigits")&&f<0)throw new Exception(this.invalidArgumentExceptions[0]);if(r==="theme"&&n.jqx.utilities.setTheme(u,f,t.host),r=="digits"&&f!=u&&(t.digits=parseInt(f)),(r=="min"||r=="max")&&(n.jqx.aria(t,"aria-value"+r,f.toString()),t._refreshValue()),r=="decimalDigits"&&f!=u&&(t.decimalDigits=parseInt(f)),(r=="decimalSeparator"||r=="digits"||r=="symbol"||r=="symbolPosition"||r=="groupSize"||r=="groupSeparator"||r=="decimalDigits"||r=="negativeSymbol")&&(s=t.decimal,r=="decimalSeparator"&&f==""&&(f=" "),u!=f&&(e=t._selection(),t.items=[],t._initializeLiterals(),t.value=t._getString(),t._refreshValue(),t._setDecimal(s))),r=="rtl"&&(t.rtl?(t.spincontainer&&(t.spincontainer.css("float","right"),t.spincontainer.css("border-right-width","1px")),t.numberInput.css("float","right")):(t.spincontainer&&(t.spincontainer.css("float","right"),t.spincontainer.css("border-right-width","1px")),t.numberInput.css("float","left"))),r=="spinButtons"&&(t.spincontainer?(f?t.spincontainer.css("display","block"):t.spincontainer.css("display","none"),t._render()):t._spinButtons()),r==="touchMode"&&(t.inputMode="textbox",t.spinMode="simple",t.render()),r=="negative"&&t.inputMode=="advanced"&&(e=t._selection(),o=0,f?(t.items[0].character=t.negativeSymbol[0],o=1):(t.items[0].character="",o=-1),t._refreshValue(),t.isInitialized&&t._setSelection(e.start+o,e.end+o)),r=="decimal"&&(t.value=f,t.setDecimal(f)),r==="value"&&(t.value=f,t.setDecimal(f),t._raiseEvent(1,f)),r=="textAlign"&&(t.textAlign=f,t._render()),r=="disabled"&&(t.numberInput.attr("disabled",f),t.disabled?t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")):t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),n.jqx.aria(t,"aria-disabled",f.toString())),r=="readOnly"&&(t.readOnly=f),r=="promptChar"){for(i=0;i<t.items.length;i++)t.items[i].character==t.promptChar&&(t.items[i].character=f);t.promptChar=f}r=="width"?(t.width=f,t._render()):r=="height"&&(t.height=f,t._render())},_value:function(){return this.value},_refreshValue:function(){var n=this.value,i,t,r,u;if(this.inputMode!=="textbox"){for(this.value=this._getString(),n=this.value,i="",t=0;t<this.items.length;t++)r=this.items[t],r.canEdit&&r.character!=this.promptChar&&(i+=r.character),t==this.decimalSeparatorPosition&&(i+=".");this.decimal=i,u=!1,this.oldValue!==n&&(this.oldValue=n,this._raiseEvent(0,n),u=!0),this.inputMode!="simple"&&(this.numberInput.val(n),u&&this._raiseEvent(1,n)),n==null&&this.numberInput.val("")}}})})(jQuery);
//# sourceMappingURL=jqxnumberinput.min.js.map