(function(n){n.jqx.jqxWidget("jqxMaskedInput","",{}),n.extend(n.jqx._jqxMaskedInput.prototype,{defineInstance:function(){this.value=null,this.mask="99999",this.width=null,this.height=25,this.textAlign="left",this.readOnly=!1,this.cookies=!1,this.promptChar="_",this.inputMode="advanced",this.rtl=!1,this.disabled=!1,this.events=["valuechanged","textchanged","mousedown","mouseup","keydown","keyup","keypress","change"],this.aria={"aria-valuenow":{name:"value",type:"string"},"aria-disabled":{name:"disabled",type:"boolean"}}},createInstance:function(){this.render()},render:function(){var i,r,t,u;if(this.host.attr({role:"textbox"}),this.host.attr("data-role","input"),i=this.host.attr("value"),i!=undefined&&i!=""&&(this.value=i),n.jqx.aria(this),n.jqx.aria(this,"aria-multiline",!1),n.jqx.aria(this,"aria-readonly",this.readOnly),this.host.addClass(this.toThemeProperty("jqx-input")),this.host.addClass(this.toThemeProperty("jqx-rc-all")),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-widget-content")),maskEditor=this,this.element.nodeName.toLowerCase()=="div"?(this.element.innerHTML="",this.maskbox=n("<input autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textarea'/>").appendTo(this.host)):(this.maskbox=this.host,this.maskbox.attr("autocomplete","off"),this.maskbox.attr("autocorrect","off"),this.maskbox.attr("autocapitalize","off"),this.maskbox.attr("spellcheck",!1)),this.maskbox.addClass(this.toThemeProperty("jqx-reset")),this.maskbox.addClass(this.toThemeProperty("jqx-input-content")),this.maskbox.addClass(this.toThemeProperty("jqx-widget-content")),r=this.host.attr("name"),r||(r=this.element.id),this.maskbox.attr("name",r),this.rtl&&this.maskbox.addClass(this.toThemeProperty("jqx-rtl")),t=this,this.propertyChangeMap.disabled=function(n,i,r,u){u?n.maskbox.addClass(t.toThemeProperty("jqx-input-disabled")):n.maskbox.removeClass(t.toThemeProperty("jqx-input-disabled"))},this.disabled&&(this.maskbox.addClass(this.toThemeProperty("jqx-input-disabled")),this.maskbox.attr("disabled",!0),this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))),this.selectedText="",this.self=this,this.oldValue=this._value(),this.items=[],this._initializeLiterals(),this._render(),this.value!=null&&this.inputValue(this.value.toString()),t=this,this.host.parents("form").length>0)this.host.parents("form").on("reset",function(){setTimeout(function(){t.clearValue()},10)});this.addHandlers(),this.cookies&&(u=n.jqx.cookie.cookie("maskedInput."+this.element.id),u&&this.val(u))},addHandlers:function(){var t=this,i,r;n.jqx.mobile.isTouchDevice()&&(this.inputMode="simple"),i="",r=function(n,t){var u=String.fromCharCode(t),f=parseInt(u),i=!0,r;return isNaN(f)||(i=!0,r=this.maskbox.val().toString().length,r>=this._getEditStringLength()&&this._selection().length==0&&(i=!1)),n.ctrlKey||n.shiftKey||t>=65&&t<=90&&(i=!1),i},this.addHandler(this.maskbox,"blur",function(r){if(t.inputMode=="simple")return t._exitSimpleInputMode(r,t,!1,i),!1;t.rtl&&t.maskbox.css("direction","ltr"),t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")),t.maskbox.val()!=i&&(t._raiseEvent(7,r),t.cookies&&n.jqx.cookie.cookie("maskedInput."+t.element.id,t.maskbox.val()))}),this.addHandler(this.maskbox,"focus",function(){if(i=t.maskbox.val(),t.inputMode=="simple")return t.maskbox[0].value=t._getEditValue(),n.data(t.maskbox,"simpleInputMode",!0),!1;t.rtl&&t.maskbox.css("direction","rtl"),t.host.addClass(t.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this.host,"keydown",function(n){var f=t.readOnly,u=n.charCode?n.charCode:n.keyCode?n.keyCode:0,i;return f||t.disabled?!1:t.inputMode!="simple"?(i=t._handleKeyDown(n,u),i||(n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation()),i):r.call(t,n,u)}),this.addHandler(this.host,"keyup",function(n){var i=t.readOnly,u=n.charCode?n.charCode:n.keyCode?n.keyCode:0;return i||t.disabled?!0:t.inputMode=="simple"?r.call(t,n,u):(n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),!1)}),this.addHandler(this.host,"keypress",function(n){var f=t.readOnly,u=n.charCode?n.charCode:n.keyCode?n.keyCode:0,i;return f||t.disabled?!0:t.inputMode=="simple"?r.call(t,n,u):(i=t._handleKeyPress(n,u),i||(n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation()),i)})},focus:function(){try{this.maskbox.focus()}catch(n){}},_exitSimpleInputMode:function(t,i,r,u){var l,e;if(i==undefined&&(i=t.data),i!=null){if(r==undefined){if(t.target!=null&&i.element!=null&&(t.target.id!=undefined&&t.target.id.toString().length>0&&i.host.find("#"+t.target.id).length>0||t.target==i.element))return;var s=i.host.offset(),h=s.left,c=s.top,y=i.host.width(),p=i.host.height(),o=n(t.target).offset();if(o.left>=h&&o.left<=h+y&&o.top>=c&&o.top<=c+p)return}if(!i.disabled&&!i.readOnly&&(l=n.data(i.maskbox,"simpleInputMode"),l!=null)){var a=i.maskbox.val(),v=a.toString(),f=0;for(e=0;e<this.items.length;e++)if(this.items[e].canEdit)if(this._match(v.substring(f,f+1),this.items[e].regex)||v.substring(f,f+1)==="")f++;else return i.maskbox[0].value=u,n.data(i.maskbox,"simpleInputMode",null),!1;return i.inputValue(a,!0),n.data(i.maskbox,"simpleInputMode",null),!1}}},_getString:function(){for(var t="",i,n=0;n<this.items.length;n++)i=this.items[n].character,t+=this.items[n].character==this.promptChar&&this.promptChar!=this.items[n].defaultCharacter?this.items[n].defaultCharacter:i;return t},_initializeLiterals:function(){var e,i,f,o,s,u;if(this.mask==undefined||this.mask==null){this.items=[];return}for(this.mask=this.mask.toString(),e=this.mask.length,i=0;i<e;i++){var n=this.mask.substring(i,i+1),r="",t=!1;if(n=="["){for(f=i;f<e;f++)if(o=this.mask.substring(f,f+1),o=="]")break;r="("+this.mask.substring(i,f+1)+")",i=f,t=!0}n=="#"?(r="(\\d|[+]|[-])",t=!0):n=="9"||n=="0"?(r="\\d",t=!0):n=="$"?t=!1:n=="/"||n==":"?t=!1:n=="A"||n=="a"?(r="\\w",t=!0):n=="c"||n=="C"?(r=".",t=!0):(n=="L"||n=="l")&&(r="\\p{L}",t=!0),s=this,u=function(n,t,i){u.character=n,u.regex=t,u.canEdit=i,u.defaultCharacter=s.promptChar},t?u(this.promptChar,r,t):u(n,r,t),this.items.push(u)}},setRegex:function(n,t,i,r){n!=null&&n!=undefined&&t!=null&&t!=undefined&&n<this.items.length&&(this.items[n].regex=t,i!=null&&i!=undefined&&(this.items[n].canEdit=i),r!=null&&r!=undefined&&(this.items[n].defaultCharacter=r))},_match:function(n,t){var i=new RegExp(t,"i");return i.test(n)},_raiseEvent:function(n,t){var f=this.events[n],i={};i.owner=this;var e=t.charCode?t.charCode:t.keyCode?t.keyCode:0,u=!0,o=this.readOnly,r=new jQuery.Event(f);return r.owner=this,i.value=this.inputValue(),i.text=this.maskedValue(),r.args=i,(n<2||n>6)&&(u=this.host.trigger(r)),u},_handleKeyPress:function(n,t){return this._isSpecialKey(t,n)},_insertKey:function(t){var r=this._selection(),i=this,u,f;r.start>=0&&r.start<this.items.length&&(u=String.fromCharCode(t),f=!1,n.each(this.items,function(n){var o,t,e;if(!(n<r.start)&&(o=i.items[n],o.canEdit)){if(i._match(u,o.regex)){if(!f&&r.length>0){for(t=r.start;t<r.end;t++)i.items[t].canEdit&&(i.items[t].character=i.promptChar);e=i._getString(),i.maskedValue(e),f=!0}return o.character=u,e=i._getString(),i.maskedValue(e),r.start<i.items.length&&i._setSelectionStart(n+1),!1}return!1}}))},_deleteSelectedText:function(){var n=this._selection(),t=!1,r;if(n.start>0||n.length>0){for(i=n.start;i<n.end;i++)i<this.items.length&&this.items[i].canEdit&&this.items[i].character!=this.promptChar&&(this.items[i].character=this.promptChar,t=!0);return r=this._getString(),this.maskedValue(r),t}},_saveSelectedText:function(){var n=this._selection(),t="";if(n.start>0||n.length>0)for(i=n.start;i<n.end;i++)this.items[i].canEdit&&(t+=this.items[i].character);return window.clipboardData.setData("Text",t),t},_pasteSelectedText:function(){var n=this._selection(),t="",r=0,u=n.start,f=window.clipboardData.getData("Text");if(f==this.selectedText||!(f.length>0)||(this.selectedText=f,this.selectedText!=null&&this.selectedText!=undefined)){if(n.start>=0||n.length>0)for(i=n.start;i<this.items.length;i++)this.items[i].canEdit&&r<this.selectedText.length&&(this.items[i].character=this.selectedText[r],r++,u=1+i);t=this._getString(),this.maskedValue(t),u<this.items.length?this._setSelectionStart(u):this._setSelectionStart(this.items.length)}},_handleKeyDown:function(n,t){var r=this._selection(),o,s,f,u,i,e,h;if(t>=96&&t<=105&&(t=t-48),n.ctrlKey&&t==97||n.ctrlKey&&t==65)return!0;if(n.ctrlKey&&t==120||n.ctrlKey&&t==88)return this.selectedText=this._saveSelectedText(n),this._deleteSelectedText(n),!1;if(n.ctrlKey&&t==99||n.ctrlKey&&t==67)return this.selectedText=this._saveSelectedText(n),!1;if(n.ctrlKey&&t==122||n.ctrlKey&&t==90)return!1;if(n.ctrlKey&&t==118||n.ctrlKey&&t==86||n.shiftKey&&t==45)return this._pasteSelectedText(),!1;if(r.start>=0&&r.start<this.items.length&&(o=String.fromCharCode(t),s=this.items[r.start]),t==8){if(r.length==0)for(i=this.items.length-1;i>=0;i--)if(this.items[i].canEdit&&i<r.end&&this.items[i].character!=this.promptChar){this._setSelection(i,i+1);break}return r=this._selection(),f=this._deleteSelectedText(),(r.start>0||r.length>0)&&r.start<=this.items.length&&(f?this._setSelectionStart(r.start):this._setSelectionStart(r.start-1)),!1}if(t==190)for(u=r.start,i=u;i<this.items.length;i++)if(this.items[i].character=="."){this._setSelectionStart(i+1);break}if(t==191)for(u=r.start,i=u;i<this.items.length;i++)if(this.items[i].character=="/"){this._setSelectionStart(i+1);break}if(t==189)for(u=r.start,i=u;i<this.items.length;i++)if(this.items[i].character=="-"){this._setSelectionStart(i+1);break}if(t==46){if(r.length==0)for(i=0;i<this.items.length;i++)if(this.items[i].canEdit&&i>=r.start&&this.items[i].character!=this.promptChar){this._setSelection(i,i+1);break}return e=r,r=this._selection(),h=this._deleteSelectedText(),(r.start>=0||r.length>=0)&&r.start<this.items.length&&(r.length<=1?e.end!=r.end?this._setSelectionStart(r.end):this._setSelectionStart(r.end+1):this._setSelectionStart(r.start)),!1}return this._insertKey(t),this._isSpecialKey(t,n)},_isSpecialKey:function(n,t){return n==189||n==9||n==13||n==35||n==36||n==37||n==39||n==46?!0:n===16&&t.shiftKey||t.ctrlKey?!0:!1},_selection:function(){var n,t,r,u,i;return"selectionStart"in this.maskbox[0]?(n=this.maskbox[0],i=n.selectionEnd-n.selectionStart,{start:n.selectionStart,end:n.selectionEnd,length:i,text:n.value}):(t=document.selection.createRange(),t==null)?{start:0,end:n.value.length,length:0}:(r=this.maskbox[0].createTextRange(),u=r.duplicate(),r.moveToBookmark(t.getBookmark()),u.setEndPoint("EndToStart",r),i=t.text.length,{start:u.text.length,end:u.text.length+t.text.length,length:i,text:t.text})},_setSelection:function(n,t){if("selectionStart"in this.maskbox[0])this.maskbox[0].focus(),this.maskbox[0].setSelectionRange(n,t);else{var i=this.maskbox[0].createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",n),i.select()}},_setSelectionStart:function(n){this._setSelection(n,n)},refresh:function(n){n||this._render()},_render:function(){var s=parseInt(this.host.css("border-left-width")),h=parseInt(this.host.css("border-left-width")),e=parseInt(this.host.css("border-left-width")),o=parseInt(this.host.css("border-left-width")),t=parseInt(this.host.css("height"))-e-o,i=parseInt(this.host.css("width"))-s-h,u,r,f;this.width!=null&&this.width.toString().indexOf("px")!=-1?i=this.width:this.width==undefined||isNaN(this.width)||(i=this.width),this.height!=null&&this.height.toString().indexOf("px")!=-1?t=this.height:this.height==undefined||isNaN(this.height)||(t=this.height),i=parseInt(i),t=parseInt(t),this.maskbox[0]!=this.element&&this.maskbox.css({"border-left-width":0,"border-right-width":0,"border-bottom-width":0,"border-top-width":0}),this.maskbox.css("text-align",this.textAlign),u=this.maskbox.css("font-size"),isNaN(t)||this.maskbox.css("height",parseInt(u)+4+"px"),isNaN(i)||this.maskbox.css("width",i-2),r=parseInt(t)-2*parseInt(e)-2*parseInt(o)-parseInt(u),isNaN(r)&&(r=0),isNaN(t)||this.host.height(t),isNaN(i)||this.host.width(i),this.maskbox[0]!=this.element&&(f=r/2,n.jqx.browser.msie&&n.jqx.browser.version<8&&(f=r/4),this.maskbox.css("padding-right","0px"),this.maskbox.css("padding-left","0px"),this.maskbox.css("padding-top",f),this.maskbox.css("padding-bottom",r/2)),this.maskbox[0].value=this._getString(),this.width&&(this.width.toString().indexOf("%")>=0&&(this.element.style.width=this.width),this.height.toString().indexOf("%")>=0&&(this.element.style.height=this.height))},destroy:function(){this.host.remove()},maskedValue:function(n){return n===undefined?this._value():(this.value=n,this._refreshValue(),this.oldValue!==n&&(this._raiseEvent(1,n),this.oldValue=n,this._raiseEvent(0,n)),this)},_value:function(){return this.maskbox.val()},propertyChangedHandler:function(t,r,u,f){if(this.isInitialized!=undefined&&this.isInitialized!=!1){if(r=="rtl"&&(t.rtl?t.maskbox.addClass(t.toThemeProperty("jqx-rtl")):t.maskbox.removeClass(t.toThemeProperty("jqx-rtl"))),r==="value"&&((f==undefined||f==null)&&(f=""),f===""?this.clear():(f=f.toString(),this.inputValue(f))),r==="theme"&&n.jqx.utilities.setTheme(u,f,this.host),r=="disabled"&&(f?(t.maskbox.addClass(t.toThemeProperty("jqx-input-disabled")),t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")),t.maskbox.attr("disabled",!0)):(t.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),t.host.removeClass(this.toThemeProperty("jqx-input-disabled")),t.maskbox.attr("disabled",!1)),n.jqx.aria(t,"aria-disabled",f)),r=="readOnly"&&(this.readOnly=f),r=="promptChar"){for(i=0;i<t.items.length;i++)t.items[i].character==t.promptChar&&(t.items[i].character=f,t.items[i].defaultCharacter=f);t.promptChar=f}r=="textAlign"&&(t.maskbox.css("text-align",f),t.textAlign=f),r=="mask"&&(t.mask=f,t.items=[],t._initializeLiterals(),t.value=t._getString(),t._refreshValue()),r=="width"?(t.width=f,t._render()):r=="height"&&(t.height=f,t._render())}},_value:function(){return this.value},_getEditStringLength:function(){var n="";for(i=0;i<this.items.length;i++)this.items[i].canEdit&&(n+=this.items[i].character);return n.length},_getEditValue:function(){var n="";for(i=0;i<this.items.length;i++)this.items[i].canEdit&&this.items[i].character!=this.promptChar&&(n+=this.items[i].character);return n},parseValue:function(n){var t;if(n==undefined||n==null)return null;var r=n.toString(),u="",f=0;for(m=0;m<r.length;m++)for(t=r.substring(m,m+1),i=f;i<this.items.length;i++)if(this.items[i].canEdit&&this._match(t,this.items[i].regex)){u+=t,f=i;break}return u},clear:function(){this.clearValue()},clearValue:function(){this.inputValue("",!0)},val:function(n){return n!=undefined&&typeof n!="object"&&this.maskedValue(n),this.maskbox[0].value},inputValue:function(n,t){var u,r,i,f;if(n==undefined||n==null){for(u="",i=0;i<this.items.length;i++)this.items[i].canEdit&&(u+=this.items[i].character);return u}for(r=0,n=n.toString(),i=0;i<this.items.length;i++)this.items[i].canEdit&&(this._match(n.substring(r,r+1),this.items[i].regex)?(this.items[i].character=n.substring(r,r+1),r++):t&&(this.items[i].character=this.promptChar));return f=this._getString(),this.maskedValue(f),this.inputValue()},_refreshValue:function(){for(var t=this.maskedValue(),r=0,i=0;i<this.items.length;i++)t.length>r&&(this.items[i].canEdit&&this.items[i].character!=t[r]&&this._match(t[r],this.items[i].regex)&&t[r].length==1&&(this.items[i].character=t[r]),r++);this.value=this._getString(),t=this.value,this.maskbox[0].value=t,n.jqx.aria(this,"aria-valuenow",t)}})})(jQuery);
//# sourceMappingURL=jqxmaskedinput.min.js.map