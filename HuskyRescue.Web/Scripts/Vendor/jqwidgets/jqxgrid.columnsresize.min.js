(function(n){n.extend(n.jqx._jqxGrid.prototype,{autoresizecolumns:function(t,i){var k,c,d,g,l,b,tt,u,rt,it,w,e,y,p,s,ut,f,r;t!="cells"&&t!="all"&&t!="column"&&(t="all"),k=this.that,c=this.getrows(),this.pageable&&(c=this.dataview.rows,this.groupable&&(c=this.dataview.records)),i=i==undefined?0:parseInt(i),d=c.length,d==undefined&&c!=undefined&&(g=[],n.each(c,function(){g.push(this)}),c=g,d=c.length),l=n("<span><\/span>"),l.addClass(this.toThemeProperty("jqx-widget")),l.addClass(this.toThemeProperty("jqx-grid-cell")),n(document.body).append(l);var o=[],h=[],a=[],v=[],nt=k.host.width();for(k.vScrollBar[0].style.visibility!="hidden"&&(nt-=this.scrollbarsize+5),nt<0&&(nt=0),b=0;b<d;b++)for(tt=c[b],f=0;f<this.columns.records.length;f++)if(r=this.columns.records[f],!r.hidden){if(h[r.displayfield]==undefined&&(h[r.displayfield]=0),a[r.displayfield]==undefined&&(a[r.displayfield]=""),u=tt[r.displayfield],r.cellsformat!=""?n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(u)?u=n.jqx.dataFormat.formatdate(u,r.cellsformat,this.gridlocalization):n.jqx.dataFormat.isNumber(u)&&(u=n.jqx.dataFormat.formatnumber(u,r.cellsformat,this.gridlocalization))):r.cellsrenderer&&(rt=k._defaultcellsrenderer(u,r),it=r.cellsrenderer(b,r.datafield,u,rt,r.getcolumnproperties(),tt),it!=undefined&&(u=n(it).text())),(t==undefined||t=="cells"||t=="all")&&u!=null){var o=u.toString().length,w=u.toString(),e=w.replace(/[^A-Z]/g,"").length;o>h[r.displayfield]&&(h[r.displayfield]=o,a[r.displayfield]=u,v[r.displayfield]=e),o>0&&o>=e&&(y=e*20+(o-e)*15,p=v[r.displayfield]*20+(h[r.displayfield]-v[r.displayfield])*15,y>p&&y>0&&p>0&&(h[r.displayfield]=o,a[r.displayfield]=u,v[r.displayfield]=e))}if(t=="column"||t=="all"){r.text.toString().length>h[r.displayfield]&&(a[r.displayfield]=r.text,h[r.displayfield]=r.text.length,w=r.text.toString(),e=w.replace(/[^A-Z]/g,"").length,v[r.displayfield]=e);var u=r.text,o=u.toString().length,w=u.toString(),e=w.replace(/[^A-Z]/g,"").length;o>0&&o>=e&&(y=e*20+(o-e)*15,p=v[r.displayfield]*20+(h[r.displayfield]-v[r.displayfield])*15,y>p&&y>0&&p>0&&(h[r.displayfield]=o,a[r.displayfield]=u,v[r.displayfield]=e))}}if(this.columns.records){for(f=0;f<this.columns.records.length;f++)r=this.columns.records[f],a[r.displayfield]==undefined&&(a[r.displayfield]=r.text),l[0].innerHTML=a[r.displayfield].toString(),s=l.outerWidth()+10,l.children().length>0&&(s=l.children().outerWidth()+10),n.jqx.browser.msie&&n.jqx.browser.version<8&&(s+=10),this.filterable&&this.showfilterrow&&(s+=5),s+=i,s>r.maxwidth&&(s=r.maxwidth),r._width!=undefined&&(r.__width=r._width),r._width=null,(r.maxwidth=="auto"||s<=r.maxwidth)&&(ut=r.width,s<r.minwidth&&(s=r.minwidth),r.width=s,r._percentagewidth!=undefined&&(r._percentagewidth=null),this._raiseEvent(14,{columntext:r.text,column:r.getcolumnproperties(),datafield:r.datafield,displayfield:r.displayfield,oldwidth:ut,newwidth:s}));for(l.remove(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),f=0;f<this.columns.records.length;f++)r=this.columns.records[f],r.__width!=undefined&&(r._width=r.__width)}},autoresizecolumn:function(t,i,r){var p,u,g,h,w,f,k,v,y,o,tt;if((i!="cells"&&i!="all"&&i!="column"&&(i="all"),t==undefined)||(p=this.getrows(),this.pageable&&(p=this.dataview.rows,this.groupable&&(p=this.dataview.records)),u=this.getcolumn(t),u==undefined))return!1;r=r==undefined?0:parseInt(r),g=p.length,h=n("<span><\/span>"),h.addClass(this.toThemeProperty("jqx-widget")),h.addClass(this.toThemeProperty("jqx-grid-cell")),n(document.body).append(h);var c=0,l="",a=0,nt=this.that,b=nt.host.width();if(nt.vScrollBar[0].style.visibility!="hidden"&&(b-=this.scrollbarsize+5),b<0&&(b=0),i==undefined||i=="cells"||i=="all")for(w=0;w<g;w++)if(f=p[w][u.displayfield],u.cellsformat!=""?n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(f)?f=n.jqx.dataFormat.formatdate(f,u.cellsformat,this.gridlocalization):n.jqx.dataFormat.isNumber(f)&&(f=n.jqx.dataFormat.formatnumber(f,u.cellsformat,this.gridlocalization))):u.cellsrenderer&&(k=u.cellsrenderer(w,u,f),k!=undefined&&(f=n(k).text())),f!=null){var e=f.toString().length,d=f.toString(),s=d.replace(/[^A-Z]/g,"").length;e>c&&(c=e,l=f,a=s),e>0&&e>=s&&(v=s*20+(e-s)*15,y=a*20+(c-a)*15,v>y&&v>0&&y>0&&(c=e,l=f,a=s))}if(i=="column"||i=="all"){u.text.toString().length>c&&(l=u.text);var f=u.text.toString(),e=f.toString().length,d=f.toString(),s=d.replace(/[^A-Z]/g,"").length;e>0&&e>=s&&(v=s*20+(e-s)*15,y=a*20+(c-a)*15,v>y&&v>0&&y>0&&(c=e,l=f,a=s))}l==undefined&&(l=u.text),h[0].innerHTML=l,o=h.outerWidth()+10,n.jqx.browser.msie&&n.jqx.browser.version<8&&(o+=5),this.filterable&&this.showfilterrow&&(o+=5),o+=r,h.remove(),o>u.maxwidth&&(o=u.maxwidth),(u.maxwidth=="auto"||o<=u.maxwidth)&&(tt=u.width,o<u.minwidth&&(o=u.minwidth),u.width=o,u._width!=undefined&&(u.__width=u._width),u._width=null,u._percentagewidth!=undefined&&(u._percentagewidth=null),this._updatecolumnwidths(),this._updatecellwidths(),this._raiseEvent(14,{columntext:u.text,column:u.getcolumnproperties(),datafield:t,displayfield:u.displayfield,oldwidth:tt,newwidth:o}),this._renderrows(this.virtualsizeinfo),u._width!=undefined&&(u._width=u.__width))},_handlecolumnsresize:function(){var t=this.that,i,o,r,s;if(this.columnsresize){i=!1,t.isTouchDevice()&&t.touchmode!==!0&&(i=!0);var u="mousemove.resize"+this.element.id,f="mousedown.resize"+this.element.id,e="mouseup.resize"+this.element.id;if(i)var u=n.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,f=n.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,e=n.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id;this.removeHandler(n(document),u),this.addHandler(n(document),u,function(r){var y=n.data(document.body,"contextmenu"+t.element.id),f,u,a,v,s,h;if(y!=null&&t.autoshowcolumnsmenubutton)return!0;if(t.resizablecolumn!=null&&!t.disabled&&t.resizing&&t.resizeline!=null){var p=t.resizablecolumn.columnelement,e=t.host.coord(),c=parseInt(t.resizestartline.coord().left),l=c-t._startcolumnwidth,o=t.resizablecolumn.column.minwidth;if(o=o=="auto"?0:parseInt(o),f=t.resizablecolumn.column.maxwidth,f=f=="auto"?0:parseInt(f),u=r.pageX,i&&(a=t.getTouches(r),v=a[0],u=v.pageX),l+=o,s=f>0?c+f:0,h=f==0?!0:t._startcolumnwidth+u-c<f?!0:!1,t.rtl&&(h=!0),h)if(t.rtl){if(u>=e.left&&u<=e.left+t.host.width()&&(t.resizeline.css("left",u),i))return!1}else if(u>=e.left&&u>=l&&u<=e.left+t.host.width()&&(s!=0&&r.pageX<s?t.resizeline.css("left",u):s==0&&t.resizeline.css("left",u),i))return!1}if(!i&&t.resizablecolumn!=null)return!1}),this.removeHandler(n(document),f),this.addHandler(n(document),f,function(i){var e=n.data(document.body,"contextmenu"+t.element.id),r,u,f;if(e!=null&&t.autoshowcolumnsmenubutton)return!0;if(t.resizablecolumn!=null&&!t.disabled){if(r=t.resizablecolumn.columnelement,r.coord().top+r.height()+5<i.pageY){t.resizablecolumn=null;return}if(r.coord().top-5>i.pageY){t.resizablecolumn=null;return}t._startcolumnwidth=t.resizablecolumn.column.width,t.resizablecolumn.column._width=null,n(document.body).addClass("jqx-disableselect"),n(document.body).addClass("jqx-position-reset"),t._mouseDownResize=new Date,t.resizing=!0,t._resizecolumn=t.resizablecolumn.column,t.resizeline=t.resizeline||n('<div style="position: absolute;"><\/div>'),t.resizestartline=t.resizestartline||n('<div style="position: absolute;"><\/div>'),t.resizebackground=t.resizebackground||n('<div style="position: absolute; left: 0; top: 0; background: #000;"><\/div>'),t.resizebackground.css("opacity",.01),t.resizebackground.css("cursor","col-resize"),t.resizeline.css("cursor","col-resize"),t.resizestartline.css("cursor","col-resize"),t.resizeline.addClass(t.toThemeProperty("jqx-grid-column-resizeline")),t.resizestartline.addClass(t.toThemeProperty("jqx-grid-column-resizestartline")),n(document.body).append(t.resizeline),n(document.body).append(t.resizestartline),n(document.body).append(t.resizebackground),u=t.resizablecolumn.columnelement.coord(),t.resizebackground.css("left",t.host.coord().left),t.resizebackground.css("top",t.host.coord().top),t.resizebackground.width(t.host.width()),t.resizebackground.height(t.host.height()),t.resizebackground.css("z-index",9999),f=function(n){var e,r,f;t.rtl?n.css("left",parseInt(u.left)):n.css("left",parseInt(u.left)+t._startcolumnwidth);var o=t._groupsheader(),i=o?t.groupsheader.height():0,s=t.showtoolbar?t.toolbarheight:0;i+=s,e=t.showstatusbar?t.statusbarheight:0,i+=e,r=0,t.pageable&&(r=t.pagerheight),f=t.hScrollBar.css("visibility")=="visible"?17:0,n.css("top",parseInt(u.top)),n.css("z-index",99999),t.columngroups?n.height(t.host.height()+t.resizablecolumn.columnelement.height()-r-i-f-t.columngroupslevel*t.columnsheight):n.height(t.host.height()-r-i-f),t.enableanimations?n.show("fast"):n.show()},f(t.resizeline),f(t.resizestartline),t.dragmousedown=null}}),o=function(){var f,i,r,s,u,h;if(n(document.body).removeClass("jqx-disableselect"),n(document.body).removeClass("jqx-position-reset"),t.resizing){if(t._mouseUpResize=new Date,f=t._mouseUpResize-t._mouseDownResize,f<200){t.resizing=!1,t._resizecolumn!=null&&t.resizeline!=null&&t.resizeline.css("display")=="block"&&(t._resizecolumn=null,t.resizeline.hide(),t.resizestartline.hide(),t.resizebackground.remove());return}if(t.resizing=!1,!t.disabled)if(i=t.host.width(),t.vScrollBar[0].style.visibility!="hidden"&&(i-=20),i<0&&(i=0),t._resizecolumn!=null&&t.resizeline!=null&&t.resizeline.css("display")=="block"){var e=parseInt(t.resizeline.css("left")),o=parseInt(t.resizestartline.css("left")),r=t._startcolumnwidth+e-o;for(t.rtl&&(r=t._startcolumnwidth-e+o),s=t._resizecolumn.width,t._closemenu(),t._resizecolumn.width=r,t._resizecolumn._percentagewidth!=undefined&&(t._resizecolumn._percentagewidth=r/i*100),u=0;u<t._columns.length;u++)if(t._columns[u].datafield===t._resizecolumn.datafield){t._columns[u].width=t._resizecolumn.width;break}h=t.hScrollBar[0].style.visibility,t._updatecolumnwidths(),t._updatecellwidths(),t._raiseEvent(14,{columntext:t._resizecolumn.text,column:t._resizecolumn.getcolumnproperties(),datafield:t._resizecolumn.datafield,oldwidth:s,newwidth:r}),t._renderrows(t.virtualsizeinfo),t.autosavestate&&t.savestate&&t.savestate(),h!=t.hScrollBar[0].style.visibility&&t.hScrollInstance.setPosition(0),t.rtl&&t._arrange(),t._resizecolumn=null,t.resizeline.hide(),t.resizestartline.hide(),t.resizebackground.remove(),t.resizablecolumn=null}else t.resizablecolumn=null}};try{(document.referrer!=""||window.frameElement)&&(r=null,window.top!=null&&window.top!=window.self&&window.parent&&document.referrer&&(r=document.referrer),r&&r.indexOf(document.location.host)!=-1&&(s=function(){o()},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",s,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",s)))}catch(h){}this.removeHandler(n(document),e),this.addHandler(n(document),e,function(){var i=n.data(document.body,"contextmenu"+t.element.id);if(i!=null&&t.autoshowcolumnsmenubutton)return!0;o()})}}})})(jQuery);
//# sourceMappingURL=jqxgrid.columnsresize.min.js.map