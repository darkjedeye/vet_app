(function(n){n.jqx.jqxWidget("jqxColorPicker","",{}),n.extend(n.jqx._jqxColorPicker.prototype,{defineInstance:function(){this.disabled=!1,this.height=null,this.width=null,this.color=new n.jqx.color({hex:"ff0000"}),this.redString="R:",this.greenString="G:",this.blueString="B:",this.showTransparent=!1,this.colorMode="saturation",this._delayLoading=!1,this.events=["colorchange",]},createInstance:function(){var t=this;typeof this.color=="string"&&(this.color=new n.jqx.color({hex:this.color})),this._setSize(),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-reset")),this.host.addClass(this.toThemeProperty("jqx-color-picker")),this.container=n("<div style='width: 100%; height: 100%; position: relative;'><\/div>"),this.container.appendTo(this.host),this.colorMap=n("<div style='left: 0; top: 0; position: absolute;'><\/div>"),this.colorMap.appendTo(this.container),this.colorBar=n("<div style='left: 0; top: 0; position: absolute;'><\/div>"),this.colorBar.appendTo(this.container),this.colorPanel=n("<div style='left: 0; top: 0; position: absolute;'><\/div>"),this.colorPanel.appendTo(this.container),this.hexPanel=n("<div style='float: left;'><\/div>"),this.hexPanel.appendTo(this.colorPanel),this.hexPanel.append("<span>#<\/span>"),this.hex=n("<input maxlength='6' style='height: 18px;'/>"),this.hex.addClass(this.toThemeProperty("jqx-input")),this.hex.addClass(this.toThemeProperty("jqx-widget-content")),this.hex.appendTo(this.hexPanel),this.colorPanel.append('<div style="font-size: 1px; clear: both;"><\/div>'),this.rgb=n("<div style='margin-top: 2px;'><\/div>"),this.rgb.appendTo(this.colorPanel),this.red=n("<input style='width: 25px; height: 18px;' maxlength='3'/>"),this.red.addClass(this.toThemeProperty("jqx-input")),this.red.addClass(this.toThemeProperty("jqx-widget-content")),this.rgb.append("<span>"+this.redString+"<\/span>"),this.red.appendTo(this.rgb),this.green=n("<input style='margin-right: 2px; height: 18px; width: 25px;' maxlength='3'/>"),this.green.addClass(this.toThemeProperty("jqx-input")),this.green.addClass(this.toThemeProperty("jqx-widget-content")),this.rgb.append("<span>"+this.greenString+"<\/span>"),this.green.appendTo(this.rgb),this.colorPanel.addClass(this.toThemeProperty("jqx-color-picker-map-overlay")),this._mapImageOverlayURL=this._getImageUrl(this.colorPanel),this.colorPanel.removeClass(this.toThemeProperty("jqx-color-picker-map-overlay")),this.blue=n("<input style='height: 18px; width: 25px;' maxlength='3'/>"),this.blue.addClass(this.toThemeProperty("jqx-input")),this.blue.addClass(this.toThemeProperty("jqx-widget-content")),this.rgb.append("<span>"+this.blueString+"<\/span>"),this.blue.appendTo(this.rgb),this.preview=n("<div style='background: red; position: absolute;'><\/div>"),this.preview.addClass(this.toThemeProperty("jqx-widget-content")),this.preview.appendTo(this.colorPanel),this.colorBarPointer=n("<div style='top: 0; left: 0; position: absolute; width: 100%;'><\/div>"),this.colorBarPointer.addClass(this.toThemeProperty("jqx-color-picker-bar-pointer")),this.colorMapPointer=n("<div style='top: 0; left: 0; position: absolute; width: 100%;'><\/div>"),this.colorMapPointer.addClass(this.toThemeProperty("jqx-color-picker-pointer")),this.transparent=n("<div style='clear: both;'><a style='text-align: center;' href='#'>transparent<\/a><\/div>"),this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.element.disabled=!0),this._addHandlers(),n.jqx.utilities.resize(this.host,function(){t._setSize(),t.refresh()})},_setPositionFromValue:function(){var n=this,r=n.color.h,e=100-n.color.v,i=n.colorMap.height(),o=n.colorMap.width(),u=r*o/360,f=e*i/100,t;if(this.colorMode=="saturation")t=100-n.color.s,t=t*i/100,n._saturation=100-n.color.s,n.colorMapPointer.css("margin-left",u-8),n.colorMapPointer.css("margin-top",f-8),n.colorBarPointer.css("margin-top",t-8),n.colorMapImageOverlay.css("opacity",(100-n.color.s)/100);else{var r=n.color.s,u=r*o/100,f=e*i/100,t=360-n.color.h;t=t*i/360,n._hue=n.color.h,n.colorMapPointer.css("margin-left",u-8),n.colorMapPointer.css("margin-top",f-8),n.colorBarPointer.css("margin-top",t-8)}},updateRGB:function(){var n=this;n.color.setRgb(n.red.val(),n.green.val(),n.blue.val()),n._updateUI(),n._raiseEvent("0",{color:n.color}),n.color.transparent=!1},_setPosition:function(n,t,i){var f=parseInt(n.pageX),e=parseInt(t.offset().left),r=parseInt(n.pageY),u=parseInt(t.offset().top);i[0].className.indexOf("jqx-color-picker-bar")==-1&&i.css("margin-left",f-8-e),r>=u&&r<=u+t.height()&&i.css("margin-top",r-8-u)},_handleKeyInput:function(n,t,i){if(!n.disabled){if(!n._validateKey(t))return t;i.val(n._setValueInRange(i.val(),0,255)),this.updateRGB(),this._setPositionFromValue()}},_addHandlers:function(){var t=this,i,r;this.addHandler(this.colorMapPointer,"dragStart",function(n){return n.preventDefault(),!1}),this.addHandler(this.colorBarPointer,"dragStart",function(n){return n.preventDefault(),!1}),this.addHandler(this.transparent,"click",function(n){t._raiseEvent("0",{color:"transparent"}),n.preventDefault(),t.color.transparent=!0}),this.addHandler(this.host,"selectionstart",function(n){return n.preventDefault(),!1}),this.addHandler(this.blue,"keyup blur",function(n){t._handleKeyInput(t,n,t.blue)}),this.addHandler(this.green,"keyup blur",function(n){t._handleKeyInput(t,n,t.green)}),this.addHandler(this.red,"keyup blur",function(n){t._handleKeyInput(t,n,t.red)}),this.addHandler(this.hex,"keyup blur",function(n){if(!t.disabled){if(!t._validateKey(n))return n;t.hex.val().toString().length==6&&(t.hex.val(t.color.validateHex(t.hex.val())),t.color.setHex(t.hex.val()),t._updateUI(),t._setPositionFromValue(),t._raiseEvent("0",{color:t.color}))}}),this.addHandler(this.colorMap,"dragstart",function(n){return n.preventDefault(),!1}),i=function(n){var i;t._setPosition(n,t.colorMap,t.colorMapPointer),t.colorMode=="saturation"?(i=t._valuesFromMouse(n,t.colorMap,360,100),i.x>360&&(i.x=360),t.color.setHsv(i.x,t._saturation!=null?100-t._saturation:100,100-i.y)):(i=t._valuesFromMouse(n,t.colorMap,100,100),i.x>100&&(i.x=100),t.color.setHsv(t._hue!=null?t._hue:360,i.x,100-i.y)),t._updateUI(),t._raiseEvent("0",{color:t.color}),t.color.transparent=!1},this.addHandler(this.colorMap,"mousedown",function(n){t.disabled||(t.beginDrag=!0,i(n))}),this.addHandler(n(document),"mousemove.picker"+this.element.id,function(n){t.disabled||t.beginDrag==!0&&i(n)}),this.addHandler(this.colorBar,"dragstart",function(n){return n.preventDefault(),!1}),r=function(n){var i;t._setPosition(n,t.colorBar,t.colorBarPointer),t.colorMode=="saturation"?(i=t._valuesFromMouse(n,t.colorBar,100,100),t.color.s=i.y,t._saturation=i.y,t.colorMapImageOverlay.css("opacity",t.color.s/100),t.color.setHsv(t.color.h,100-t.color.s,t.color.v)):(i=t._valuesFromMouse(n,t.colorBar,100,360),t.color.h=360-i.y,t._hue=t.color.h,t.color.setHsv(t.color.h,t.color.s,t.color.v)),t._updateUI(),t._raiseEvent("0",{color:t.color}),t.color.transparent=!1},this.addHandler(this.colorBar,"mousedown",function(n){t.disabled||(t.beginDragBar=!0,r(n))}),this.addHandler(n(document),"mousemove.colorbar"+this.element.id,function(n){t.disabled||t.beginDragBar==!0&&r(n)}),this.addHandler(n(document),"mouseup.colorMap"+this.element.id,function(){t.disabled||(t.beginDrag=!1,t.beginDragBar=!1)})},_removeHandlers:function(){this.removeHandler(this.colorMapPointer),this.removeHandler(this.colorBarPointer),this.removeHandler(this.transparent,"click"),this.removeHandler(this.host,"selectionstart"),this.removeHandler(this.blue,"keyup blur"),this.removeHandler(this.green,"keyup blur"),this.removeHandler(this.red,"keyup blur"),this.removeHandler(this.hex,"keyup blur"),this.removeHandler(this.colorMap,"dragstart"),this.removeHandler(this.colorMap,"mousedown"),this.removeHandler(n(document),"mousemove.colorbar"+this.element.id),this.removeHandler(n(document),"mousemove.colormap"+this.element.id),this.removeHandler(this.colorBar,"dragstart"),this.removeHandler(this.colorBar,"mousedown"),this.removeHandler(this.colorBar,"mousemove"),this.removeHandler(n(document),"mouseup.colorMap"+this.element.id)},_raiseEvent:function(n,t){var u,r,i;return t==undefined&&(t={owner:null}),u=this.events[n],r=t?t:{},r.owner=this,i=new jQuery.Event(u),i.owner=this,i.args=r,this.host.trigger(i)},setColor:function(t){t=="transparent"?(this.color.transparent=!0,this.color.hex="000",this.color.r=0,this.color.g=0,this.color.b=0):this.color=t.r?new n.jqx.color({rgb:t}):t.substring(0,1)=="#"?new n.jqx.color({hex:t.substring(1)}):new n.jqx.color({hex:t}),this._updateUI(),this._setPositionFromValue(),this._raiseEvent("0",{color:t})},getColor:function(){return this.color},propertyChangedHandler:function(n,t,i,r){n.isInitialized!=undefined&&n.isInitialized!=!1&&(t=="colorMode"&&n.refresh(),t=="color"&&(n._updateUI(),n._setPositionFromValue(),n._raiseEvent("0",{color:r})),(t=="width"||t=="height")&&(n._setSize(),n.refresh()),t=="showTransparent"&&n.refresh(),t=="disabled"&&(this.element.disabled=r,r?n.host.addClass(n.toThemeProperty("jqx-fill-state-disabled")):n.host.removeClass(n.toThemeProperty("jqx-fill-state-disabled"))))},_valuesFromMouse:function(n,t,i,r){var o=0,s=0,u=t.offset(),f=t.height(),e=t.width(),h,c;return o=n.pageX<u.left?0:n.pageX>u.left+e?e:n.pageX-u.left+1,s=n.pageY<u.top?0:n.pageY>u.top+f?f:n.pageY-u.top+1,h=parseInt(o/e*i),c=parseInt(s/f*r),{x:h,y:c}},_validateKey:function(n){return n.keyCode==9||n.keyCode==16||n.keyCode==38||n.keyCode==29||n.keyCode==40||n.keyCode==17||n.keyCode==37||n.ctrlKey&&(n.keyCode=="c".charCodeAt()||n.keyCode=="v".charCodeAt())||n.ctrlKey&&(n.keyCode=="C".charCodeAt()||n.keyCode=="V".charCodeAt())?!1:n.ctrlKey||n.shiftKey?!1:!0},_setValueInRange:function(n,t,i){return n==""||isNaN(n)?t:(n=parseInt(n),n>i)?i:n<t?t:n},destroy:function(){this.host.removeClass(),this._removeHandlers(),this.host.remove()},setPointerStyle:function(n){this.colorMapPointer.removeClass(),(n=="transparent"||n.hex=="")&&this.colorMapPointer.addClass(this.toThemeProperty("jqx-color-picker-pointer"));var t=n.r*.299+n.g*.587+n.b*.114,i=255-t<105?"Black":"White";i=="Black"?this.colorMapPointer.addClass(this.toThemeProperty("jqx-color-picker-pointer")):this.colorMapPointer.addClass(this.toThemeProperty("jqx-color-picker-pointer-alt"))},_updateUI:function(){var t=this,i;t.red.val(t.color.r),t.green.val(t.color.g),t.blue.val(t.color.b),t.hex.val(t.color.hex),i=new n.jqx.color({hex:"fff"}),this.colorMode=="saturation"?(i.setHsv(this.color.h,100,this.color.v),t.colorBar.css("background","#"+i.hex)):(i.setHsv(this.color.h,100,100),t.colorMap.css("background-color","#"+i.hex)),t.preview.css("background","#"+this.color.hex),t.setPointerStyle(this.color)},_setSize:function(){this.width!=null&&this.width.toString().indexOf("px")!=-1?this.host.width(this.width):this.width==undefined||isNaN(this.width)||this.host.width(this.width),this.height!=null&&this.height.toString().indexOf("px")!=-1?this.host.height(this.height):this.height==undefined||isNaN(this.height)||this.host.height(this.height),this.host.width()<130&&this.host.width(150),this.host.height()<70&&this.host.height(70),this.width!=null&&this.width.toString().indexOf("%")!=-1&&this.host.width(this.width),this.height!=null&&this.height.toString().indexOf("%")!=-1&&this.host.height(this.height)},_arrange:function(){var u=this.host.height(),r=this.host.width(),n=u-44,i,f,t;if((this.showTransparent&&(n=u-64),!(n<=0))&&(this.colorMap.width(85*r/100),this.colorMap.height(n),this.colorBar.height(n),this.colorBar.css("left",this.colorMap.width()+4),this.colorBar.width(8*r/100),this.colorBarPointer.width(this.colorBar.width()),this.colorPanel.width(r),this.colorPanel.height(40),this.showTransparent&&this.colorPanel.height(60),this.colorPanel.css("top",n+4),this.hex.width(this.colorMap.width()-this.colorBar.width()-4),i=this.red.prev().outerWidth()-this.hex.prev().outerWidth(),i<4&&(i=4),this.hex.css("margin-left",i+"px"),this.preview.width(this.colorBar.width()+9),this.preview.height(25),this.preview.addClass(this.toThemeProperty("jqx-rc-all")),this.preview.addClass(this.toThemeProperty("jqx-color-picker-preview")),this.preview.css("left",this.colorMap.width()-4),this.preview.css("top","5px"),f=this.hex.width(),t=f-this.blue.prev().outerWidth()-this.green.prev().outerWidth()-6,t>0)){this.blue.width(t/3),this.green.width(t/3),this.red.width(t/3);return}},_getColorPointer:function(){var t=n("<div><\/div>");return t.addClass(this.toThemeProperty("jqx-color-picker-pointer")),t},_getImageUrl:function(n){var t=n.css("backgroundImage");return t=t.replace('url("',""),t=t.replace('")',""),t=t.replace("url(",""),t.replace(")","")},refresh:function(){this._delayLoading||(this._saturation=null,this._hue=null,this.colorMap.removeClass(),this.colorBar.removeClass(),this.colorMap.addClass(this.toThemeProperty("jqx-disableselect")),this.colorBar.addClass(this.toThemeProperty("jqx-disableselect")),this.colorPanel.addClass(this.toThemeProperty("jqx-color-picker-panel")),this.colorBar.css("background-image",""),this.colorMap.css("background-image",""),this.colorMode=="saturation"?(this.colorMap.addClass(this.toThemeProperty("jqx-color-picker-map")),this.colorBar.addClass(this.toThemeProperty("jqx-color-picker-bar"))):(this.colorMap.addClass(this.toThemeProperty("jqx-color-picker-map-hue")),this.colorBar.addClass(this.toThemeProperty("jqx-color-picker-bar-hue"))),this._barImageURL=this._getImageUrl(this.colorBar),this._mapImageURL=this._getImageUrl(this.colorMap),this._arrange(),this.colorBar.children().remove(),this.colorBarImageContainer=n("<div style='overflow: hidden;'><\/div>"),this.colorBarImageContainer.width(this.colorBar.width()),this.colorBarImageContainer.height(this.colorBar.height()),this.colorBarImageContainer.appendTo(this.colorBar),this.colorBarImage=n("<img/>"),this.colorBarImage.appendTo(this.colorBarImageContainer),this.colorBarImage.attr("src",this._barImageURL),this.colorBar.css("background-image","none"),this.colorBarImage.attr("width",this.colorBar.width()),this.colorBarImage.attr("height",this.colorBar.height()),this.colorBarPointer.appendTo(this.colorBar),this.colorMap.children().remove(),this.colorMapImage=n("<img/>"),this.colorMapImage.appendTo(this.colorMap),this.colorMapImage.attr("src",this._mapImageURL),this.colorMap.css("background-image","none"),this.colorMapImage.attr("width",this.colorMap.width()),this.colorMapImage.attr("height",this.colorMap.height()),this.colorMapImageOverlay=n("<img style='position: absolute; left: 0; top: 0;'/>"),this.colorMapImageOverlay.prependTo(this.colorMap),this.colorMapImageOverlay.attr("src",this._mapImageOverlayURL),this.colorMapImageOverlay.attr("width",this.colorMap.width()),this.colorMapImageOverlay.attr("height",this.colorMap.height()),this.colorMapImageOverlay.css("opacity",0),this.colorMapPointer.appendTo(this.colorMap),this.showTransparent&&this.transparent.appendTo(this.colorPanel),this._updateUI(),this._setPositionFromValue())}}),n.jqx.color=function(n){var t={r:0,g:0,b:0,h:0,s:0,v:0,hex:"",hexToRgb:function(n){n=this.validateHex(n);var t="00",i="00",r="00";return n.length==6?(t=n.substring(0,2),i=n.substring(2,4),r=n.substring(4,6)):(n.length>4&&(t=n.substring(4,n.length),n=n.substring(0,4)),n.length>2&&(i=n.substring(2,n.length),n=n.substring(0,2)),n.length>0&&(r=n.substring(0,n.length))),{r:this.hexToInt(t),g:this.hexToInt(i),b:this.hexToInt(r)}},validateHex:function(n){return n=new String(n).toUpperCase(),n=n.replace(/[^A-F0-9]/g,"0"),n.length>6&&(n=n.substring(0,6)),n},webSafeDec:function(n){return n=Math.round(n/51),n*51},hexToWebSafe:function(n){var t,i,r;return n.length==3?(t=n.substring(0,1),i=n.substring(1,1),r=n.substring(2,1)):(t=n.substring(0,2),i=n.substring(2,4),r=n.substring(4,6)),intToHex(this.webSafeDec(this.hexToInt(t)))+this.intToHex(this.webSafeDec(this.hexToInt(i)))+this.intToHex(this.webSafeDec(this.hexToInt(r)))},rgbToWebSafe:function(n){return{r:this.webSafeDec(n.r),g:this.webSafeDec(n.g),b:this.webSafeDec(n.b)}},rgbToHex:function(n){return this.intToHex(n.r)+this.intToHex(n.g)+this.intToHex(n.b)},intToHex:function(n){var t=parseInt(n).toString(16);return t.length==1&&(t="0"+t),t.toUpperCase()},hexToInt:function(n){return parseInt(n,16)},hslToRgb:function(n){var r=parseInt(n.h)/360,u=parseInt(n.s)/100,t=parseInt(n.l)/100,i=t<=.5?t*(1+u):t+u-t*u;var f=2*t-i,e=r+1/3,o=r,s=r-1/3,h=Math.round(this.hueToRgb(f,i,e)*255),c=Math.round(this.hueToRgb(f,i,o)*255),l=Math.round(this.hueToRgb(f,i,s)*255);return{r:h,g:c,b:l}},hueToRgb:function(n,t,i){return i<0?i+=1:i>1&&(i-=1),i*6<1?n+(t-n)*i*6:i*2<1?t:i*3<2?n+(t-n)*(2/3-i)*6:n},rgbToHsl:function(n){var r=n[0],t=n[1],i=n[2],e;r/=255,t/=255,i/=255;var u=math.max(r,t,i),o=math.min(r,t,i),f,s,h=(u+o)/2;if(u===o)f=s=0;else{e=u-o,s=h>.5?e/(2-u-o):e/(u+o);switch(u){case r:f=(t-i)/e+(t<i?6:0);break;case t:f=(i-r)/e+2;break;case i:f=(r-t)/e+4}f/=6}return{h:f,s:s,l:h}},rgbToHsl:function(n){var u=parseFloat(n.r)/255,f=parseFloat(n.g)/255,s=parseFloat(n.b)/255,e=Math.max(u,f,s),h=Math.min(u,f,s),o=e-h,c=e+h,t,i,r;return t=h===e?0:u===e?(60*(f-s)/o+360)%360:f===e?60*(s-u)/o+120:60*(u-f)/o+240,i=.5*c,r=i===0?0:i===1?1:i<=.5?o/c:o/(2-c),t=t.round(),r=(r*100).round(),i=(i*100).round(),{h:t,s:r,l:i}},rgbToHsv:function(n){var t=n.r/255,i=n.g/255,u=n.b/255,f,r;return hsv={h:0,s:0,v:0},f=0,r=0,t>=i&&t>=u?(r=t,f=i>u?u:i):i>=u&&i>=t?(r=i,f=t>u?u:t):(r=u,f=i>t?t:i),hsv.v=r,hsv.s=r?(r-f)/r:0,hsv.s?(delta=r-f,hsv.h=t==r?(i-u)/delta:i==r?2+(u-t)/delta:4+(t-i)/delta,hsv.h=parseInt(hsv.h*60),hsv.h<0&&(hsv.h+=360)):hsv.h=0,hsv.s=parseInt(hsv.s*100),hsv.v=parseInt(hsv.v*100),hsv},hsvToRgb:function(n){rgb={r:0,g:0,b:0};var u=n.h,i=n.s,t=n.v;if(i==0)rgb.r=t==0?rgb.g=rgb.b=0:rgb.g=rgb.b=parseInt(t*255/100);else{u==360&&(u=0),u/=60,i=i/100,t=t/100;var o=parseInt(u),s=u-o,r=t*(1-i),f=t*(1-i*s),e=t*(1-i*(1-s));switch(o){case 0:rgb.r=t,rgb.g=e,rgb.b=r;break;case 1:rgb.r=f,rgb.g=t,rgb.b=r;break;case 2:rgb.r=r,rgb.g=t,rgb.b=e;break;case 3:rgb.r=r,rgb.g=f,rgb.b=t;break;case 4:rgb.r=e,rgb.g=r,rgb.b=t;break;case 5:rgb.r=t,rgb.g=r,rgb.b=f}rgb.r=parseInt(rgb.r*255),rgb.g=parseInt(rgb.g*255),rgb.b=parseInt(rgb.b*255)}return rgb},setRgb:function(n,t,i){var u=function(n){return n<0||n>255?0:isNaN(parseInt(n))?0:n},r;this.r=u(n),this.g=u(t),this.b=u(i),r=this.rgbToHsv(this),this.h=r.h,this.s=r.s,this.v=r.v,this.hex=this.rgbToHex(this)},setHsl:function(n,t,i){this.h=n,this.s=t,this.l=i;var r=this.hslToRgb(this);this.r=r.r,this.g=r.g,this.b=r.b,this.hex=this.rgbToHex(r)},setHsv:function(n,t,i){this.h=n,this.s=t,this.v=i;var r=this.hsvToRgb(this);this.r=r.r,this.g=r.g,this.b=r.b,this.hex=this.rgbToHex(r)},setHex:function(n){var t,i;this.hex=n,t=this.hexToRgb(this.hex),this.r=t.r,this.g=t.g,this.b=t.b,i=this.rgbToHsv(t),this.h=i.h,this.s=i.s,this.v=i.v}},i;return n&&(n.hex?(i=t.validateHex(n.hex),t.setHex(i)):n.r?t.setRgb(n.r,n.g,n.b):n.h?t.setHsv(n.h,n.s,n.v):n.rgb&&t.setRgb(n.rgb.r,n.rgb.g,n.rgb.b)),t}})(jQuery);
//# sourceMappingURL=jqxcolorpicker.min.js.map