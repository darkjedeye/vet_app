(function(n){n.jqx.jqxWidget("jqxValidator","",{}),n.extend(n.jqx._jqxValidator.prototype,{defineInstance:function(){this.rules=null,this.scroll=!0,this.focus=!0,this.scrollDuration=300,this.scrollCallback=null,this.position="right",this.arrow=!0,this.animation="fade",this.animationDuration=150,this.closeOnClick=!0,this.onError=null,this.onSuccess=null,this.ownerElement=null,this._events=["validationError","validationSuccess"],this.hintPositionOffset=5,this._inputHint=[],this.rtl=!1,this.hintType="tooltip"},createInstance:function(){this.hintType=="label"&&this.animationDuration==150&&(this.animationDuration=0),this._configureInputs(),this._removeEventListeners(),this._addEventListeners()},destroy:function(){this._removeEventListeners(),this.hide()},validate:function(t){var u=!0,s,f=Infinity,e,h,r,c=[],l,o,i,v,a;for(this.updatePosition(),l=this,o=0,i=0;i<this.rules.length;i+=1)typeof this.rules[i].rule=="function"&&o++;for(this.positions=[],i=0;i<this.rules.length;i+=1)v=n(this.rules[i].input),typeof this.rules[i].rule=="function"?(a=function(i,a){if(s=i,!1==s){u=!1;var v=n(a.input);r=n(a.input),c.push(r),e=r.offset().top,f>e&&(f=e,h=r)}o--,o==0&&typeof t=="function"&&(l._handleValidation(u,f,h,c),t&&t(u))},this._validateRule(this.rules[i],a)):s=this._validateRule(this.rules[i]),!1==s&&(u=!1,r=n(this.rules[i].input),c.push(r),e=r.offset().top,f>e&&(f=e,h=r));return o==0?(this._handleValidation(u,f,h,c),u):undefined},validateInput:function(n){for(var i=this._getRulesForInput(n),r=!0,t=0;t<i.length;t+=1)this._validateRule(i[t])||(r=!1);return r},hideHint:function(n){for(var i=this._getRulesForInput(n),t=0;t<i.length;t+=1)this._hideHintByRule(i[t])},hide:function(){for(var t,n=0;n<this.rules.length;n+=1)t=this.rules[n],this._hideHintByRule(this.rules[n])},updatePosition:function(){var t,i;for(this.positions=[],i=0;i<this.rules.length;i+=1)t=this.rules[i],t.hint&&this._hintLayout(t.hint,n(t.input),t.position,t)},_getRulesForInput:function(n){for(var i=[],t=0;t<this.rules.length;t+=1)this.rules[t].input===n&&i.push(this.rules[t]);return i},_validateRule:function(t,i){var f=n(t.input),u,o=!0,r=this,s=function(n){if(n)r._hideHintByRule(t),i&&i(!0,t);else{var e=r.animation;r.animation=null,t.hint&&r._hideHintByRule(t),u=t.hintRender.apply(r,[t.message,f]),r._hintLayout(u,f,t.position,t),r._showHint(u),t.hint=u,r._removeLowPriorityHints(t),i&&i(!1,t),r.animation=e}},e=!1;return typeof t.rule=="function"&&(e=t.rule.call(this,f,s),e==!0&&i&&i(!0,t)),typeof t.rule=="function"&&e==!1?(typeof t.hintRender!="function"||t.hint||this._higherPriorityActive(t)||!f.is(":visible")||(u=t.hintRender.apply(this,[t.message,f]),this._hintLayout(u,f,t.position,t),this._showHint(u),t.hint=u,this._removeLowPriorityHints(t)),o=!1,i&&i(!1,t)):this._hideHintByRule(t),o},_hideHintByRule:function(t){var i=n(t.input),u=this,r,f=function(){if(u.hintType=="label"){var n=u;if(n.position=="top"||n.position=="left"){if(i.prev().hasClass(".jqx-validator-error-label"))return}else if(i.next().hasClass(".jqx-validator-error-label"))return;i[0].nodeName.toLowerCase()!="input"?i.find("input").length>0&&(i.find(".jqx-input").length>0?i.find(".jqx-input").removeClass(n.toThemeProperty("jqx-validator-error-element")):i.is(".jqx-checkbox")&&i.find(".jqx-checkbox-default").removeClass(n.toThemeProperty("jqx-validator-error-element")),i.is(".jqx-radiobutton")?i.find(".jqx-radiobutton-default").removeClass(n.toThemeProperty("jqx-validator-error-element")):i.removeClass(n.toThemeProperty("jqx-validator-error-element"))):i.removeClass(n.toThemeProperty("jqx-validator-error-element"))}};t&&(r=t.hint,r&&(this.positions&&this.positions[Math.round(r.offset().top)+"_"+Math.round(r.offset().left)]&&(this.positions[Math.round(r.offset().top)+"_"+Math.round(r.offset().left)]=null),this.animation==="fade"?r.fadeOut(this.animationDuration,function(){r.remove(),f()}):(r.remove(),f())),t.hint=null)},_handleValidation:function(n,t,i,r){if(n)this._raiseEvent(1),typeof this.onSuccess=="function"&&this.onSuccess();else if(this._scrollHandler(t),this.focus&&i.focus(),this._raiseEvent(0,{invalidInputs:r}),typeof this.onError=="function")this.onError(r)},_scrollHandler:function(t){if(this.scroll){var i=this;n("html,body").animate({scrollTop:t},this.scrollDuration,function(){typeof i.scrollCallback=="function"&&i.scrollCallback.call(i)})}},_higherPriorityActive:function(n){for(var r=!1,t,i=this.rules.length-1;i>=0;i-=1){if(t=this.rules[i],r&&t.input===n.input&&t.hint)return!0;t===n&&(r=!0)}return!1},_removeLowPriorityHints:function(n){for(var r=!1,t,i=0;i<this.rules.length;i+=1)t=this.rules[i],r&&t.input===n.input&&this._hideHintByRule(t),t===n&&(r=!0)},_getHintRuleByInput:function(t){for(var i,r=0;r<this.rules.length;r+=1)if(i=this.rules[r],n(i.input)[0]===t[0]&&i.hint)return i;return null},_removeEventListeners:function(){for(var r,f,u,i,t=0;t<this.rules.length;t+=1)for(r=this.rules[t],u=r.action.split(","),f=n(r.input),i=0;i<u.length;i+=1)this.removeHandler(f,n.trim(u[i])+".jqx-validator")},_addEventListeners:function(){var u,f,r;if(this.host.parents(".jqx-window").length>0){var e=this,t=function(){e.updatePosition()},i=this.host.parents(".jqx-window");this.addHandler(i,"closed",function(){e.hide()}),this.addHandler(i,"moved",t),this.addHandler(i,"moving",t),this.addHandler(i,"resized",t),this.addHandler(i,"resizing",t),this.addHandler(n(document.parentWindow),"scroll",function(){t()})}for(r=0;r<this.rules.length;r+=1)u=this.rules[r],f=n(u.input),this._addListenerTo(f,u)},_addListenerTo:function(t,i){var o=this,f=i.action.split(","),e=!1,r,u;for(this._isjQWidget(t)&&(e=!0),r=0;r<f.length;r+=1)u=n.trim(f[r]),e&&(u=="blur"||u=="focus")&&(t=t.find("input")),this.addHandler(t,u+".jqx-validator",function(){o._validateRule(i)})},_configureInputs:function(){var n;for(this.rules=this.rules||[],n=0;n<this.rules.length;n+=1)this._handleInput(n)},_handleInput:function(n){var t=this.rules[n];t.position||(t.position=this.position),t.message||(t.message="Validation Failed!"),t.action||(t.action="blur"),t.hintRender||(t.hintRender=this._hintRender),t.rule?this._handleRule(t):t.rule=null},_handleRule:function(n){var t=n.rule,i,u,r=!1;if(typeof t=="string"?(t.indexOf("=")>=0&&(t=t.split("="),u=t[1].split(","),t=t[0]),i=this["_"+t],i?n.rule=function(n){return i.apply(this,[n].concat(u))}:r=!0):typeof t!="function"?r=!0:n.rule=t,r)throw new Error("Wrong parameter!");},_required:function(t){var i,u,r;switch(this._getType(t)){case"textarea":case"password":case"jqx-input":case"text":return i=n.data(t[0]),i.jqxMaskedInput?(u=t.jqxMaskedInput("promptChar"),r=t.jqxMaskedInput("value"),r&&r.indexOf(u)<0):i.jqxNumberInput?t.jqxNumberInput("inputValue")!=="":i.jqxDateTimeInput?!0:n.trim(t.val())!=="";case"checkbox":return t.is(":checked");case"radio":return t.is(":checked");case"div":return t.is(".jqx-checkbox")?t.jqxCheckBox("checked"):t.is(".jqx-radiobutton")?t.jqxRadioButton("checked"):!1}return!1},_notNumber:function(n){return this._validateText(n,function(n){if(n=="")return!0;return!/\d/.test(n)})},_startWithLetter:function(n){return this._validateText(n,function(n){if(n=="")return!0;return!/\d/.test(n.substring(0,1))})},_number:function(n){return this._validateText(n,function(n){if(n=="")return!0;var t=new Number(n);return!isNaN(t)&&isFinite(t)})},_phone:function(n){return this._validateText(n,function(n){if(n=="")return!0;return/^\(\d{3}\)(\d){3}-(\d){4}$/.test(n)})},_length:function(n,t,i){return this._minLength(n,t)&&this._maxLength(n,i)},_maxLength:function(n,t){return t=parseInt(t,10),this._validateText(n,function(n){return n.length<=t})},_minLength:function(n,t){return t=parseInt(t,10),this._validateText(n,function(n){return n.length>=t})},_email:function(n){return this._validateText(n,function(n){if(n=="")return!0;return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)})},_zipCode:function(n){return this._validateText(n,function(n){if(n=="")return!0;return/^(^\d{5}$)|(^\d{5}-\d{4}$)|(\d{3}-\d{2}-\d{4})$/.test(n)})},_ssn:function(n){return this._validateText(n,function(n){if(n=="")return!0;return/\d{3}-\d{2}-\d{4}/.test(n)})},_validateText:function(n,t){var i;return this._isTextInput(n)?(i=this._isjQWidget(n)?n.find("input").val():n.val(),t(i)):!1},_isjQWidget:function(t){var i=n.data(t[0]);return i.jqxMaskedInput||i.jqxNumberInput||i.jqxDateTimeInput?!0:!1},_isTextInput:function(n){var t=this._getType(n);return t==="text"||t==="textarea"||t==="password"||n.is(".jqx-input")},_getType:function(t){var i=t[0].tagName.toLowerCase();return i==="textarea"?"textarea":t.is(".jqx-input")?"jqx-input":i==="input"?n(t).attr("type")?n(t).attr("type").toLowerCase():"text":i},_hintRender:function(t,i){var u,r,f;return this.hintType=="label"?(r=n('<label class="'+this.toThemeProperty("jqx-validator-error-label")+'"><\/label>'),r.html(t),u=this,this.closeOnClick&&r.click(function(){u.hideHint(i.selector)}),this.position=="left"||this.position=="top"?r.insertBefore(n(i)):r.insertAfter(n(i)),r):(r=n('<div class="'+this.toThemeProperty("jqx-validator-hint")+' jqx-rc-all"><\/div>'),f=this,r.html(t),this.closeOnClick&&r.click(function(){f.hideHint(i.selector)}),this.ownerElement==null?r.appendTo(document.body):this.ownerElement.innerHTML?r.appendTo(n(this.ownerElement)):r.appendTo(this.ownerElement),r)},_hintLayout:function(t,i,r,u){var e,o,f,s;if(this._hintRender===u.hintRender){if(e=this._getPosition(i,r,t,u),this.hintType=="label"){o="2px",(this.position=="left"||this.position=="top")&&(o="-2px"),i[0].nodeName.toLowerCase()!="input"?i.find("input").length>0&&(i.find(".jqx-input").length>0?i.find(".jqx-input").addClass(this.toThemeProperty("jqx-validator-error-element")):i.is(".jqx-checkbox")&&i.find(".jqx-checkbox-default").addClass(this.toThemeProperty("jqx-validator-error-element")),i.is(".jqx-radiobutton")?i.find(".jqx-radiobutton-default").addClass(this.toThemeProperty("jqx-validator-error-element")):i.addClass(this.toThemeProperty("jqx-validator-error-element"))):i.addClass(this.toThemeProperty("jqx-validator-error-element")),f=n("<span><\/span>"),f.addClass(this.toThemeProperty("jqx-validator-hint")),f.html(t.text()),f.appendTo(n(document.body)),s=f.outerWidth(),f.remove(),t.css({position:"relative",left:n(i).css("margin-left"),width:n(i).width(),top:o}),r=="center"&&(t.css("width",s),t.css("left","0px"),t.css("margin-left","auto"),t.css("margin-right","auto"));return}t.css({position:"absolute",left:e.left,top:e.top}),this.arrow&&this._addArrow(i,t,r,e)}},_showHint:function(n){n&&this.animation==="fade"&&(n.fadeOut(0),n.fadeIn(this.animationDuration))},_getPosition:function(t,i,r,u){var f=t.offset(),e,o,h=t.outerWidth(),c=t.outerHeight(),s;return this.rtl&&i.indexOf("left")>=0&&(i="right"),this.rtl&&i.indexOf("right")>=0&&(i="left"),this.ownerElement!=null&&(f={left:0,top:0},f.top=parseInt(f.top)+t.position().top,f.left=parseInt(f.left)+t.position().left),u&&u.hintPositionRelativeElement&&(s=n(u.hintPositionRelativeElement),f=s.offset(),h=s.width(),c=s.height()),e=i.indexOf("top")>=0?f.top-c:i.indexOf("bottom")>=0?f.top+r.outerHeight()+this.hintPositionOffset+5:f.top,o=i.indexOf("center")>=0?f.left+this.hintPositionOffset+(h-r.outerWidth())/2:i.indexOf("left")>=0?f.left-r.outerWidth()-this.hintPositionOffset:i.indexOf("right")>=0?f.left+h+this.hintPositionOffset:f.left+this.hintPositionOffset,i.indexOf(":")>=0&&(i=i.split(":")[1].split(","),o+=parseInt(i[0],10),e+=parseInt(i[1],10)),this.positions||(this.positions=[]),this.positions[Math.round(e)+"_"+Math.round(o)]&&this.positions[Math.round(e)+"_"+Math.round(o)].top==e&&(e+=t.outerHeight()),this.positions[Math.round(e)+"_"+Math.round(o)]={left:o,top:e},{left:o,top:e}},_addArrow:function(t,i,r){var f=n('<div class="'+this.toThemeProperty("jqx-validator-hint-arrow")+'"><\/div>'),u,h;this.rtl&&r.indexOf("left")>=0&&(r="right"),this.rtl&&r.indexOf("right")>=0&&(r="left"),i.children(".jqx-validator-hint-arrow").remove(),i.append(f);var e=f.outerHeight(),o=f.outerWidth(),c=i.outerHeight(),s=i.outerWidth();this._addImage(f),h=r.indexOf("top")>=0?c-e:r.indexOf("bottom")>=0?-e:(c-e)/2-e/2,r.indexOf("center")>=0?u=(s-o)/2:r.indexOf("left")>=0?u=s-o/2-1:r.indexOf("right")>=0&&(u=-o/2),(r.indexOf("topright")>=0||r.indexOf("bottomright")>=0)&&(u=0),(r.indexOf("topleft")>=0||r.indexOf("bottomleft")>=0)&&(u=s-o),f.css({position:"absolute",left:u,top:h})},_addImage:function(n){var t=n.css("background-image");t=t.replace('url("',""),t=t.replace('")',""),t=t.replace("url(",""),t=t.replace(")",""),n.css("background-image","none"),n.append('<img src="'+t+'" alt="Arrow" style="position: relative; top: 0px; left: 0px; width: '+n.width()+"px; height: "+n.height()+'px;" />')},_raiseEvent:function(t,i){var r=n.Event(this._events[t]);return r.args=i,this.host.trigger(r)},propertyChangedHandler:function(n,t){t==="rules"&&(this._configureInputs(),this._removeEventListeners(),this._addEventListeners())}})})(jQuery);
//# sourceMappingURL=jqxvalidator.min.js.map