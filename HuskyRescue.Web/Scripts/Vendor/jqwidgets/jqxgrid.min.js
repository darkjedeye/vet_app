(function(n){function t(t,i){return this.owner=t,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.hideable=!0,this.editable=!0,this.hidden=!1,this.groupable=!0,this.renderer=null,this.cellsrenderer=null,this.checkchange=null,this.threestatecheckbox=!1,this.buttonclick=null,this.columntype=null,this.cellsformat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.filteritems=[],this.resizable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.validation=null,this.classname="",this.cellclassname="",this.cellendedit=null,this.cellbeginedit=null,this.cellvaluechanging=null,this.aggregates=null,this.aggregatesrenderer=null,this.menu=!0,this.createfilterwidget=null,this.filtertype="default",this.filtercondition=null,this.rendered=null,this.exportable=!0,this.exporting=!1,this.draggable=!0,this.nullable=!0,this.enabletooltips=!0,this.columngroup=null,this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(n,t){var i;this[n]?(i=this[n],this[n]=t,this.owner._columnPropertyChanged(this,n,t,i)):this[n.toLowerCase()]&&(i=this[n.toLowerCase()],this[n.toLowerCase()]=t,this.owner._columnPropertyChanged(this,n.toLowerCase(),t,i))},this._initfields=function(i){var u,r;if(i!=null&&(u=this.that,n.jqx.hasProperty(i,"dataField")&&(this.datafield=n.jqx.get(i,"dataField")),this.displayfield=n.jqx.hasProperty(i,"displayField")?n.jqx.get(i,"displayField"):this.datafield,n.jqx.hasProperty(i,"enableTooltips")&&(this.enabletooltips=n.jqx.get(i,"enableTooltips")),n.jqx.hasProperty(i,"text")&&(this.text=n.jqx.get(i,"text")),n.jqx.hasProperty(i,"sortable")&&(this.sortable=n.jqx.get(i,"sortable")),n.jqx.hasProperty(i,"hideable")&&(this.hideable=n.jqx.get(i,"hideable")),n.jqx.hasProperty(i,"hidden")&&(this.hidden=n.jqx.get(i,"hidden")),n.jqx.hasProperty(i,"groupable")&&(this.groupable=n.jqx.get(i,"groupable")),n.jqx.hasProperty(i,"renderer")&&(this.renderer=n.jqx.get(i,"renderer")),n.jqx.hasProperty(i,"align")&&(this.align=n.jqx.get(i,"align")),n.jqx.hasProperty(i,"cellsAlign")&&(this.cellsalign=n.jqx.get(i,"cellsAlign")),n.jqx.hasProperty(i,"cellsFormat")&&(this.cellsformat=n.jqx.get(i,"cellsFormat")),n.jqx.hasProperty(i,"width")&&(this.width=n.jqx.get(i,"width")),n.jqx.hasProperty(i,"minWidth")&&(this.minwidth=n.jqx.get(i,"minWidth")),n.jqx.hasProperty(i,"maxWidth")&&(this.maxwidth=n.jqx.get(i,"maxWidth")),n.jqx.hasProperty(i,"cellsRenderer")&&(this.cellsrenderer=n.jqx.get(i,"cellsRenderer")),n.jqx.hasProperty(i,"columnType")&&(this.columntype=n.jqx.get(i,"columnType")),n.jqx.hasProperty(i,"checkChange")&&(this.checkchange=n.jqx.get(i,"checkChange")),n.jqx.hasProperty(i,"buttonClick")&&(this.buttonclick=n.jqx.get(i,"buttonClick")),n.jqx.hasProperty(i,"pinned")&&(this.pinned=n.jqx.get(i,"pinned")),n.jqx.hasProperty(i,"visibleIndex")&&(this.visibleindex=n.jqx.get(i,"visibleIndex")),n.jqx.hasProperty(i,"filterable")&&(this.filterable=n.jqx.get(i,"filterable")),n.jqx.hasProperty(i,"filter")&&(this.filter=n.jqx.get(i,"filter")),n.jqx.hasProperty(i,"resizable")&&(this.resizable=n.jqx.get(i,"resizable")),n.jqx.hasProperty(i,"editable")&&(this.editable=n.jqx.get(i,"editable")),n.jqx.hasProperty(i,"initEditor")&&(this.initeditor=n.jqx.get(i,"initEditor")),n.jqx.hasProperty(i,"createEditor")&&(this.createeditor=n.jqx.get(i,"createEditor")),n.jqx.hasProperty(i,"destroyEditor")&&(this.destroyeditor=n.jqx.get(i,"destroyEditor")),n.jqx.hasProperty(i,"getEditorValue")&&(this.geteditorvalue=n.jqx.get(i,"getEditorValue")),n.jqx.hasProperty(i,"validation")&&(this.validation=n.jqx.get(i,"validation")),n.jqx.hasProperty(i,"cellBeginEdit")&&(this.cellbeginedit=n.jqx.get(i,"cellBeginEdit")),n.jqx.hasProperty(i,"cellEndEdit")&&(this.cellendedit=n.jqx.get(i,"cellEndEdit")),n.jqx.hasProperty(i,"className")&&(this.classname=n.jqx.get(i,"className")),n.jqx.hasProperty(i,"cellClassName")&&(this.cellclassname=n.jqx.get(i,"cellClassName")),n.jqx.hasProperty(i,"menu")&&(this.menu=n.jqx.get(i,"menu")),n.jqx.hasProperty(i,"aggregates")&&(this.aggregates=n.jqx.get(i,"aggregates")),n.jqx.hasProperty(i,"aggregatesRenderer")&&(this.aggregatesrenderer=n.jqx.get(i,"aggregatesRenderer")),n.jqx.hasProperty(i,"createFilterWidget")&&(this.createfilterwidget=n.jqx.get(i,"createFilterWidget")),n.jqx.hasProperty(i,"filterType")&&(this.filtertype=n.jqx.get(i,"filterType")),n.jqx.hasProperty(i,"rendered")&&(this.rendered=n.jqx.get(i,"rendered")),n.jqx.hasProperty(i,"exportable")&&(this.exportable=n.jqx.get(i,"exportable")),n.jqx.hasProperty(i,"filterItems")&&(this.filteritems=n.jqx.get(i,"filterItems")),n.jqx.hasProperty(i,"cellValueChanging")&&(this.cellvaluechanging=n.jqx.get(i,"cellValueChanging")),n.jqx.hasProperty(i,"draggable")&&(this.draggable=n.jqx.get(i,"draggable")),n.jqx.hasProperty(i,"filterCondition")&&(this.filtercondition=n.jqx.get(i,"filterCondition")),n.jqx.hasProperty(i,"threeStateCheckbox")&&(this.threestatecheckbox=n.jqx.get(i,"threeStateCheckbox")),n.jqx.hasProperty(i,"nullable")&&(this.nullable=n.jqx.get(i,"nullable")),n.jqx.hasProperty(i,"columnGroup")&&(this.columngroup=n.jqx.get(i,"columnGroup")),!i instanceof String&&!(typeof i=="string")))for(r in i)if(!u.hasOwnProperty(r)&&!u.hasOwnProperty(r.toLowerCase())){t.host.remove();throw new Error("jqxGrid: Invalid property name - "+r+".");}},this._initfields(i),this}function i(n,t){return this.setdata=function(n){n!=null&&(this.bounddata=n,this.boundindex=n.boundindex,this.visibleindex=n.visibleindex,this.group=n.group,this.parentbounddata=n.parentItem,this.uniqueid=n.uniqueid,this.level=n.level)},this.setdata(t),this.parentrow=null,this.subrows=[],this.owner=n,this.height=25,this.hidden=!1,this.rowdetails=null,this.rowdetailsheight=100,this.rowdetailshidden=!0,this.top=-1,this.setrowinfo=function(n){this.hidden=n.hidden,this.rowdetails=n.rowdetails,this.rowdetailsheight=n.rowdetailsheight,this.rowdetailshidden=!n.showdetails,this.height=n.height},this}n.jqx.jqxWidget("jqxGrid","",{}),n.extend(n.jqx._jqxGrid.prototype,{defineInstance:function(){this.disabled=!1,this.width=600,this.height=400,this.pagerheight=28,this.groupsheaderheight=34,this.pagesize=10,this.pagesizeoptions=["5","10","20"],this.rowsheight=25,this.columnsheight=25,this.filterrowheight=30,this.groupindentwidth=30,this.rowdetails=!1,this.enablerowdetailsindent=!0,this.enablemousewheel=!0,this.initrowdetails=null,this.layoutrowdetails=null,this.editable=!1,this.editmode="selectedcell",this.pageable=!1,this.pagermode="default",this.pagerbuttonscount=5,this.groupable=!1,this.sortable=!1,this.filterable=!1,this.filtermode="default",this.autoshowfiltericon=!0,this.showfiltercolumnbackground=!0,this.showpinnedcolumnbackground=!0,this.showsortcolumnbackground=!0,this.altrows=!1,this.altstart=1,this.altstep=1,this.showrowdetailscolumn=!0,this.showtoolbar=!1,this.toolbarheight=34,this.showstatusbar=!1,this.statusbarheight=34,this.enableellipsis=!0,this.groups=[],this.groupsrenderer=null,this.groupcolumnrenderer=null,this.groupsexpandedbydefault=!1,this.pagerrenderer=null,this.touchmode="auto",this.columns=[],this.selectedrowindex=-1,this.selectedrowindexes=[],this.selectedcells=[],this.selectedcell=null,this.tableZIndex=799,this.headerZIndex=499,this.updatefilterconditions=null,this.showaggregates=!1,this.showfilterrow=!1,this.autorowheight=!1,this.autokoupdates=!0,this.handlekeyboardnavigation=null,this.showsortmenuitems=!0,this.showfiltermenuitems=!0,this.showgroupmenuitems=!0,this.enablebrowserselection=!1,this.enablekeyboarddelete=!0,this.clipboard=!0,this.ready=null,this.updatefilterpanel=null,this.autogeneratecolumns=!1,this.rowdetailstemplate=null,this.scrollfeedback=null,this.rendertoolbar=null,this.renderstatusbar=null,this.rendered=null,this.multipleselectionbegins=null,this.columngroups=null,this.source={beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},this.dataview=null,this.updatedelay=0,this.autoheight=!1,this.autowidth=!1,this.showheader=!0,this.showgroupsheader=!0,this.closeablegroups=!0,this.scrollbarsize=n.jqx.utilities.scrollBarSize,this.touchscrollbarsize=n.jqx.utilities.touchScrollBarSize,this.virtualmode=!1,this.sort=null,this.columnsmenu=!0,this.columnsresize=!1,this.columnsreorder=!1,this.columnsmenuwidth=15,this.autoshowcolumnsmenubutton=!0,this.popupwidth="auto",this.sorttogglestates=2,this.rendergridrows=null,this.enableanimations=!0,this.enabletooltips=!1,this.selectionmode="singlerow",this.enablehover=!0,this.loadingerrormessage="The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.",this.verticalscrollbarstep=25,this.verticalscrollbarlargestep=400,this.horizontalscrollbarstep=10,this.horizontalscrollbarlargestep=50,this.keyboardnavigation=!0,this.touchModeStyle="auto",this.autoshowloadelement=!0,this.showdefaultloadelement=!0,this.showemptyrow=!0,this.autosavestate=!1,this.autoloadstate=!1,this._updating=!1,this._pagescache=[],this._pageviews=[],this._cellscache=[],this._rowdetailscache=[],this._rowdetailselementscache=[],this._requiresupdate=!1,this._hasOpenedMenu=!1,this.scrollmode="physical",this.deferreddatafields=null,this.localization=null,this.rtl=!1,this.menuitemsarray=[],this.events=["initialized","rowClick","rowSelect","rowUnselect","groupExpand","groupCollapse","sort","columnClick","cellClick","pageChanged","pageSizeChanged","bindingComplete","groupsChanged","filter","columnResized","cellSelect","cellUnselect","cellBeginEdit","cellEndEdit","cellValueChanged","rowExpand","rowCollapse","rowDoubleClick","cellDoubleClick","columnReordered","pageChanging"]},createInstance:function(){var s,e,h,t,f,r,u,i,o;if(this.that=this,s="<div style='overflow: hidden; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='wrapper"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='toolbar' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='groupsheader' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='content"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; margin-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='verticalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='horizontalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'><\/div><div id='statusbar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='pager' style='z-index: 20; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><\/div><\/div>",this.element.innerText="",this.element.innerHTML="",this.source.dataBind||(this.source=new n.jqx.dataAdapter(this.source)),t=this.source._source.datafields,t&&t.length>0&&(this._camelCase=this.source._source.dataFields!==undefined,this.editmode=this.editmode.toLowerCase(),this.selectionmode=this.selectionmode.toLowerCase()),this.host.attr("role","grid"),this.host.attr("align","left"),this.element.innerHTML=s,this.host.addClass(this.toTP("jqx-grid")),this.host.addClass(this.toTP("jqx-reset")),this.host.addClass(this.toTP("jqx-rc-all")),this.host.addClass(this.toTP("jqx-widget")),this.host.addClass(this.toTP("jqx-widget-content")),this.wrapper=this.host.find("#wrapper"+this.element.id),this.content=this.host.find("#content"+this.element.id),this.content.addClass(this.toTP("jqx-reset")),e=this.host.find("#verticalScrollBar"+this.element.id),h=this.host.find("#horizontalScrollBar"+this.element.id),this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright")),!e.jqxScrollBar)throw new Error("jqxGrid: Missing reference to jqxscrollbar.js");if(this.editors=[],this.vScrollBar=e.jqxScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchmode,step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep,theme:this.theme,_triggervaluechanged:!1}),this.hScrollBar=h.jqxScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchmode,step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep,theme:this.theme,_triggervaluechanged:!1}),this.pager=this.host.find("#pager"),this.pager[0].id="pager"+this.element.id,this.toolbar=this.host.find("#toolbar"),this.toolbar[0].id="toolbar"+this.element.id,this.toolbar.addClass(this.toTP("jqx-grid-toolbar")),this.toolbar.addClass(this.toTP("jqx-widget-header")),this.statusbar=this.host.find("#statusbar"),this.statusbar[0].id="statusbar"+this.element.id,this.statusbar.addClass(this.toTP("jqx-grid-statusbar")),this.statusbar.addClass(this.toTP("jqx-widget-header")),this.pager.addClass(this.toTP("jqx-grid-pager")),this.pager.addClass(this.toTP("jqx-widget-header")),this.groupsheader=this.host.find("#groupsheader"),this.groupsheader.addClass(this.toTP("jqx-grid-groups-header")),this.groupsheader.addClass(this.toTP("jqx-widget-header")),this.vScrollBar.css("visibility","hidden"),this.hScrollBar.css("visibility","hidden"),this.vScrollInstance=n.data(this.vScrollBar[0],"jqxScrollBar").instance,this.hScrollInstance=n.data(this.hScrollBar[0],"jqxScrollBar").instance,this.gridtable=null,this.isNestedGrid=this.host.parent()?this.host.parent().css("z-index")==2e3:!1,this.touchdevice=this.isTouchDevice(),this.localizestrings&&(this.localizestrings(),this.localization!=null&&this.localizestrings(this.localization,!1)),this.rowdetailstemplate&&(undefined==this.rowdetailstemplate.rowdetails&&(this.rowdetailstemplate.rowdetails="<div><\/div>"),undefined==this.rowdetailstemplate.rowdetailsheight&&(this.rowdetailstemplate.rowdetailsheight=200),undefined==this.rowdetailstemplate.rowdetailshidden&&(this.rowdetailstemplate.rowdetailshidden=!0)),this.showfilterrow&&!this.filterable)throw new Error('jqxGrid: "showfilterrow" requires setting the "filterable" property to true!');if(this.autorowheight&&!this.autoheight&&!this.pageable)throw new Error('jqxGrid: "autorowheight" requires setting the "autoheight" or "pageable" property to true!');if(this.virtualmode&&this.rendergridrows==null)throw new Error('jqxGrid: "virtualmode" requires setting the "rendergridrows"!');if(this.virtualmode&&!this.pageable&&this.groupable)throw new Error('jqxGrid: "grouping" in "virtualmode" without paging is not supported!');if(!this._testmodules()){if(this._builddataloadelement(),this._cachedcolumns=this.columns,this.rowsheight!=25&&this._measureElement("cell"),(this.columnsheight!=25||this.columngroups)&&this._measureElement("column"),t=this.source.datafields,t==null&&this.source._source&&(t=this.source._source.datafields),t)for(f=0;f<this.columns.length;f++)if(r=this.columns[f],r&&r.cellsformat&&r.cellsformat.length>2)for(u=0;u<t.length;u++)if(t[u].name==r.datafield&&!t[u].format){t[u].format=r.cellsformat;break}this.databind(this.source),this.showtoolbar&&this.toolbar.css("visibility","visible"),this.showstatusbar&&this.statusbar.css("visibility","visible"),this._arrange(),this.pageable&&this._initpager&&this._initpager(),this.tableheight=null,i=this.that,o=function(){i.content&&(i.content[0].scrollTop=0,i.content[0].scrollLeft=0),i.gridcontent&&(i.gridcontent[0].scrollLeft=0,i.gridcontent[0].scrollTop=0)},this.addHandler(this.content,"mousedown",function(){o()}),this.addHandler(this.content,"scroll",function(){return o(),!1}),this.showfilterrow||(this.showstatusbar||this.showtoolbar||this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect")),this.enablebrowserselection&&(this.content.removeClass("jqx-disableselect"),this.host.removeClass("jqx-disableselect")),this._resizeWindow(),this.renderstatusbar&&this.renderstatusbar(this.statusbar),this.rendertoolbar&&this.rendertoolbar(this.toolbar),this.disabled&&this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.hasTransform=n.jqx.utilities.hasTransform(this.host),this.scrollmode=="logical"&&(this.vScrollInstance.thumbStep=this.rowsheight,this.vScrollInstance.step=this.rowsheight),(this.filterable||this.groupable||this.sortable)&&this._initmenu()}},_resizeWindow:function(){var t=this.that;(this.width!=null&&this.width.toString().indexOf("%")!=-1||this.height!=null&&this.height.toString().indexOf("%")!=-1)&&(this._updatesizeonwindowresize=!0,n.jqx.utilities.resize(this.host,function(i){var e=n(window).width(),f=n(window).height(),r=t.host.width(),u=t.host.height();if(t.autoheight&&(t._lastHostWidth=f),t._lastHostWidth!=r||t._lastHostHeight!=u){if(t.touchdevice&&t.editcell&&i!=="orientationchange")return;t._updatesize(t._lastHostWidth!=r,t._lastHostHeight!=u)}t._lastWidth=e,t._lastHeight=f,t._lastHostWidth=r,t._lastHostHeight=u}))},_builddataloadelement:function(){if(this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=n('<div style="overflow: hidden; position: absolute;"><\/div>'),this.showdefaultloadelement){var t=n('<table cellspacing="0" cellpadding="0" style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 112px; height: 50px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><tbody><tr><td><div style="overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><\/td><td><span style="margin-left: 5px;" >'+this.gridlocalization.loadtext+"<\/span><\/td><\/tr><\/tbody><\/table>");t.addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),this.dataloadelement.append(t)}else this.dataloadelement.addClass(this.toTP("jqx-grid-load"));this.dataloadelement.width(this.width),this.dataloadelement.height(this.height),this.host.prepend(this.dataloadelement)},_measureElement:function(t){var i=n("<span style='visibility: hidden; white-space: nowrap;'>measure Text<\/span>");i.addClass(this.toTP("jqx-widget")),n(document.body).append(i),t=="cell"?this._cellheight=i.height():this._columnheight=i.height(),i.remove()},_measureMenuElement:function(){var t=n("<span style='visibility: hidden; white-space: nowrap;'>measure Text<\/span>"),i;return t.addClass(this.toTP("jqx-widget")),t.addClass(this.toTP("jqx-menu")),t.addClass(this.toTP("jqx-menu-item-top")),t.addClass(this.toTP("jqx-fill-state-normal")),n(document.body).append(t),i=t.outerHeight(),t.remove(),i},_measureElementWidth:function(t){var i=n("<span style='visibility: hidden; white-space: nowrap;'>"+t+"<\/span>"),r;return i.addClass(this.toTP("jqx-widget")),i.addClass(this.toTP("jqx-grid")),i.addClass(this.toTP("jqx-grid-column-header")),i.addClass(this.toTP("jqx-widget-header")),n(document.body).append(i),r=i.outerWidth()+20,i.remove(),r},_getBodyOffset:function(){var t=0,i=0;return n("body").css("border-top-width")!="0px"&&(t=parseInt(n("body").css("border-top-width")),isNaN(t)&&(t=0)),n("body").css("border-left-width")!="0px"&&(i=parseInt(n("body").css("border-left-width")),isNaN(i)&&(i=0)),{left:i,top:t}},_testmodules:function(){var t="",u=this.that,i=function(){t.length!=""&&(t+=",")},r,o,e,f;if(this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)&&(i(),t+=" jqxmenu.js"),this.host.jqxScrollBar||(i(),t+=" jqxscrollbar.js"),this.host.jqxButton||(i(),t+=" jqxbuttons.js"),n.jqx.dataAdapter||(i(),t+=" jqxdata.js"),this.pageable&&!this.gotopage&&(i(),t+="jqxgrid.pager.js"),this.filterable&&!this.applyfilters&&(i(),t+=" jqxgrid.filter.js"),this.groupable&&!this._initgroupsheader&&(i(),t+=" jqxgrid.grouping.js"),this.columnsresize&&!this.autoresizecolumns&&(i(),t+=" jqxgrid.columnsresize.js"),this.columnsreorder&&!this.setcolumnindex&&(i(),t+=" jqxgrid.columnsreorder.js"),this.sortable&&!this.sortby&&(i(),t+=" jqxgrid.sort.js"),this.editable&&!this.begincelledit&&(i(),t+=" jqxgrid.edit.js"),this.showaggregates&&!this.getcolumnaggregateddata&&(i(),t+=" jqxgrid.aggregates.js"),this.keyboardnavigation&&!this.selectrow&&(i(),t+=" jqxgrid.selection.js"),t!=""||this.editable||this.filterable||this.pageable){for(r=[],o=function(n){switch(n){case"checkbox":u.host.jqxCheckBox||r.checkbox||(r.checkbox=!0,i(),t+=" jqxcheckbox.js");break;case"numberinput":u.host.jqxNumberInput||r.numberinput||(r.numberinput=!0,i(),t+=" jqxnumberinput.js");break;case"datetimeinput":u.host.jqxDateTimeInput||r.datetimeinput?u.host.jqxCalendar||r.calendar||(i(),t+=" jqxcalendar.js"):(i(),r.datetimeinput=!0,t+=" jqxdatetimeinput.js(requires: jqxcalendar.js)");break;case"combobox":u.host.jqxComboBox||r.combobox?u.host.jqxListBox||r.listbox||(i(),r.listbox=!0,t+=" jqxlistbox.js"):(i(),r.combobox=!0,t+=" jqxcombobox.js(requires: jqxlistbox.js)");break;case"dropdownlist":u.host.jqxDropDownList||r.dropdownlist?u.host.jqxListBox||r.listbox||(i(),r.listbox=!0,t+=" jqxlistbox.js"):(i(),r.dropdownlist=!0,t+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}},(this.filterable||this.pageable)&&o("dropdownlist"),e=0;e<this.columns.length;e++)this.columns[e]!=undefined&&(f=this.columns[e].columntype,o(f),this.filterable&&this.showfilterrow&&(f=this.columns[e].filtertype,(f=="checkedlist"||f=="bool")&&o("checkbox"),f=="date"&&o("datetimeinput")));if(t!="")throw new Error("jqxGrid: Missing references to the following module(s): "+t);}return!1},focus:function(){try{this.wrapper.focus();var n=this.that;setTimeout(function(){n.wrapper.focus()},10),this.focused=!0}catch(t){}},hiddenParent:function(){return n.jqx.isHidden(this.host)},_updatesize:function(t,i){var f;if(!this._loading){var r=this.that,u=r.host.width(),e=r.host.height();r._oldWidth||(r._oldWidth=u),r._oldHeight||(r._oldHeight=e),r._resizeTimer&&clearTimeout(r._resizeTimer),f=5,r._resizeTimer=setTimeout(function(){var h,c,f,s,o,a,v,e,l;if(r.resizingGrid=!0,!n.jqx.isHidden(r.host)){if((f!=r._oldHeight||i==!0)&&(h=r.groupable&&r.groups.length>0,c=r.vScrollBar.css("visibility"),r.autoheight||(r.virtualmode&&(r._pageviews=[]),h||r.rowdetails||r.pageable?(r._arrange(),r.prerenderrequired=!0,f=Math.round(r.host.height())+2*r.rowsheight,realheight=r._gettableheight(),s=Math.round(f/r.rowsheight),o=Math.max(r.dataview.totalrows,r.dataview.totalrecords),r.pageable&&(o=r.pagesize,r.pagesize>Math.max(r.dataview.totalrows,r.dataview.totalrecords)&&r.autoheight?o=Math.max(r.dataview.totalrows,r.dataview.totalrecords):r.autoheight||r.dataview.totalrows<r.pagesize&&(o=Math.max(r.dataview.totalrows,r.dataview.totalrecords))),a=o*r.rowsheight,v=r._getpagesize(),!r.pageable&&r.autoheight&&(s=o),r.virtualsizeinfo&&(r.virtualsizeinfo.visiblerecords=s),r.rendergridcontent(!0,!1),r._renderrows(r.virtualsizeinfo)):(r._arrange(),r.virtualsizeinfo=r._calculatevirtualheight(),f=Math.round(r.host.height())+2*r.rowsheight,parseInt(f)>=parseInt(r._oldHeight)&&(r.prerenderrequired=!0),r._renderrows(r.virtualsizeinfo)),c!=r.vScrollBar.css("visibility")&&(r.vScrollInstance.setPosition(0),r._arrange(),r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths()))),u!=r._oldWidth||t==!0){if(e=!1,r.editcell&&r.editcell.editor)switch(r.editcell.columntype){case"dropdownlist":if(e=r.editcell.editor.jqxDropDownList("isOpened")||r.editcell.editor.jqxDropDownList("isanimating")&&!r.editcell.editor.jqxDropDownList("ishiding"),e){r.editcell.editor.jqxDropDownList({openDelay:0}),r.editcell.editor.jqxDropDownList("open"),r.editcell.editor.jqxDropDownList({openDelay:250});return}break;case"combobox":if(e=r.editcell.editor.jqxComboBox("isOpened")||r.editcell.editor.jqxComboBox("isanimating")&&!r.editcell.editor.jqxComboBox("ishiding"),e){r.editcell.editor.jqxComboBox({openDelay:0}),r.editcell.editor.jqxComboBox("open"),r.editcell.editor.jqxComboBox({openDelay:250});return}break;case"datetimeinput":if(e){e=r.editcell.editor.jqxDateTimeInput("isOpened")||r.editcell.editor.jqxDateTimeInput("isanimating")&&!r.editcell.editor.jqxDateTimeInput("ishiding"),r.editcell.editor.jqxDateTimeInput({openDelay:0}),r.editcell.editor.jqxDateTimeInput("open"),r.editcell.editor.jqxDateTimeInput({openDelay:250});return}}l=r.hScrollBar.css("visibility"),r._arrange(),r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths(),t==!1&&r._oldWidth>u||i||r._renderrows(r.virtualsizeinfo),l!=r.hScrollBar.css("visibility")&&r.hScrollInstance.setPosition(0)}r._oldWidth=u,r._oldHeight=f,r.resizingGrid=!1}},f)}},getTouches:function(t){return n.jqx.mobile.getTouches(t)},_updateTouchScrolling:function(){var t=this.that;if(t.isTouchDevice()){if(t.autoheight)return;t.scrollmode="logical",t.vScrollInstance.thumbStep=t.rowsheight;var i=n.jqx.mobile.getTouchEventName("touchstart"),r=n.jqx.mobile.getTouchEventName("touchend"),u=n.jqx.mobile.getTouchEventName("touchmove");t.enablehover=!1,t.gridcontent&&(t.removeHandler(t.gridcontent,i+".touchScroll"),t.removeHandler(t.gridcontent,u+".touchScroll"),t.removeHandler(t.gridcontent,r+".touchScroll"),t.removeHandler(t.gridcontent,"touchcancel.touchScroll"),n.jqx.mobile.touchScroll(t.gridcontent[0],t.vScrollInstance.max,function(n,i){var r;t.vScrollBar.css("visibility")=="visible"&&(r=t.vScrollInstance.value,t.vScrollInstance.setPosition(r+i)),t.hScrollBar.css("visibility")=="visible"&&(r=t.hScrollInstance.value,t.hScrollInstance.setPosition(r+n)),t.vScrollInstance.thumbCapture=!0,t._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),t._overlayElement&&(t.removeHandler(t._overlayElement,i+".touchScroll"),t.removeHandler(t._overlayElement,u+".touchScroll"),t.removeHandler(t._overlayElement,r+".touchScroll"),t.removeHandler(t._overlayElement,"touchcancel.touchScroll"),n.jqx.mobile.touchScroll(t._overlayElement[0],t.vScrollInstance.max,function(n,i){var r;t.vScrollBar.css("visibility")=="visible"&&(r=t.vScrollInstance.value,t.vScrollInstance.setPosition(r+i)),t.hScrollBar.css("visibility")=="visible"&&(r=t.hScrollInstance.value,t.hScrollInstance.setPosition(r+n)),t.vScrollInstance.thumbCapture=!0,t._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),this.addHandler(this.host,i,function(){t.editcell?t._overlayElement.css("visibility","hidden"):t._overlayElement.css("visibility","visible")}),this.addHandler(this.host,r,function(){t.editcell?t._overlayElement.css("visibility","hidden"):t._overlayElement.css("visibility","visible")})))}},isTouchDevice:function(){if(this.touchDevice!=undefined)return this.touchDevice;var t=n.jqx.mobile.isTouchDevice();if(this.touchDevice=t,this.touchmode==!0){if(n.jqx.browser.msie&&n.jqx.browser.version<9)return this.enablehover=!1,!1;t=!0,n.jqx.mobile.setMobileSimulator(this.element),this.touchDevice=t}else this.touchmode==!1&&(t=!1);return t&&this.touchModeStyle!=!1&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize),t},toTP:function(n){return this.toThemeProperty(n)},localizestrings:function(t,i){var r;if(this._cellscache=[],n.jqx.dataFormat&&n.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(t!=null){for(r in t)r.toLowerCase()!==r&&(t[r.toLowerCase()]=t[r]);if(t.pagergotopagestring&&(this.gridlocalization.pagergotopagestring=t.pagergotopagestring),t.pagershowrowsstring&&(this.gridlocalization.pagershowrowsstring=t.pagershowrowsstring),t.pagerrangestring&&(this.gridlocalization.pagerrangestring=t.pagerrangestring),t.pagernextbuttonstring&&(this.gridlocalization.pagernextbuttonstring=t.pagernextbuttonstring),t.pagerpreviousbuttonstring&&(this.gridlocalization.pagerpreviousbuttonstring=t.pagerpreviousbuttonstring),t.pagerfirstbuttonstring&&(this.gridlocalization.pagerfirstbuttonstring=t.pagerfirstbuttonstring),t.pagerlastbuttonstring&&(this.gridlocalization.pagerlastbuttonstring=t.pagerlastbuttonstring),t.groupsheaderstring&&(this.gridlocalization.groupsheaderstring=t.groupsheaderstring),t.sortascendingstring&&(this.gridlocalization.sortascendingstring=t.sortascendingstring),t.sortdescendingstring&&(this.gridlocalization.sortdescendingstring=t.sortdescendingstring),t.sortremovestring&&(this.gridlocalization.sortremovestring=t.sortremovestring),t.groupbystring&&(this.gridlocalization.groupbystring=t.groupbystring),t.groupremovestring&&(this.gridlocalization.groupremovestring=t.groupremovestring),t.firstDay&&(this.gridlocalization.firstDay=t.firstDay),t.days&&(this.gridlocalization.days=t.days),t.months&&(this.gridlocalization.months=t.months),t.AM&&(this.gridlocalization.AM=t.AM),t.PM&&(this.gridlocalization.PM=t.PM),t.patterns&&(this.gridlocalization.patterns=t.patterns),t.percentsymbol&&(this.gridlocalization.percentsymbol=t.percentsymbol),t.currencysymbol&&(this.gridlocalization.currencysymbol=t.currencysymbol),t.currencysymbolposition&&(this.gridlocalization.currencysymbolposition=t.currencysymbolposition),t.decimalseparator&&(this.gridlocalization.decimalseparator=t.decimalseparator),t.thousandsseparator&&(this.gridlocalization.thousandsseparator=t.thousandsseparator),t.filterclearstring&&(this.gridlocalization.filterclearstring=t.filterclearstring),t.filterstring&&(this.gridlocalization.filterstring=t.filterstring),t.filtershowrowstring&&(this.gridlocalization.filtershowrowstring=t.filtershowrowstring),t.filterselectallstring&&(this.gridlocalization.filterselectallstring=t.filterselectallstring),t.filterchoosestring&&(this.gridlocalization.filterchoosestring=t.filterchoosestring),t.filterorconditionstring&&(this.gridlocalization.filterorconditionstring=t.filterorconditionstring),t.filterandconditionstring&&(this.gridlocalization.filterandconditionstring=t.filterandconditionstring),t.filterstringcomparisonoperators&&(this.gridlocalization.filterstringcomparisonoperators=t.filterstringcomparisonoperators),t.filternumericcomparisonoperators&&(this.gridlocalization.filternumericcomparisonoperators=t.filternumericcomparisonoperators),t.filterdatecomparisonoperators&&(this.gridlocalization.filterdatecomparisonoperators=t.filterdatecomparisonoperators),t.filterbooleancomparisonoperators&&(this.gridlocalization.filterbooleancomparisonoperators=t.filterbooleancomparisonoperators),t.emptydatastring&&(this.gridlocalization.emptydatastring=t.emptydatastring),t.filterselectstring&&(this.gridlocalization.filterselectstring=t.filterselectstring),t.todaystring&&(this.gridlocalization.todaystring=t.todaystring),t.clearstring&&(this.gridlocalization.clearstring=t.clearstring),t.validationstring&&(this.gridlocalization.validationstring=t.validationstring),t.loadtext&&(this.gridlocalization.loadtext=t.loadtext),i!==!1){if(this._initpager&&this._initpager(),this._initgroupsheader&&this._initgroupsheader(),this._initmenu&&this._initmenu(),this._builddataloadelement(),n(this.dataloadelement).css("visibility","hidden"),n(this.dataloadelement).css("display","none"),this.filterable&&this.showfilterrow&&this._updatefilterrow){for(r in this._filterrowcache)n(this._filterrowcache[r]).remove();this._filterrowcache=[],this._updatefilterrow()}this.showaggregates&&this.refresheaggregates&&this.refresheaggregates(),this._renderrows(this.virtualsizeinfo)}}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filterstring:"Filter",filtershowrowstring:"Show rows where:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today"}},_initmenu:function(){var t=this.that,e,s,h,k,d,o;if(this.host.jqxMenu){this.gridmenu&&(this.filterable&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.removeData(),this.gridmenu.jqxMenu("destroy"),this.gridmenu.remove()),this.menuitemsarray=[],this.gridmenu=n('<div id="gridmenu'+this.element.id+'" style="z-index: 9999999999999;"><\/div>'),this.host.append(this.gridmenu);var i=n("<ul><\/ul>"),l=n('<li><div class="jqx-grid-sortasc-icon"><\/div>'+this.gridlocalization.sortascendingstring+"<\/li>"),a=n('<li><div class="jqx-grid-sortdesc-icon"><\/div>'+this.gridlocalization.sortdescendingstring+"<\/li>"),v=n('<li><div class="jqx-grid-sortremove-icon"><\/div>'+this.gridlocalization.sortremovestring+"<\/li>"),w='<div class="jqx-grid-groupby-icon"><\/div>',y=n("<li>"+w+this.gridlocalization.groupbystring+"<\/li>"),p=n("<li>"+w+this.gridlocalization.groupremovestring+"<\/li>"),g=n('<li type="separator"><\/li>'),f=n('<li class="filter" style="height: 170px;" ignoretheme="true"><div class="filter"><\/div><\/li>'),r=this.gridlocalization.sortascendingstring.length,u=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>r&&(r=this.gridlocalization.sortdescendingstring.length,u=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>r&&(r=this.gridlocalization.sortremovestring.length,u=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(this.gridlocalization.groupbystring.length>r&&(r=this.gridlocalization.groupbystring.length,u=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>r&&(r=this.gridlocalization.groupremovestring.length,u=this.gridlocalization.groupremovestring)),e=200,u=n.trim(u).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),s=n("<span>"+u+"<\/span>"),s.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(s),e=s.outerWidth()+60,s.remove(),h=0,this.sortable&&this._togglesort&&this.showsortmenuitems&&(i.append(l),this.menuitemsarray[0]=l[0],i.append(a),this.menuitemsarray[1]=a[0],i.append(v),this.menuitemsarray[2]=v[0],h=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(i.append(y),this.menuitemsarray[3]=y[0],i.append(p),this.menuitemsarray[4]=p[0],h+=2);var nt=this._measureMenuElement(),c=h*nt+9,b=!0;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems)if(this._initfilterpanel)this.menuitemsarray[5]=f[0],this.menuitemsarray[6]=f[0],i.append(g),i.append(f),c+=176,n.jqx.browser.msie&&n.jqx.browser.version<8&&(c+=20),k=n(f).find("div:first"),e+=20,this._initfilterpanel(this,k,"",e),b=!1,this.removeHandler(n(document),"click.menu"+t.element.id,t._closemenuafterclick,t),this.addHandler(n(document),"click.menu"+t.element.id,t._closemenuafterclick,t);else throw new Error("jqxGrid: Missing reference to jqxgrid.filter.js.");this.gridmenu.append(i),n.jqx.browser.msie&&n.jqx.browser.version<8&&this.filterable&&(n("#listBoxfilter1"+this.element.id).css("z-index",4990),n("#listBoxfilter2"+this.element.id).css("z-index",4990),n("#listBoxfilter3"+this.element.id).css("z-index",4990),n("#gridmenu"+this.element.id).css("z-index",5e3),this.addHandler(n("#gridmenu"+this.element.id),"initialized",function(){n("#menuWrappergridmenu"+t.element.id).css("z-index",4980)})),this.menuitemsarray[0]==undefined&&(c=65),this.removeHandler(this.gridmenu,"keydown"),this.addHandler(this.gridmenu,"keydown",function(i){var r;if(i.keyCode==27)t.gridmenu.jqxMenu("close");else if(i.keyCode==13&&t.filterable&&t._buildfilter){var u=n(n.find("#filter1"+t.element.id)).jqxDropDownList("container").css("display")=="block",e=n(n.find("#filter2"+t.element.id)).jqxDropDownList("container").css("display")=="block",o=n(n.find("#filter3"+t.element.id)).jqxDropDownList("container").css("display")=="block",s=n(n.find("#filterclearbutton"+t.element.id)).hasClass("jqx-fill-state-focus");s?(r=n.data(document.body,"contextmenu"+t.element.id).column,t._clearfilter(t,t.element,r),t.gridmenu.jqxMenu("close")):u||e||o||(r=n.data(document.body,"contextmenu"+t.element.id).column,t.gridmenu.jqxMenu("close"),t._buildfilter(t,f,r))}}),this.popupwidth!="auto"&&(e=this.popupwidth),this.gridmenu.jqxMenu({width:e,height:c,autoCloseOnClick:b,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0}),this.filterable&&this.gridmenu.jqxMenu("_setItemProperty",f[0].id,"closeOnClick",!1),this.rtl&&(d=this.that,n.each(i.find("li"),function(){n(this).addClass(d.toTP("jqx-rtl"))}),o=function(n){var t=n.find("div");t.css("float","right"),t.css("margin-left","4px"),t.css("margin-right","-4px")},o(v),o(a),o(l),o(y),o(p)),this._handlemenueevents()}else this.columnsmenu=!1},_arrangemenu:function(){var t,i,r,u,e,f;this.gridmenu||this._initmenu(),t=this.gridlocalization.sortascendingstring.length,i=this.gridlocalization.sortascendingstring,this.gridlocalization.sortdescendingstring.length>t&&(t=this.gridlocalization.sortdescendingstring.length,i=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>t&&(t=this.gridlocalization.sortremovestring.length,i=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&(this.gridlocalization.groupbystring.length>t&&(t=this.gridlocalization.groupbystring.length,i=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>t&&(t=this.gridlocalization.groupremovestring.length,i=this.gridlocalization.groupremovestring)),r=200,i=n.trim(i).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),u=n("<span>"+i+"<\/span>"),u.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(u),r=u.outerWidth()+60,u.remove(),e=0,this.sortable&&this._togglesort&&this.showsortmenuitems&&(e=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(e+=2),f=e*27+3,this.filterable&&this.showfiltermenuitems&&this._initfilterpanel&&(f+=176,r+=20,n.jqx.browser.msie&&n.jqx.browser.version<8&&(f+=20)),this.menuitemsarray[0]==undefined&&(f=65),this.popupwidth!="auto"&&(r=this.popupwidth),this.gridmenu.jqxMenu({width:r,height:f})},_closemenuafterclick:function(t){var i=t!=null?t.data:this,o=!1,u,r,f;if(t.target==undefined||t.target!=undefined&&t.target.className.indexOf==undefined){i.gridmenu.jqxMenu("close");return}if(t.target.className.indexOf("filter")==-1){if(t.target.className.indexOf("jqx-grid-cell")!=-1){i.gridmenu.jqxMenu("close");return}if(!i._hasOpenedMenu||!n(t.target).ischildof(i.gridmenu)){var c=i.host.coord(),e=i.gridmenu.coord(),s=t.pageX,h=t.pageY;if(n.each(n(t.target).parents(),function(){return this.id!=null&&this.id.indexOf("filter")!=-1?(o=!0,!1):this.className.indexOf("filter")!=-1?(o=!0,!1):this.className.indexOf("jqx-grid-cell")!=-1?(i.gridmenu.jqxMenu("close"),!1):this.className.indexOf("jqx-grid-column")!=-1?(i.gridmenu.jqxMenu("close"),!1):void 0}),!o){try{if(this.filtermode==="default"){if(u=n(n.find("#filter1"+i.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup,r=new Date,r-u<100)return;if(f=n(n.find("#filter3"+i.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup,r-f<100)return;if(n(n.find("#filter3"+i.element.id)).jqxDropDownList("container").css("display")=="block")return;if(n(n.find("#filter1"+i.element.id)).jqxDropDownList("container").css("display")=="block")return;if(n(n.find("#filter2"+i.element.id)).jqxDropDownList("container").css("display")=="block")return}else{if(u=n(n.find("#filter1"+i.element.id)).data().jqxListBox.instance.vScrollInstance._mouseup,r=new Date,r-u<100)return;if(f=n(n.find("#filter1"+i.element.id)).data().jqxListBox.instance.hScrollInstance._mouseup,r-f<100)return}}catch(l){}s>=e.left&&s<=e.left+i.gridmenu.width()&&h>=e.top&&h<=e.top+i.gridmenu.height()||i.gridmenu.jqxMenu("close")}}}},_handlemenueevents:function(){var t=this.that;this.removeHandler(this.gridmenu,"closed"),this.addHandler(this.gridmenu,"closed",function(){t._closemenu()}),this.removeHandler(this.gridmenu,"itemclick"),this.addHandler(this.gridmenu,"itemclick",function(i){for(var o=i.args,s,e,f,r,h,u=0;u<t.menuitemsarray.length;u++)if(s=t.menuitemsarray[u],o==s){if(n(o).attr("ignoretheme")!=undefined)return;if(e=n.data(document.body,"contextmenu"+t.element.id),f=e.column,t.filterable&&t.gridmenu.jqxMenu("close"),r=f.displayfield,r==null&&(r=f.datafield),e!=null)switch(u){case 0:t.sortby(r,"ascending",null);break;case 1:t.sortby(r,"descending",null);break;case 2:t.sortby(r,null,null);break;case 3:t.addgroup(f.datafield);break;case 4:t.removegroup(f.datafield);break;case 5:h=n(t.menuitemsarray[6]),n(h).css("display","block")}break}})},getdatainformation:function(){var n=this.dataview.totalrecords;return this.summaryrows&&(n+=this.summaryrows.length),{rowscount:n,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows(),this._updaterowheights(),this._updaterowdetails()},_updatehiddenrows:function(){var t=this.that,i;this.hiddens=[],i=this.hiddenboundrows,n.each(i,function(n){if(this.index!=undefined){var r=this.index,i=t.getrowvisibleindex(n);t.hiddens[i]=this.hidden}})},_updaterowheights:function(){var t=this.that,i;this.heights=[],i=this.heightboundrows,n.each(i,function(n){if(this.index!=undefined){var r=this.index,i=t.getrowvisibleindex(n);t.heights[i]=this.height}})},_updaterowdetails:function(){var t=this.that,i;this.details=[],i=this.detailboundrows,n.each(i,function(n){if(this.index!=undefined){var r=this.index,i=t.getrowvisibleindex(n);t.details[i]=this.details}})},_getmenuitembyindex:function(n){return n==undefined?null:this.menuitemsarray[n]},_closemenu:function(){var t,f,i,r;if(this._hasOpenedMenu&&(this.gridmenu!=null&&this.gridmenu.jqxMenu("close"),t=n.data(document.body,"contextmenu"+this.element.id),f=16,t!=null&&this.autoshowcolumnsmenubutton&&(this.enableanimations?(n(t.columnsmenu).animate({"margin-left":0},"fast",function(){n(t.columnsmenu).css("display","none")}),i=this.rtl?0:-32,t.column.iconscontainer.animate({"margin-left":i},"fast")):(n(t.columnsmenu).css("display","none"),i=this.rtl?0:-32,t.column.iconscontainer.css("margin-left",i)),n.data(document.body,"contextmenu"+this.element.id,null)),this._hasOpenedMenu=!1,r=this._getmenuitembyindex(5),r)){var u=n(r).find("#filter1"+this.element.id),e=n(r).find("#filter2"+this.element.id),o=n(r).find("#filter3"+this.element.id);u.length>0&&this.filtermode==="default"&&(u.jqxDropDownList("hideListBox"),e.jqxDropDownList("hideListBox"),o.jqxDropDownList("hideListBox"))}},scrolloffset:function(n,t){n!=null&&t!=null&&n!=undefined&&t!=undefined&&(this.vScrollBar.jqxScrollBar("setPosition",n),this.hScrollBar.jqxScrollBar("setPosition",t))},scrollleft:function(n){n!=null&&n!=undefined&&this.hScrollBar.css("visibility")!="hidden"&&this.hScrollBar.jqxScrollBar("setPosition",n)},scrolltop:function(n){n!=null&&n!=undefined&&this.vScrollBar.css("visibility")!="hidden"&&this.vScrollBar.jqxScrollBar("setPosition",n)},beginupdate:function(){this._updating=!0,this._datachanged=!1},endupdate:function(){this.resumeupdate()},resumeupdate:function(){if(this._updating=!1,this._datachanged==!0){var n=this.vScrollInstance.value;this.render(!0,!0,!1),this._datachanged=!1,n!=0&&n<this.vScrollInstance.max&&this.scrolltop(n)}else this.rendergridcontent(!0),this._renderrows(this.virtualsizeinfo)},updating:function(){return this._updating},showloadelement:function(){this.renderloadelement&&this.dataloadelement.html(this.renderloadelement()),n(this.dataloadelement).css("visibility","visible"),n(this.dataloadelement).css("display","block")},hideloadelement:function(){n(this.dataloadelement).css("visibility","hidden"),n(this.dataloadelement).css("display","none")},_updatefocusedfilter:function(){var n=this.that;n.focusedfilter&&(n.focusedfilter.focus(),setTimeout(function(){var t,i;if(n.focusedfilter.focus(),n.focusedfilter[0].nodeName.toLowerCase()=="input"){t=n.focusedfilter.val().length;try{"selectionStart"in n.focusedfilter[0]?n.focusedfilter[0].setSelectionRange(t,t):(i=n.focusedfilter[0].createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select())}catch(r){}}},10))},databind:function(t,i){var r,e,u,f;this.loadingstate!==!0&&(this.host.css("display")=="block"&&(this.autoshowloadelement?(n(this.dataloadelement).css("visibility","visible"),n(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this._hideemptyrow()):(n(this.dataloadelement).css("visibility","hidden"),n(this.dataloadelement).css("display","none"))),!this._initgroupsheader&&this.groups.length>0&&(this.groups=[]),r=this.that,t==null&&(t={}),t.recordstartindex||(t.recordstartindex=0),t.recordendindex||(t.recordendindex=0),(t.loadallrecords==undefined||t.loadallrecords==null)&&(t.loadallrecords=!0),(t.sortcomparer==undefined||t.sortcomparer==null)&&(t.sortcomparer=null),(t.filter==undefined||t.filter==null)&&(t.filter=null),(t.sort==undefined||t.sort==null)&&(t.sort=null),(t.data==undefined||t.data==null)&&(t.data=null),e=null,t!=null&&(e=t._source!=undefined?t._source.url:t.url),this.dataview=this.dataview||new n.jqx.dataview,n.jqx.dataview.sort&&n.extend(this.dataview,new n.jqx.dataview.sort),n.jqx.dataview.grouping&&n.extend(this.dataview,new n.jqx.dataview.grouping),this.dataview.suspendupdate(),this.dataview.pageable=this.pageable,this.dataview.groupable=this.groupable,this.dataview.groups=this.groups,this.dataview.virtualmode=this.virtualmode,this.dataview.grid=this,this.dataview._clearcaches(),!this.pageable&&this.virtualmode&&(this.loadondemand=!0),r.initializedcall||(t._source&&this.sortable&&(t._source.sortcolumn!=undefined&&(this.sortcolumn=t._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=t._source.sortcolumn,t._source.sortcolumn=null),t._source.sortdirection!=undefined&&(this.dataview.sortfielddirection=t._source.sortdirection,u=t._source.sortdirection,f=u=="a"||u=="asc"||u=="ascending"||u==!0?!0:!1,this.sortdirection=u!=null?{ascending:f,descending:!f}:{ascending:!1,descending:!1})),this.pageable&&t._source&&(t._source.pagenum!=undefined&&(this.dataview.pagenum=t._source.pagenum),t._source.pagesize!=undefined?(this.pagesize=t._source.pagesize,this.dataview.pagesize=t._source.pagesize):(this.dataview.pagesize=t._source.pagesize,this.dataview.pagesize==undefined&&(this.dataview.pagesize=this.pagesize))),this.sortable&&(t.sortcolumn&&(this.dataview.sortfield=t.sortcolumn),t.sortdirection&&(this.dataview.sortfielddirection=t.sortdirection)),this.autoloadstate&&this.loadstate&&this.loadstate(null,!0)),this._loading=!0,this.dataview.update=function(t){var s,e,h;if(!r.pageable&&r.virtualmode&&(r.loadondemand=!0),r._loading=!1,r.dataview.isupdating()&&r.dataview.resumeupdate(!1),r.pageable&&r.pagerrenderer)if(r._initpager)r._initpager();else throw new Error("jqxGrid: Missing reference to jqxgrid.pager.js.");if(r.source.sortcolumn&&r.sortby&&!r.virtualmode)r.render(),r.source._source.sort||r.sortby(r.source.sortcolumn,r.source.sortdirection,r.source.sortcomparer),r.source.sortcolumn=null;else{var u=r.vScrollInstance.value,f=r.hScrollInstance.value,o=r.source.datatype;if(o!="local"||o!="array"){if(s=r.virtualsizeinfo==null||r.virtualsizeinfo!=null&&r.virtualsizeinfo.virtualheight==0,i=="cells"){if(e=!1,r.filterable&&r._initfilterpanel&&r.dataview.filters.length&&(e=!0),!1==t){r.vScrollInstance.isScrolling()||r.hScrollInstance.isScrolling()||(r._cellscache=[],r._pagescache=[],r._renderrows(r.virtualsizeinfo),r.showfilterrow&&r.filterable&&r.filterrow&&r._updatelistfilters(!0),r.showaggregates&&r._updateaggregates&&r._updateaggregates()),r.autoshowloadelement&&(n(r.dataloadelement).css("visibility","hidden"),n(r.dataloadelement).css("display","none"));return}e?i="filter":r.sortcolumn!=undefined&&(i="sort")}!r.virtualmode||s||r.virtualmode&&r.pageable?r.initializedcall==!0&&i=="pagechanged"?(u=0,r.groupable&&r.groups.length>0?(r._render(!0,!0,!1,!1,!1),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo)):(r.rendergridcontent(!0),r.pageable&&r.updatepagerdetails&&(r.updatepagerdetails(),r.autoheight?(r._updatepageviews(),r.autorowheight&&r._renderrows(this.virtualsizeinfo)):r.autorowheight&&(r._updatepageviews(),r._renderrows(this.virtualsizeinfo)))),r.showaggregates&&r._updateaggregates&&r._updateaggregates()):i=="filter"?(r._render(!0,!0,!1,!1,!1),r._updatefocusedfilter(),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo)):i=="sort"?(r.rendergridcontent(!0),r.showaggregates&&r._updateaggregates&&r._updateaggregates()):i=="data"?r._render(!0,!0,!1,!1,!1):i=="state"?r._render(!0,!0,!1,r.menuitemsarray&&r.menuitemsarray.length>0&&!r.virtualmode):r._render(!0,!0,!0,r.menuitemsarray&&r.menuitemsarray.length>0&&!r.virtualmode):r.virtualmode&&t==!0&&!r.pageable?(r._render(!0,!0,!1,!1,!1),r._updatefocusedfilter(),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo)):r.virtualmode&&!r.pageable&&t==!1&&i!=undefined?(r.rendergridcontent(!0),r.showaggregates&&r._updateaggregates&&r._updateaggregates()):r.virtualmode&&r.dataview.totalrecords==0&&r.dataview.filters.length>0?r._render(!0,!0,!0,r.menuitemsarray&&!r.virtualmode):(r._pagescache=[],r._renderrows(r.virtualsizeinfo)),r.vScrollInstance.value!=u&&u<=r.vScrollInstance.max&&r.vScrollInstance.setPosition(u),r.hScrollInstance.value!=f&&f<=r.hScrollInstance.max&&r.hScrollInstance.setPosition(f)}}r.autoshowloadelement&&(n(r.dataloadelement).css("visibility","hidden"),n(r.dataloadelement).css("display","none")),r.pageable&&r.pagerrightbutton&&(r.pagerrightbutton.jqxButton({disabled:!1}),r.pagerleftbutton.jqxButton({disabled:!1}),r.pagershowrowscombo.jqxDropDownList({disabled:!1})),r._raiseEvent(11),r.initializedcall?r._updateTouchScrolling():(r._raiseEvent(0),r.initializedcall=!0,r.ready&&r.ready(),r.autoloadstate&&r.loadstate&&r._loadselectionandcolumnwidths(),r.width!=null&&r.width.toString().indexOf("%")!=-1||r.height!=null&&r.height.toString().indexOf("%")!=-1,r.host.css("visibility")=="hidden"&&(h=n.jqx.browser.msie&&n.jqx.browser.version<8,r.vScrollBar.css("visibility")=="visible"&&r.vScrollBar.css("visibility","inherit"),r.autowidth||r.hScrollBar.css("visibility")=="visible"&&r.hScrollBar.css("visibility","inherit"),r._intervalTimer=setInterval(function(){r.host.css("visibility")=="visible"&&(r._updatesize(!0),clearInterval(r._intervalTimer))},100)))},this.dataview.databind(t),this.dataview.isupdating()&&(e!=undefined?this.dataview.suspend=!1:this.dataview.resumeupdate(!1)),this._initializeRows())},scrollto:function(n,t){undefined!=n&&this.hScrollInstance.setPosition(n),undefined!=t&&this.vScrollInstance.setPosition(t)},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(n){var u,f,r,h,t,i;if(this.autoheight&&!this.pageable||(u=this._getpagesize(),r=Math.floor(n/u),this._pageviews[r]||this.pageable||this._updatepageviews(),this.groupable&&this.groups.length>0))return!0;if(f=!1,this.pageable&&this.gotopage&&!this.virtualmode&&(r=Math.floor(n/u),this.dataview.pagenum!=r)){if(this.groupable&&this.groups.length>0)return!0;this.gotopage(r),f=!0}var o=this.vScrollInstance.value,s=this._gettableheight()-this.rowsheight,e=u*(n/u-r);if(e=Math.round(e),this._pageviews[r]){if(h=this._pageviews[r].top,t=h+e*this.rowsheight,this.rowdetails)for(i=u*r;i<n;i++)this.details[i]&&this.details[i].rowdetailshidden==!1&&(t+=this.details[i].rowdetailsheight);this.scrollmode=="deferred"&&this.vScrollInstance.max<=t+this.rowsheight&&(t=this.vScrollInstance.max),t<o?(this.scrolltop(t),f=!0):t>o+s+2&&(this.scrolltop(t-s),f=!0)}else if(this.pageable){if(t=e*this.rowsheight,this.rowdetails)for(i=u*r;i<u*r+e;i++)this.details[i]&&this.details[i].rowdetailshidden==!1&&(t+=this.details[i].rowdetailsheight);(t<o||t>o+s)&&(this.scrollto(0,t),f=!0)}return f},ensurecellvisible:function(t,i){var r=this.that,h=this.hScrollBar.jqxScrollBar("value"),f=r.hScrollInstance.max,c,u,o;if(r.rtl&&this.hScrollBar.css("visibility")!="visible"&&(f=0),c=this.ensurerowvisible(t),u=0,this.columns.records){if(o=h,this.hScrollBar.css("visibility")=="hidden")return;var l=this.host.width(),s=0,a=this.vScrollBar.css("visibility")=="visible"?20:0,e=!1;n.each(this.columns.records,function(){if(this.datafield==i){var n=0,t=r.rtl?f-h:o;return u+this.width>t+l-a?(n=u+this.width-l+a,r.rtl&&(n=f-n),r.scrollleft(n),e=!0):u<=t&&(n=u-this.width,r.rtl&&(n=f-n),r.scrollleft(n),e=!0),s==0?(r.rtl?r.scrollleft(f):r.scrollleft(0),e=!0):s==r.columns.records.length-1&&r.hScrollBar.css("visibility")=="visible"&&(r.rtl?r.scrollleft(r.hScrollBar.jqxScrollBar("min")):r.scrollleft(r.hScrollBar.jqxScrollBar("max")),e=!0),!1}s++,u+=this.width}),e||r.scrollleft(o)}return c},setrowheight:function(n,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return n==null||t==null?!1:(this.heightboundrows[n]={index:n,height:t},n=this.getrowvisibleindex(n),n<0)?!1:(this.rows.records[n]?this.rows.records[n].height=t:(row=new i(this,null),row.height=t,this.rows.replace(n,row)),this.heights[n]=t,this.rendergridcontent(!0),!0)},getrowheight:function(n){return n==null?null:(n=this.getrowvisibleindex(n),n<0)?!1:this.rows.records[n]?this.rows.records[n].height:void 0},setrowdetails:function(t,i,r,u){var f,o,e;if(t!=undefined&&t!=null&&!(t<0))return(f=t+"_",this._rowdetailscache[f]&&(o=this._rowdetailscache[f].element,n(o).remove(),this._rowdetailscache[f]=null),e=this.dataview.generatekey(),this.detailboundrows[t]={index:t,details:{rowdetails:i,rowdetailsheight:r,rowdetailshidden:u,key:e}},t=this.getrowvisibleindex(t),t<0)?!1:this._setrowdetails(t,i,r,u,e)},getcolumn:function(t){var i=null;return this.columns.records&&n.each(this.columns.records,function(){if(this.datafield==t||this.displayfield==t)return i=this,!1}),i},_getcolumnindex:function(t){var i=-1;return this.columns.records&&n.each(this.columns.records,function(){return i++,this.datafield==t?!1:void 0}),i},_getcolumnat:function(n){return this.columns.records[n]},_getprevvisiblecolumn:function(n){for(var i=this.that,t;n>0;){if(n--,t=i.getcolumnat(n),!t)return null;if(!t.hidden)return t}return null},_getnextvisiblecolumn:function(n){for(var i=this.that,t;n<this.columns.records.length;){if(n++,t=i.getcolumnat(n),!t)return null;if(!t.hidden)return t}return null},getcolumnat:function(n){return isNaN(n)?null:this.columns.records[n]},_getcolumn:function(t){var i=null;return n.each(this._columns,function(){if(this.datafield==t||this.displayfield==t)return i=this,!1}),i},_setcolumnproperty:function(n,t,i){var r,f,u;if(n==null||t==null||i==null)return null;if(t=t.toLowerCase(),r=this.getcolumn(n),r!=null){f=r[t],r[t]=i,u=this._getcolumn(n),u!=null&&(u[t]=i),this._cellscache=[];switch(t){case"filteritems":this.filterable&&this.showfilterrow&&this._updatelistfilters(!0,!0);break;case"text":this.prerenderrequired=!0,this._rendercolumnheaders(),this._updatecellwidths(),this._groupsheader()&&this._initgroupsheader&&this._initgroupsheader(),this._renderrows(this.virtualsizeinfo);break;case"editable":case"resizable":case"draggable":if(t=="editable"&&i!=f){if((this.editcell!=null&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!0),r.columntype=="checkbox"&&(this.prerenderrequired=!0,this.rendergridcontent(!0,!1),this.updating()))||this.updating())return!1;this._renderrows(this.virtualsizeinfo)}break;case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"class":if(this.prerenderrequired=!0,this.rendergridcontent(!0),this.updating())return!1;this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updateaggregates&&this._updateaggregates();break;case"width":case"minwidth":case"maxwidth":if(this.updating())return!1;r._width=null,this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}}},_getcolumnproperty:function(n,t){if(n==null||t==null)return null;t=t.toLowerCase();var i=this.getcolumn(n);return i[t]},setcolumnproperty:function(n,t,i){this._setcolumnproperty(n,t,i)},getcolumnproperty:function(n,t){return this._getcolumnproperty(n,t)},hidecolumn:function(n){this._setcolumnproperty(n,"hidden",!0)},showcolumn:function(n){this._setcolumnproperty(n,"hidden",!1)},iscolumnvisible:function(n){return!this._getcolumnproperty(n,"hidden")},pincolumn:function(n){this._setcolumnproperty(n,"pinned",!0)},unpincolumn:function(n){this._setcolumnproperty(n,"pinned",!1)},iscolumnpinned:function(n){return this._getcolumnproperty(n,"pinned")},_setrowdetails:function(n,t,i,r,u){var f,e;if(i==0&&(i=100),n==null||i==null)return!1;if(u!=null)this.details[n]={rowdetails:t,rowdetailsheight:i,rowdetailshidden:r,detailskey:u};else{var s=this.details[n]!=null?this.details[n].detailskey:null,o={rowdetails:t,rowdetailsheight:i,rowdetailshidden:r,detailskey:s},h=this.that;for(f=0;f<this.detailboundrows.length;f++)if(this.detailboundrows[f]!=undefined&&(e=this.detailboundrows[f],e.details.detailskey==s)){e.details.rowdetailsheight=o.rowdetailsheight,e.details.rowdetailshidden=o.rowdetailshidden,e.details.rowdetails=o.rowdetails;break}this.details[n]=o}return this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),!0},getrowdetails:function(n){return n==null?!1:(n=this.getrowvisibleindex(n),this._getrowdetails(n))},_getrowdetails:function(n){return n==null?!1:n<0?!1:this.details[n]?this.details[n]:this.rowdetailstemplate?this.rowdetailstemplate:void 0},getrecordscount:function(){return this.dataview.totalrecords},showrowdetails:function(n){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(n==null||(n=this.getrowvisibleindex(n),n<0))return!1;var t=this._getrowdetails(n);return this._setrowdetailsvisibility(n,t,!1)},hiderowdetails:function(n){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(n=this.getrowvisibleindex(n),n<0)return!1;var t=this._getrowdetails(n);return this._setrowdetailsvisibility(n,t,!0)},_togglerowdetails:function(n){var r=n.visibleindex,t=this._getrowdetails(r);if(t!=null){var i=this.vScrollInstance.value,u=!t.rowdetailshidden,f=this._setrowdetailsvisibility(r,t,u);return i!==0&&this.vScrollBar.css("visibility")!=="hidden"&&(i<=this.vScrollInstance.max?this.vScrollInstance.setPosition(i):this.vScrollInstance.setPosition(this.vScrollInstance.max)),f}return!1},_setrowdetailsvisibility:function(n,t,i){var u,r;if(this.rowdetailstemplate&&(this.details||(this.details=[]),this.details[n]||(this.details[n]={rowdetailshidden:this.rowdetailstemplate.rowdetailshidden,rowdetailsheight:this.rowdetailstemplate.rowdetailsheight,rowdetails:this.rowdetailstemplate.rowdetails},u=this.dataview.generatekey(),this.details[n].detailskey=u,this.detailboundrows[n]={index:n,details:this.details[n]})),t!=null)this.details[n].rowdetailshidden=i;else return!1;return r=this.details[n],i?this._raiseEvent(21,{rowindex:n,details:r.rowdetails,height:r.rowdetailsheight}):this._raiseEvent(20,{rowindex:n,details:r.rowdetails,height:r.rowdetailsheight}),this._setrowdetails(n,r.rowdetails,r.rowdetailsheight,r.rowdetailshidden)},getrowvisibleindex:function(n){if(n==undefined||n==null||n<0)return!1;if(this.virtualmode){var t=this.dataview.loadedrecords[n];return t==undefined?-1:t.visibleindex}return this.getrowdisplayindex(n)},hiderow:function(n){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return n==undefined||n==null||n<0?!1:n==null?!1:(this.hiddenboundrows[n]={index:n,hidden:!0},n=this.getrowvisibleindex(n),this._setrowvisibility(n,!0))},showrow:function(n){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return n==undefined||n==null||n<0?!1:n==null?!1:(this.hiddenboundrows[n]={index:n,hidden:!1},n=this.getrowvisibleindex(n),this._setrowvisibility(n,!1))},isrowhiddenat:function(n){return n==null?null:(n=this.getrowvisibleindex(n),this.rows.records[n]?this.rows.records[n].hidden:void 0)},_setrowvisibility:function(n,t,i){return n==null?!1:(this.hiddens[n]=t,i==undefined||i)?(this.rendergridcontent(!0),!0):!1},_loadrows:function(){var s,c,f,u,n,e,t,v,o,y;if(this._pageviews[this.dataview.pagenum]||this.pageable){if(s=this.pageable?0:this._pageviews[this.dataview.pagenum].top,!this.pageable&&this._pagescache[this.dataview.pagenum]!=undefined)return null;if(this.virtualsizeinfo){var r=this.that,l=[],h=[],a=r.groupable&&r.groups.length>0,w=this.dataview.totalrecords,b=this.virtualsizeinfo.virtualheight,p=0;for(this.rows.beginupdate(),c=this.dataview.pagesize,this.pageable&&a&&(c=this.dataview.rows.length),f=0;f<c;f++){if(f>=this.dataview.rows.length)break;(u=this.dataview.rows[f],n=null,r.rows.records[u.visibleindex]?(n=r.rows.records[u.visibleindex],n.setdata(u)):n=new i(r,u),n.hidden=this.hiddens[n.visibleindex],this.rowdetailstemplate&&(n.rowdetails=this.rowdetailstemplate.rowdetails,n.rowdetailsheight=this.rowdetailstemplate.rowdetailsheight,n.rowdetailshidden=this.rowdetailstemplate.rowdetailshidden),e=this.details[n.visibleindex],e?(n.rowdetails=e.rowdetails,n.rowdetailsheight=e.rowdetailsheight,n.rowdetailshidden=e.rowdetailshidden):this.rowdetailstemplate||(n.rowdetails=null),a&&this.pageable&&n.parentbounddata!=null&&(t=l[n.parentbounddata.uniqueid],t!=null&&(v=this._findgroupstate(t.uniqueid),this._setsubgroupsvisibility&&this._setsubgroupsvisibility(this,n.parentbounddata,!v,!1),n.hidden=this.hiddens[n.visibleindex]),t!=null&&t!=undefined&&(n.parentrow=t,t.subrows[t.subrows.length++]=n)),n.hidden)||(o=u.visibleindex,this.heights[o]||(this.heights[o]=this.rowsheight),n.height=this.heights[o],this.rowdetails&&n.rowdetails&&!n.rowdetailshidden&&(n.height+=n.rowdetailsheight),l[n.uniqueid]=n,h[p++]=n,n.top=s,s+=n.height,y=o,r.rows.replace(y,n))}(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews&&this._pageviews.length>0&&(this._pageviews[0].height=s),this.rows.resumeupdate(),h.length>0&&(this._pagescache[this.dataview.pagenum]=h)}}},_gettableheight:function(){var n,t;return this.tableheight!=undefined?this.tableheight:(n=this.host.height(),this.columnsheader&&(t=this.columnsheader.outerHeight(),this.showheader||(t=0)),n-=t,this.hScrollBar[0].style.visibility=="visible"&&(n-=this.hScrollBar.outerHeight()),this.pageable&&(n-=this.pager.outerHeight()),this._groupsheader()&&(n-=this.groupsheader.outerHeight()),this.showtoolbar&&(n-=this.toolbarheight),this.showstatusbar&&(n-=this.statusbarheight),n>0)?(this.tableheight=n,n):this.host.height()},_getpagesize:function(){if(this.pageable)return this.pagesize;if(this.virtualmode){var n=Math.round(this.host.height())+2*this.rowsheight;return Math.round(n/this.rowsheight)}return this.autoheight||this.autorowheight?this.dataview.totalrows==0?1:this.dataview.totalrows:this.dataview.totalrows<100&&this.dataview.totalrecords<100&&this.dataview.totalrows>0?this.dataview.totalrows:100},_calculatevirtualheight:function(){var l=this.that,c=Math.round(this.host.height())+2*this.rowsheight,e,n,o;realheight=this._gettableheight(),e=Math.round(c/this.rowsheight),this.heights=[],this.hiddens=[],this.details=[],this.expandedgroups=[],this.hiddenboundrows=[],this.heightboundrows=[],this.detailboundrows=[],n=Math.max(this.dataview.totalrows,this.dataview.totalrecords),this.pageable&&(n=this.pagesize,this.pagesize>Math.max(this.dataview.totalrows,this.dataview.totalrecords)&&this.autoheight?n=Math.max(this.dataview.totalrows,this.dataview.totalrecords):this.autoheight||this.dataview.totalrows<this.pagesize&&(n=Math.max(this.dataview.totalrows,this.dataview.totalrecords)));var r=n*this.rowsheight,s=0,h=0,u=0,t=this._getpagesize(),f=t*this.rowsheight,i=0;if(!this.pageable&&this.autoheight&&(e=n),n+t>0)while(i<=n+t){if(s+=f,i-t<n&&i>=n){o=i-n,o>0&&(u-=f,this._pageviews[h-1]={top:u,height:f-o*this.rowsheight});break}else this._pageviews[h++]={top:u,height:f};u=s,i+=t}return this.resizingGrid!=!0&&this.vScrollBar.jqxScrollBar({value:0}),r>realheight&&!this.autoheight?(this.vScrollBar.css("visibility","visible"),this.scrollmode=="deferred"?this.vScrollBar.jqxScrollBar({max:r}):this.vScrollBar.jqxScrollBar({max:r-realheight})):this.vScrollBar.css("visibility","hidden"),this.dataview.pagesize=t,this.dataview.updateview(),{visiblerecords:e,virtualheight:r}},_updatepageviews:function(){var i,t,r,u,s,v;if(!this.updating()){this._pagescache=[],this._pageviews=[],this.tableheight=null;var h=this.that,y=Math.round(this.host.height())+2*this.rowsheight,c=Math.round(y/this.rowsheight),f=Math.max(this.dataview.totalrows,this.dataview.totalrecords),n=f*this.rowsheight,l=0,e=0,p=0,a=0,o=0,w=this._getpagesize();if(this.pageable)this._updatepagedview&&(n=this._updatepagedview(f,n,0)),this.autoheight&&this._arrange();else for(i=0;i<f;i++)t={index:i,height:this.heights[i],hidden:this.hiddens[i],details:this.details[i]},this.heights[i]==undefined&&(this.heights[i]=this.rowsheight,t.height=this.rowsheight),this.hiddens[i]==undefined&&(this.hiddens[i]=!1,t.hidden=!1),this.details[i]==undefined&&(this.details[i]=null),t.height!=h.rowsheight&&(n-=h.rowsheight,n+=t.height),t.hidden?n-=t.height:(e+=t.height,r=0,this.rowdetails&&(this.rowdetailstemplate&&(t.details||(t.details=this.rowdetailstemplate)),t.details&&t.details.rowdetails&&!t.details.rowdetailshidden&&(r=t.details.rowdetailsheight,e+=r,n+=r)),l+=t.height+r),o++,(o>=w||i==f-1)&&(this._pageviews[p++]={top:a,height:e},e=0,a=l,o=0);u=this._gettableheight(),n>u?(this.pageable&&this.gotopage&&(n=this._pageviews[0].height,n<0&&(n=this._pageviews[0].height)),this.vScrollBar.css("visibility")!="visible"&&this.vScrollBar.css("visibility","visible"),(n<=u||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),n-u>0?this.scrollmode!="deferred"&&(s=n-u,v=this.vScrollInstance.max,this.vScrollBar.jqxScrollBar({max:s}),s!=v&&this.vScrollBar.jqxScrollBar({value:0})):this.vScrollBar.jqxScrollBar({value:0,max:n})):(this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})),this._arrange(),this.autoheight&&(c=Math.round(this.host.height()/this.rowsheight)),this.virtualsizeinfo={visiblerecords:c,virtualheight:n}}},updatebounddata:function(n){this.databind(this.source,n)},refreshdata:function(){this._refreshdataview(),this.render()},_updatevscrollbarmax:function(){var n,t,i;this._pageviews&&this._pageviews.length>0&&(n=this._pageviews[0].height,this.virtualmode&&(n=this.virtualsizeinfo.virtualheight),t=this._gettableheight(),n>t?(this.pageable&&this.gotopage&&(n=this._pageviews[0].height,n<0&&(n=this._pageviews[0].height)),this.vScrollBar.css("visibility")!="visible"&&this.vScrollBar.css("visibility","visible"),(n<=t||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),n-t>0?(i=n-t,this.vScrollBar.jqxScrollBar({max:i})):this.vScrollBar.jqxScrollBar({value:0,max:n})):(this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})))},_refreshdataview:function(){this.dataview.refresh()},refresh:function(t){if(t!=!0){if(n.jqx.isHidden(this.host))return;this.virtualsizeinfo!=null&&(this._cellscache=[],this._renderrows(this.virtualsizeinfo),this._updatesize())}},render:function(){this._render(!0,!0,!0,!0)},invalidate:function(){this.virtualsizeinfo&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},clear:function(){this.databind(null),this.render()},_preparecolumngroups:function(){var v=this.columnsheight,h,c,i,s,r,y,l,n,t,f,u,a,e,o;if(this.columngroups){if(this.columnshierarchy=[],this.columngroups.length){for(h=this,n=0;n<this.columngroups.length;n++)this.columngroups[n].parent=null,this.columngroups[n].groups=null;for(n=0;n<this.columns.records.length;n++)this.columns.records[n].parent=null,this.columns.records[n].groups=null;for(c=function(n){for(var i,t=0;t<h.columngroups.length;t++)if(i=h.columngroups[t],i.name===n)return i;return null},n=0;n<this.columngroups.length;n++)t=this.columngroups[n],t.groups||(t.groups=null),t.parentgroup&&(i=c(t.parentgroup),i&&(t.parent=i,i.groups||(i.groups=[]),i.groups.indexOf(t)===-1&&i.groups.push(t)));for(n=0;n<this.columns.records.length;n++)t=this.columns.records[n],t.columngroup&&(i=c(t.columngroup),i&&(i.groups||(i.groups=[]),t.parent=i,i.groups.indexOf(t)===-1&&i.groups.push(t)));for(s=0,n=0;n<this.columns.records.length;n++){for(t=this.columns.records[n],r=t,t.level=0;r.parent;)r=r.parent,t.level++;for(r=t,y=t.level,s=Math.max(s,t.level);r.parent;)r=r.parent,r&&(r.level=--y)}for(l=function(n){var i=[],t,u,r;for(n.columngroup&&i.push(n),t=0;t<n.groups.length;t++)if(n.groups[t].columngroup)i.push(n.groups[t]);else if(n.groups[t].groups)for(u=l(n.groups[t]),r=0;r<u.length;r++)i.push(u[r]);return i},n=0;n<this.columngroups.length;n++){for(t=this.columngroups[n],f=l(t),t.columns=f,u=[],a=0,e=0;e<f.length;e++)u.push(this.columns.records.indexOf(f[e])),f[e].pinned&&a++;if(a!=0)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group cannot be pinned.");for(u.sort(function(n,t){return(n=parseInt(n),t=parseInt(t),n<t)?-1:n>t?1:0}),o=1;o<u.length;o++)if(u[o]!=u[o-1]+1)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group are expected to be siblings in the columns array.");}}this.columngroupslevel=1+s,v=this.columngroupslevel*this.columnsheight}return v},_render:function(t,i,r,u,f){var e,o;if(this.dataview!=null&&!this._loading){if(n.jqx.isHidden(this.host)){e=this,e.___hiddenTimer&&(clearInterval(e.___hiddenTimer),e.___hiddenTimer=null),this.___hiddenTimer=setInterval(function(){n.jqx.isHidden(e.host)||(clearInterval(e.___hiddenTimer),e._render(t,i,r,u,f))},300);return}this.editcell!=null&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!1),this.validationpopup=null,this._removeHandlers(),this._addHandlers(),this._initializeRows(),this._requiresupdate=i!=undefined?i:!0,this._newmax=null,r&&(this._requiresupdate||u!=!1&&this._initmenu(),this.columns==null?this.columns=new n.jqx.collection(this.element):this._initializeColumns()),this.tableheight=null,this._pagescache=[],this._pageviews=[],this.visiblerows=[],this.hittestinfo=[],this._requiresupdate&&(this._clearcaches(),u==!0&&this._initmenu()),this.virtualsizeinfo=null,this.prerenderrequired=!0,(this.groupable&&this.groups.length>0&&this.rowdetails||this.rowdetails)&&this.gridcontent&&(this._rowdetailscache=[],this._rowdetailselementscache=[],this.detailboundrows=[],this.details=[],n.jqx.utilities.html(this.gridcontent,""),this.gridcontent=null),this.gridcontent&&this.editable&&this._destroyeditors&&this._destroyeditors(),r?(this.filterrow&&this.filterrow.detach(),n.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||n('<div style="overflow: hidden;"><\/div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header"))):this.gridcontent&&n.jqx.utilities.html(this.gridcontent,""),this.showheader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none"),this.gridcontent=this.gridcontent||n('<div style="width: 100%; overflow: hidden; position: absolute;"><\/div>'),this.gridcontent.remove(),o=this.columnsheight,o=this._preparecolumngroups(),this.showfilterrow&&this.filterable?this.columnsheader.height(o+this.filterrowheight):this.columnsheader.height(o),this.content.append(this.columnsheader),this.content.append(this.gridcontent),this._arrange(),this._initgroupsheader&&this._initgroupsheader(),this.selectionarea=this.selectionarea||n("<div style='z-index: 99999; visibility: hidden; position: absolute;'><\/div>"),this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea")),this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.content.append(this.selectionarea),this.tableheight=null,this.rendergridcontent(!1,r),this.groups.length>0&&this.groupable&&(this.suspendgroupevents=!0,this.collapseallgroups&&(this.groupsexpandedbydefault?this.expandallgroups(!1):(this.collapseallgroups(!1),this._updatescrollbarsafterrowsprerender())),this.suspendgroupevents=!1),this.pageable&&this.updatepagerdetails&&(this.updatepagerdetails(),this.autoheight&&this._updatepageviews(),this.autorowheight&&(this.autoheight||this._updatepageviews(),this._renderrows(this.virtualsizeinfo))),this.showaggregates&&this._updateaggregates&&this._updateaggregates(),this._addoverlayelement(),this.scrollmode=="deferred"&&this._addscrollelement(),this.showfilterrow&&this.filterable&&this.filterrow&&(f==undefined||f==!0)&&this._updatelistfilters(!r),this.rendered&&this.rendered("full")}},_addoverlayelement:function(){var t,i,r;if(this.autoheight){this._overlayElement&&this._overlayElement.remove();return}t=n.jqx.utilities.getBrowser(),(t.browser=="msie"&&parseInt(t.version)<9||this.isTouchDevice())&&(this._overlayElement&&this._overlayElement.remove(),this._overlayElement=n("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'><\/div>"),this._overlayElement.css("background","white"),this._overlayElement.css("z-index",18e3),this._overlayElement.css("opacity",.001),this.isTouchDevice()?this.vScrollBar.css("visibility")!=="hidden"||this.hScrollBar.css("visibility")!=="hidden"?(i=0,this.selectionmode=="checkbox"&&(i+=30),(this.groupable||this.rowdetails)&&this._overlayElement.css("left",30*(this.groups.length+(this.rowdetails?1:0))),r=this._overlayElement.css("left"),this._overlayElement.css("left",r+i)):this._overlayElement&&this._overlayElement.remove():this.content.prepend(this._overlayElement)),this._updateTouchScrolling()},_addscrollelement:function(){this._scrollelement&&this._scrollelement.remove(),this._scrollelementoverlay&&this._scrollelementoverlay.remove(),this._scrollelementoverlay=n("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'><\/div>"),this._scrollelementoverlay.css("background","black"),this._scrollelementoverlay.css("z-index",18e3),this._scrollelementoverlay.css("opacity",.1),this._scrollelement=n("<span style='visibility: hidden; top: 50%; right: 10px; position: absolute;'><\/span>"),this._scrollelement.css("z-index",18005),this._scrollelement.addClass(this.toThemeProperty("jqx-button")),this._scrollelement.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._scrollelement.addClass(this.toThemeProperty("jqx-rc-all")),this._scrollelement.addClass(this.toThemeProperty("jqx-shadow")),this.content.prepend(this._scrollelement),this.content.prepend(this._scrollelementoverlay)},rendergridcontent:function(n,t){var r,i,t,u;return this.updating()?!1:((n==undefined||n==null)&&(n=!1),this._requiresupdate=n,r=this.prerenderrequired,this.prerenderrequired&&this._arrange(),i=this.that,t=t,(t==null||t==undefined)&&(t=!0),this.tableheight=null,i.virtualsizeinfo=i.virtualsizeinfo||i._calculatevirtualheight(),i.pageable&&!i.autoheight&&i.dataview.totalrows<i.pagesize&&(i._requiresupdate=!0),t?i._rendercolumnheaders():(this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn()),i._renderrows(i.virtualsizeinfo),this.gridcontent&&(this.gridcontent[0].scrollTop!=0&&(this.gridcontent[0].scrollTop=0),this.gridcontent[0].scrollLeft!=0&&(this.gridcontent[0].scrollLeft=0)),r&&(u=this.tableheight,this._arrange(),u!=this.tableheight&&this.autoheight&&i._renderrows(i.virtualsizeinfo)),this.rtl&&this._renderhorizontalscroll(),this.autosavestate&&this.initializedcall!=null&&this.savestate&&this.savestate(),!0)},_updatecolumnwidths:function(){var t=this.host.width(),i=t,f="",o,s,h,r,c,e,l,u;if(this.columns!=undefined&&this.columns.records!=undefined){if(o=this.that,n.each(this.columns.records,function(n,r){if(!(this.hidden&&this.hideable))if(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined){var r=0,u=o.vScrollBar[0].style.visibility=="hidden"?0:o.scrollbarsize+5;r=parseInt(this.width)*i/100,this._percentagewidth!=undefined&&(r=parseInt(this._percentagewidth)*(i-u)/100),r<this.minwidth&&this.minwidth!="auto"&&(r=this.minwidth),r>this.maxwidth&&this.maxwidth!="auto"&&(r=this.maxwidth),t-=Math.round(r)}else this.width=="auto"||this._width?f+=this.text:t-=this.width}),s=this._gettableheight(),!this.autoheight&&this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>s)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){if(h=this.dataview.loadedrootgroups.length*this.rowsheight,this.pageable)for(r=0;r<this.dataview.rows.length;r++)this.dataview.rows[r].group&&this.dataview.rows[r].level===0&&(h+=this.rowsheight);h>s?(t-=this.scrollbarsize+5,i-=this.scrollbarsize+5):this.vScrollBar.css("visibility")=="visible"&&(t-=this.scrollbarsize+5,i-=this.scrollbarsize+5)}else t-=this.scrollbarsize+5,i-=this.scrollbarsize+5;else t-=this.scrollbarsize+5,i-=this.scrollbarsize+5;(c=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth,i-=c,e=this.columnsheader.find("#columntable"+this.element.id),e.length!=0)&&(l=e.find(".jqx-grid-column-header"),u=0,n.each(this.columns.records,function(r){var s=n(l[r]),h=!1,o=this.width,e;(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined)&&(o=this._percentagewidth!=undefined?parseInt(this._percentagewidth)*i/100:parseInt(this.width)*i/100,h=!0),this.width=="auto"||this._width||h?h?(o<this.minwidth&&this.minwidth!="auto"&&(o=this.minwidth,this.width=o),o>this.maxwidth&&this.maxwidth!="auto"&&(o=this.maxwidth,this.width=o),parseInt(s[0].style.width)!=o&&(s.width(o),this.width=o)):(e=Math.floor(t*(this.text.length/f.length)),isNaN(e)&&(e=this.minwidth),e<0&&($element=n("<span>"+this.text+"<\/span>"),n(document.body).append($element),e=10+$element.width(),$element.remove()),e<this.minwidth&&(e=this.minwidth),e>this.maxwidth&&(e=this.maxwidth),t-=e,f=f.substring(this.text.length),this._width="auto",this.width=e,s.width(this.width)):parseInt(s[0].style.width)!=this.width&&s.width(this.width),parseInt(s[0].style.left)!=u&&s.css("left",u),this.hidden&&this.hideable||(u+=this.width),this._requirewidthupdate=!0}),this.columnsheader.width(2+u),e.width(this.columnsheader.width()),this._resizecolumngroups(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),this.autowidth&&this._arrange())}},_rendercolumnheaders:function(){var t=this.that,e,d,f,r,v,o,i,k,y,p,g,nt,b;if(!this.prerenderrequired){this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui());return}this._columnsbydatafield=[],this.columnsheader.find("#columntable"+this.element.id).remove(),e=n('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"><\/div>'),e[0].cells=[];var a=0,h=0,w="",u=this.host.width(),c=u,s=[],l=[];if(n.each(this.columns.records,function(n,i){if(!(this.hidden&&this.hideable))if(this.width=="auto"||this._width)w+=this.text;else if(this.width<this.minwidth&&this.minwidth!="auto")u-=this.minwidth;else if(this.width>this.maxwidth&&this.maxwidth!="auto")u-=this.maxwidth;else if(this.width.toString().indexOf("%")!=-1){var i=0,r=t.vScrollBar[0].style.visibility=="hidden"?0:t.scrollbarsize+5;i=parseInt(this.width)*(c-r)/100,i<this.minwidth&&this.minwidth!="auto"&&(i=this.minwidth),i>this.maxwidth&&this.maxwidth!="auto"&&(i=this.maxwidth),u-=i}else typeof this.width=="string"&&(this.width=parseInt(this.width)),u-=this.width;this.pinned||this.grouped||this.checkboxcolumn?(t._haspinned&&(this.pinned=!0),s[s.length]=this):l[l.length]=this}),this.rtl){for(d=0,s.reverse(),f=this.columns.records.length-1;f>=this.columns.records.length-s.length;f--)this.columns.replace(f,s[d++]);for(r=0;r<l.length;r++)this.columns.replace(r,l[r])}else{for(f=0;f<s.length;f++)this.columns.replace(f,s[f]);for(r=0;r<l.length;r++)this.columns.replace(s.length+r,l[r])}if(v=this.headerZIndex,o=t.groupable?t.groups.length:0,this.rowdetails&&this.showrowdetailscolumn&&o++,i=t.columnsheader.height(),this.showfilterrow&&(this.columngroups?i-=this.filterrowheight:i=this.columnsheight),k=this._gettableheight(),this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>k)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){if(y=0,this.pageable){if(this.pageable)for(p=0;p<this.dataview.rows.length;p++)this.dataview.rows[p].group&&this.dataview.rows[p].level===0&&(y+=this.rowsheight)}else y=this.dataview.loadedrootgroups.length*this.rowsheight;y>k&&(u-=this.scrollbarsize+5,c-=this.scrollbarsize+5)}else u-=this.scrollbarsize+5,c-=this.scrollbarsize+5;else this.autoheight||(u-=this.scrollbarsize+5,c-=this.scrollbarsize+5);g=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth,c-=g,nt=function(n,i){var r=t.columngroupslevel*t.columnsheight;return r-i.level*t.columnsheight},n.each(this.columns.records,function(r){var rt,l,g,y,p,b,tt,s,ft,et,ct,it,lt;this.height=t.columnsheight,t.columngroups&&t.columngroups.length&&(this.height=nt(this.datafield,this),i=this.height),rt=t.toTP("jqx-grid-column-header")+" "+t.toTP("jqx-widget-header"),t.rtl&&(rt+=" "+t.toTP("jqx-grid-column-header-rtl"));var at=t.rtl?50+v+1:50+v-1,vt=t.rtl?v++:v--,f=n('<div role="columnheader" style="z-index: '+vt+';position: absolute; height: 100%;" class="'+rt+'"><div style="height: 100%; width: 100%;"><\/div><\/div>');t.columngroups&&(f[0].style.height=i+"px",f[0].style.bottom="0px",this.pinned&&(f[0].style.zIndex=at)),this.uielement=f,this.classname!=""&&this.classname&&f.addClass(this.classname),l=this.width,g=!1,(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined)&&(l=this._percentagewidth!=undefined?parseInt(this._percentagewidth)*c/100:parseInt(this.width)*c/100,g=!0),this.width=="auto"||this._width||g?g?(l<this.minwidth&&this.minwidth!="auto"&&(l=this.minwidth),l>this.maxwidth&&this.maxwidth!="auto"&&(l=this.maxwidth),(this._percentagewidth==undefined||this.width.toString().indexOf("%")!=-1)&&(this._percentagewidth=this.width),f.width(l),this.width=l):(y=Math.round(u*(this.text.length/w.length)),isNaN(y)&&(y=this.minwidth),y<0&&($element=n("<span>"+this.text+"<\/span>"),n(document.body).append($element),y=10+$element.width(),$element.remove()),y<this.minwidth&&(y=this.minwidth),y>this.maxwidth&&(y=this.maxwidth),this._width="auto",this.width=y,u-=y,w=w.substring(this.text.length),l=this.width,f.width(this.width)):(l<this.minwidth&&this.minwidth!="auto"&&(l=this.minwidth),l>this.maxwidth&&this.maxwidth!="auto"&&(l=this.maxwidth),f[0].style.width=parseInt(l)+"px"),this.hidden&&this.hideable&&f.css("display","none");var k=n(f.children()[0]),yt=t.rtl?t.toTP("jqx-grid-column-menubutton")+" "+t.toTP("jqx-grid-column-menubutton-rtl"):t.toTP("jqx-grid-column-menubutton"),d=n('<div style="height: '+i+'px; display: none; left: 100%; top: 0%; position: absolute;"><div class="'+yt+'" style="width: 100%; height:100%;"><\/div><\/div>');t.enableanimations||d.css("margin-left",-16),t.rtl&&d.css("left","0px"),this.columnsmenu=d[0],e[0].cells[r]=f[0],d[0].style.width=parseInt(t.columnsmenuwidth)+"px";var ut=t.columnsmenu,ot=!1,st=!1,ht=t.groupable&&o>0&&a<o||t.rowdetails&&a<o;if(t.rtl&&(ht=(t.groupable&&o>0&&a<o||t.rowdetails&&a<o)&r>t.columns.records.length-1-o),ht?(a++,ut&=!1,this.sortable=!1,this.editable=!1,st=!0):(p=this.renderer!=null?this.renderer(this.text,this.align,i):t._rendercolumnheader(this.text,this.align,i,t),p==null&&(p=t._rendercolumnheader(this.text,this.align,i,t)),this.renderer!=null&&(p=n(p)),ut&=!0,ot=!0),t.WinJS?MSApp.execUnsafeLocalFunction(function(){k.append(n(p))}):this.renderer?k.append(n(p)):p&&(k[0].innerHTML=p),p!=null&&(b=n('<div class="iconscontainer" style="height: '+i+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+t.toTP("jqx-widget-header")+'" style="height: '+i+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"><\/div><\/div><div class="sortasc '+t.toTP("jqx-widget-header")+'" style="height: '+i+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortascbutton")+'" style="width: 100%; height:100%;"><\/div><\/div><div class="sortdesc '+t.toTP("jqx-widget-header")+'" style="height: '+i+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortdescbutton")+'" style="width: 100%; height:100%;"><\/div><\/div><\/div>'),d.addClass(t.toTP("jqx-widget-header")),k.append(b),tt=b.children(),this.sortasc=tt[1],this.sortdesc=tt[2],this.filtericon=tt[0],this.iconscontainer=b,t.rtl&&(b.css("margin-left","0px"),b.css("left","0px"),n(this.sortasc).css("float","left"),n(this.filtericon).css("float","left"),n(this.sortdesc).css("float","left")),!t.autoshowfiltericon&&this.filterable&&n(this.filtericon).css("display","block")),ut&&(t._handlecolumnsmenu(t,k,f,d,this),this.menu||d.hide()),e.append(f),t.groupable&&ot)if(f[0].id=t.dataview.generatekey(),t._handlecolumnstogroupsdragdrop)t._handlecolumnstogroupsdragdrop(this,f);else throw new Error("jqxGrid: Missing reference to jqxgrid.grouping.js.");if(t.columnsreorder&&this.draggable&&t._handlecolumnsdragreorder&&t._handlecolumnsdragreorder(this,f),s=this,t.addHandler(f,"click",function(n){if(s.checkboxcolumn)return!0;t.sorttogglestates>0&&t._togglesort&&(t._loading||t._togglesort(s)),n.preventDefault(),t._raiseEvent(7,{column:s.getcolumnproperties(),datafield:s.datafield,originalEvent:n})}),s.resizable&&t.columnsresize&&!st&&(ft=!1,et="mousemove",t.isTouchDevice()&&t.touchmode!==!0&&(ft=!0,et=n.jqx.mobile.getTouchEventName("touchstart")),t.addHandler(f,et,function(i){var r=parseInt(i.pageX),u=5,e=parseInt(f.coord().left),h,c,o;if(t.hasTransform&&(e=n.jqx.utilities.getOffset(f).left),t._handlecolumnsresize){if(ft)return h=t.getTouches(i),c=h[0],r=c.pageX,u=40,r>=e+s.width-u?(t.resizablecolumn={columnelement:f,column:s},f.css("cursor","col-resize")):(f.css("cursor",""),t.resizablecolumn=null),!0;if(o=s.width,t.rtl&&(o=0),r>=e+o-u){if(r<=e+o+u)return t.resizablecolumn={columnelement:f,column:s},f.css("cursor","col-resize"),!1;f.css("cursor",""),t.resizablecolumn=null}else f.css("cursor",""),r<e+o-u&&(s._animating||s._menuvisible||f.mouseenter()),t.resizablecolumn=null}})),f.css("left",h),this.hidden&&this.hideable||(h+=l),s.rendered&&(ct=s.rendered(n(k[0].firstChild),s.align,i),ct&&b!=null&&b.hide()),s.checkboxcolumn){if(b.hide(),!t.host.jqxCheckBox)throw new Error("jqxGrid: Missing reference to jqxcheckbox.js");k.html('<div style="cursor: pointer; margin-left: 5px; top: 50%; margin-top: -8px; position: relative;"><\/div>'),it=k.find("div:first"),it.jqxCheckBox({_canFocus:!1,disabledContainer:!0,theme:t.theme,enableContainerClick:!1,width:16,height:16,animationShowDelay:0,animationHideDelay:0}),s.checkboxelement=it,lt=it.data().jqxCheckBox.instance,t._checkboxcolumn=s,lt.updated=function(n,i){t._checkboxcolumnupdating=!0,i?t.selectallrows():t.clearselection(!0,!1),t._checkboxcolumnupdating=!1}}}),h>0?this.columnsheader.width(2+h):this.columnsheader.width(h),this.columnsrow=e,t.columnsheader.append(e),this.showfilterrow&&this._updatefilterrow&&(this.columngroups?e.height(this.columngroupslevel*this.columnsheight):e.height(this.columnsheight),this.filterrow||(b=n("<div><\/div>"),b[0].id="filterrow."+this.element.id,b.height(this.filterrowheight),this.filterrow=b),this.filterrow.width(h),this.columnsheader.append(this.filterrow),this._updatefilterrow()),e.width(h),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsreorder&&this._handlecolumnsreorder(),this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this._handlecolumnsresize&&this._handlecolumnsresize(),this.columngroups&&this._rendercolumngroups(),this._updatecheckboxselection&&this._updatecheckboxselection()},_rendercolumngroups:function(){var s,h,o,i,t,c,y,u,l,e,p;if(this.columngroups){for(s=0,i=0;i<this.columns.records.length;i++)this.columns.records[i].pinned&&s++;var w=this.headerZIndex-s+this.columns.records.length,f=this.that,v=f.toTP("jqx-grid-column-header")+" "+f.toTP("jqx-grid-columngroup-header")+" "+f.toTP("jqx-widget-header");for(f.rtl&&(v+=" "+f.toTP("jqx-grid-columngroup-header-rtl")),h=this.columnsheader.find("#columntable"+this.element.id),h.find("jqx-grid-columngroup-header").remove(),o=0;o<this.columngroupslevel-1;o++)for(i=0;i<this.columngroups.length;i++)if((t=this.columngroups[i],c=t.level,c===o)&&(y=c*this.columnsheight,u=99999,t.groups)){l=function(n){for(var r=0,t,i=0;i<n.groups.length;i++)t=n.groups[i],t.groups?r+=l(t):t.hidden||(r+=t.width,u=Math.min(parseInt(t.element.style.left),u));return r},t.width=l(t),t.left=u;var a=this.columnsheight,b=w--,r=n('<div role="columnheader" style="z-index: '+b+';position: absolute;" class="'+v+'"><\/div>'),e=n(this._rendercolumnheader(t.text,t.align,this.columnsheight,this));t.renderer&&(e=n("<div style='height: 100%; width: 100%;'><\/div>"),p=t.renderer(t.text,t.align,a),e.html(p)),r.append(e),r[0].style.left=u+"px",u===0&&(r[0].style.borderLeftColor="transparent"),r[0].style.top=y+"px",r[0].style.height=a+"px",r[0].style.width=-1+t.width+"px",h.append(r),t.element=r,t.rendered&&t.rendered(e,t.align,a)}}},_resizecolumngroups:function(){var i,u,f,t;if(this.columngroups)for(i=0;i<this.columngroups.length;i++){var n=this.columngroups[i],e=n.level,o=e*this.columnsheight,r=99999;n.groups&&(u=function(n){for(var f=0,t,i=0;i<n.groups.length;i++)t=n.groups[i],t.groups?f+=u(t):(f+=t.width,r=Math.min(parseInt(t.element.style.left),r));return f},n.width=u(n),n.left=r,f=this.columnsheight,t=n.element,t[0].style.left=r+"px",t[0].style.top=o+"px",t[0].style.height=f+"px",t[0].style.width=-1+n.width+"px")}},_handlecolumnsmenu:function(t,i,r,u,f){var o,h,l,c;t.dragmousedown=null,u[0].id=t.dataview.generatekey(),i.append(u),r[0].columnsmenu=u[0],f.element=r[0],o=this.columnsmenuwidth+1,h=function(){var n;if(!f.menu)return!1;if(!t.resizing){if(f._menuvisible&&t._hasOpenedMenu)return!1;f._animating=!0,t.menuitemsarray&&t.menuitemsarray.length>0&&(t.enableanimations?(u.css("display","block"),u.stop(),f.iconscontainer.stop(),t.rtl?(u.css("margin-left",-o),u.animate({"margin-left":"0px"},"fast",function(){u.css("display","block"),f._animating=!1,f._menuvisible=!0})):(u.css("margin-left","0px"),u.animate({"margin-left":-o},"fast",function(){u.css("display","block"),f._animating=!1,f._menuvisible=!0})),n=t.rtl?o:-(32+o),f.iconscontainer.animate({"margin-left":n},"fast")):(u.css("display","block"),n=t.rtl?16:-48,f.iconscontainer.css("margin-left",n+"px"),f._animating=!1,f._menuvisible=!0))}},t.addHandler(r,"mouseenter",function(i){var s=parseInt(i.pageX),e=t.columnsresize&&f.resizable?3:0,o=parseInt(r.coord().left),u,c;if(t.hasTransform&&(o=n.jqx.utilities.getOffset(r).left),u=f.width,t.rtl&&(u=0),e!=0&&s>=o+u-e&&s<=o+u+e)return!1;c=t.vScrollInstance.isScrolling(),f.menu&&t.autoshowcolumnsmenubutton&&!c&&h()}),t.autoshowcolumnsmenubutton||(u.css("display","block"),l=t.rtl?16:-48,f.iconscontainer.css("margin-left",l+"px"),t.rtl?u.css({"margin-left":"0px"}):u.css({"margin-left":-o})),t.addHandler(r,"mouseleave",function(){var r,i;if(t.menuitemsarray&&t.menuitemsarray.length>0&&f.menu){if(r=n.data(document.body,"contextmenu"+t.element.id),r!=undefined&&u[0].id==r.columnsmenu.id)return;t.autoshowcolumnsmenubutton&&(t.enableanimations?(t.rtl?u.css("margin-left","0px"):u.css("margin-left",-o),u.stop(),f.iconscontainer.stop(),t.rtl?u.animate({"margin-left":-o},"fast",function(){u.css("display","none"),f._menuvisible=!1}):u.animate({"margin-left":0},"fast",function(){u.css("display","none"),f._menuvisible=!1}),i=t.rtl?0:-32,f.iconscontainer.animate({"margin-left":i},"fast")):(u.css("display","none"),i=t.rtl?0:-32,f.iconscontainer.css("margin-left",i+"px"),f._menuvisible=!1))}});var s=!0,e="",a=n(f.filtericon);t.addHandler(u,"mousedown",function(){t.gridmenu||t._initmenu(),s=!n.data(t.gridmenu[0],"contextMenuOpened"+t.gridmenu[0].id),e=n.data(document.body,"contextmenu"+t.element.id),e!=null&&(e=e.column.datafield)}),t.addHandler(a,"mousedown",function(){t.gridmenu||t._initmenu(),s=!n.data(t.gridmenu[0],"contextMenuOpened"+t.gridmenu[0].id),e=n.data(document.body,"contextmenu"+t.element.id),e!=null&&(e=e.column.datafield)}),c=function(){var i,v,y,o,k,l,a;if(!f.menu)return!1;if(t.gridmenu||t._initmenu(),i=u.coord(!0),v=u.height(),!s&&(s=!0,e==f.datafield))return t._closemenu(),!1;y=t.host.coord(!0),t.hasTransform&&(y=n.jqx.utilities.getOffset(t.host),i=n.jqx.utilities.getOffset(u)),y.left+t.host.width()>parseInt(i.left)+t.gridmenu.width()?t.gridmenu.jqxMenu("open",i.left,i.top+v):t.gridmenu.jqxMenu("open",u.width()+i.left-t.gridmenu.width(),i.top+v),t.gridmenu.width()<100&&t._arrangemenu(),t._hasOpenedMenu=!0;var p=t._getmenuitembyindex(0),w=t._getmenuitembyindex(1),b=t._getmenuitembyindex(2),h=t._getmenuitembyindex(3),c=t._getmenuitembyindex(4),r=t._getmenuitembyindex(5);p!=null&&w!=null&&b!=null&&(o=f.sortable&&t.sortable,t.gridmenu.jqxMenu("disable",p.id,!o),t.gridmenu.jqxMenu("disable",w.id,!o),t.gridmenu.jqxMenu("disable",b.id,!o),f.datafield&&(t.sortcolumn==f.datafield?(k=t.getsortinformation(),o&&(k.sortdirection.ascending?t.gridmenu.jqxMenu("disable",p.id,!0):t.gridmenu.jqxMenu("disable",w.id,!0))):t.gridmenu.jqxMenu("disable",b.id,!0))),h!=null&&c!=null&&(t.groupable&&f.groupable?t.groups&&t.groups.indexOf(f.datafield)!=-1?(t.gridmenu.jqxMenu("disable",h.id,!0),t.gridmenu.jqxMenu("disable",c.id,!1)):(t.gridmenu.jqxMenu("disable",h.id,!1),t.gridmenu.jqxMenu("disable",c.id,!0)):(t.gridmenu.jqxMenu("disable",c.id,!0),t.gridmenu.jqxMenu("disable",h.id,!0))),r!=null&&(t._updatefilterpanel(t,r,f),l=0,t.sortable&&t._togglesort&&t.showsortmenuitems&&(l+=3),t.groupable&&t.addgroup&&t.showgroupmenuitems&&(l+=2),a=l*27+3,n.jqx.browser.msie&&n.jqx.browser.version<8&&(a+=20,n(r).height(190)),t.filterable&&t.showfiltermenuitems&&(f.filterable?(t.gridmenu.height(a+176),n(r).css("display","block")):(t.gridmenu.height(a),n(r).css("display","none")))),n.data(document.body,"contextmenu"+t.element.id,{column:f,columnsmenu:u[0]})},t.addHandler(a,"click",function(){return f.menu?(t.showfilterrow||(h(),c()),!1):!1}),t.addHandler(u,"click",function(){return f.menu?(c(),!1):!1})},_removecolumnhandlers:function(t){var i=this.that,r=n(t.element),u,f;r.length>0&&(i.removeHandler(r,"mouseenter"),i.removeHandler(r,"mouseleave"),u=n(t.filtericon),i.removeHandler(u,"mousedown"),i.removeHandler(u,"click"),i.removeHandler(r,"click"),i.removeHandler(r,"mousemove"),r[0].columnsmenu&&(f=n(r[0].columnsmenu),i.removeHandler(f,"click"),i.removeHandler(f,"mousedown")))},_rendercolumnheader:function(n,t,i,r){var u="4px";return(r.columngroups?(u=i/2-this._columnheight/2,u<0&&(u=4),u+="px"):this.columnsheight!=25&&(u=this.columnsheight/2-this._columnheight/2,u<0&&(u=4),u+="px"),this.enableellipsis)?'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 2px; margin-bottom: "+u+"; margin-top: "+u+';"><span style="text-overflow: ellipsis; cursor: default;">'+n+"<\/span><\/div>":t=="center"||t=="middle"?'<div style="padding-bottom: 2px; text-align: center; margin-top: '+u+';"><a href="#">'+n+"<\/a><\/div>":'<a style="margin-top: '+u+"; float: "+t+';" href="#">'+n+"<\/a>"},_renderrows:function(t,i){var r=this.that,l,u,a,y,e,p,c,o,s,h,f,v,w;if((this.pageable||this.groupable)&&(this.autoheight||this.autorowheight)&&this.table!=null&&this.table[0].rows!=null&&this.table[0].rows.length<this.dataview.rows.length&&(r.prerenderrequired=!0),!this.pageable&&(this.autoheight||this.autorowheight)&&(this.virtualmode||this.unboundmode)&&(l=this.source.totalrecords,isNaN(l)||this.table!=null&&this.table[0].rows!=null&&this.table[0].rows.length!=l&&(r.prerenderrequired=!0)),(this.autoheight||this.autorowheight)&&!r.prerenderrequired&&this.table&&this.table[0].rows&&(this.table[0].rows.length<this.dataview.records.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?r.prerenderrequired=!0:this.pageable||(r.prerenderrequired=!0)),this.table[0].rows.length<this.dataview.cachedrecords.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?r.prerenderrequired=!0:this.pageable||(r.prerenderrequired=!0))),r._prerenderrows(t),r._requiresupdate&&(r._requiresupdate=!1,r._updatepageviews()),u=function(){r._loading||(r.WinJS?MSApp.execUnsafeLocalFunction(function(){r._rendervisualrows()}):r._rendervisualrows(),r.virtualmode&&r.showaggregates&&r._updateaggregates&&r.refreshaggregates())},a=n.jqx.browser.msie&&n.jqx.browser.version<10,this.virtualmode)y=function(){var n,t,u,f;if(r.rendergridrows&&(n=r._startboundindex,n==undefined&&(n=0),t=n+1+r.dataview.pagesize,n!=null&&t!=null&&(u=r.source._source?!0:!1,f=u?r.source._source.recordstartindex:r.source.recordstartindex,f!=n||i==!0))){if(u){if(t>=r.source._source.totalrecords&&(t=r.source._source.totalrecords,n=t-r.dataview.pagesize-1,n<0&&(n=0),r.source._source.recordendindex==t&&r.source._source.recordstartindex==n))return;r.source._source.recordstartindex=n,r.source._source.recordendindex=t}else r.source.recordstartindex=n,r.source.recordendindex=t;r.updatebounddata()}},this.loadondemand&&(u(),y(),this.loadondemand=!1),o=this._browser==undefined?this._isIE10():this._browser,this.editable&&this.editcell&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()?u():this.autoheight?u():o||a||n.jqx.browser.mozilla||navigator&&navigator.userAgent.indexOf("Safari")!=-1?(this._scrolltimer!=null&&clearTimeout(this._scrolltimer),this._scrolltimer=setTimeout(function(){u()},5)):u();else{if(this.scrollmode=="deferred"&&(this.hScrollInstance.isScrolling()||this.vScrollInstance.isScrolling())){this._scrolltimer!=null&&clearInterval(this._scrolltimer),e=this._getfirstvisualrow(),e!=null&&(p=function(){var o,i,f,s,u,t;if(e==null)return"";for(o="<table>",i=r.deferreddatafields,i==null&&r.columns.records.length>0&&(i=[],i.push(r.columns.records[0].displayfield)),f=0;f<i.length;f++)s=i[f],u=r._getcolumnbydatafield(s),u&&(t=r._getcellvalue(u,e),u.cellsformat!=""&&n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(t)?t=n.jqx.dataFormat.formatdate(t,u.cellsformat,r.gridlocalization):n.jqx.dataFormat.isNumber(t)&&(t=n.jqx.dataFormat.formatnumber(t,u.cellsformat,r.gridlocalization))),o+="<tr><td>"+t+"<\/td><\/tr>");return o+"<\/table>"},c=this.scrollfeedback?this.scrollfeedback(e.bounddata):p(e.bounddata),c!=this._scrollelementcontent&&(this._scrollelement[0].innerHTML=c,this._scrollelementcontent=c)),this._scrollelement.css("visibility","visible"),this._scrollelementoverlay.css("visibility","visible"),this._scrollelement.css("margin-top",-this._scrollelement.height()/2),this._scrolltimer=setInterval(function(){r.hScrollInstance.isScrolling()||r.vScrollInstance.isScrolling()||(u(),r._scrollelement.css("visibility","hidden"),r._scrollelementoverlay.css("visibility","hidden"),clearInterval(r._scrolltimer),e&&r.ensurerowvisible(e.visibleindex))},100);return}if(navigator&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")!=-1&&(this.updatedelay=1),this.touchDevice!=undefined&&this.touchDevice==!0&&(this.updatedelay=5),o=this._browser==undefined?this._isIE10():this._browser,(o||a)&&(this.updatedelay=5),(o||n.jqx.browser.mozilla)&&this.hScrollInstance.isScrolling()){u();return}n.jqx.browser.mozilla&&this.updatedelay==0&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&(this.updatedelay=1),this.updatedelay==0?u():(s=this._jqxgridrendertimer,s!=null&&clearTimeout(s),this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()?(s=setTimeout(function(){u()},this.updatedelay),this._jqxgridrendertimer=s):(this._jqxgridrendertimer=s,u()))}r.autorowheight&&!r.autoheight&&this._pageviews.length>0&&(h=this._gettableheight(),f=this._pageviews[0].height,f>h?(this.pageable&&this.gotopage&&(f=this._pageviews[0].height,f<0&&(f=this._pageviews[0].height)),this.vScrollBar.css("visibility")!="visible"&&this.vScrollBar.css("visibility","visible"),(f<=h||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),f-h>0?this.scrollmode!="deferred"&&(v=f-h,w=this.vScrollInstance.max,this.vScrollBar.jqxScrollBar({max:v}),Math.round(v)!=Math.round(w)&&this.vScrollBar.jqxScrollBar({value:0})):this.vScrollBar.jqxScrollBar({value:0,max:f})):(this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})),this._arrange(),this.virtualsizeinfo&&(this.virtualsizeinfo.virtualheight=f))},scrolling:function(){var n=this.vScrollInstance.isScrolling(),t=this.hScrollInstance.isScrolling();return{vertical:n,horizontal:t}},_renderhorizontalscroll:function(){var l=this.hScrollInstance,f=l.value,n,i,h,t,r,c,o,s,u,v;if(this.hScrollBar.css("visibility")==="hidden"&&(l.value=0,f=0),n=parseInt(f),this.table!=null){var y=this.table[0].rows.length,e=this.columnsrow,a=this.groupable&&this.groups.length>0?this.groups.length:0,p=this.columns.records.length-a,w=this.columns.records,b=this.dataview.rows.length==0;if(this.rtl&&this.hScrollBar.css("visibility")!="hidden"&&(n=l.max-n),b&&!this._haspinned){for(i=0;i<y;i++)for(h=this.table[0].rows[i],t=0;t<a+p;t++)r=h.cells[t],r!=undefined&&(c=w[t],c.pinned&&(r.style.marginLeft=n+"px",i==0&&(u=e[0].cells[t],u.style.marginLeft=n+"px")));this.table[0].style.marginLeft=-n+"px",e[0].style.marginLeft=-n+"px"}else if(this._haspinned||this._haspinned==undefined){for(i=0;i<y;i++)for(h=this.table[0].rows[i],t=0;t<a+p;t++)if(r=h.cells[t],r!=undefined&&(c=w[t],c.pinned)){if(n==0&&r.style.marginLeft=="")continue;o=null,s=null,this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(s=this.filterrow[0].cells[t]),this.showaggregates&&this.statusbar[0].cells&&(o=this.statusbar[0].cells[t]),this.rtl?(r.style.marginLeft=-parseInt(f)+"px",i==0&&(u=e[0].cells[t],u.style.marginLeft=-parseInt(f)+"px",o&&(o.style.marginLeft=-parseInt(f)+"px"),s&&(s.style.marginLeft=-parseInt(f)+"px"))):(r.style.marginLeft=n+"px",i==0&&(u=e[0].cells[t],u.style.marginLeft=n+"px",o&&(o.style.marginLeft=n+"px"),s&&(s.style.marginLeft=n+"px")))}this.table[0].style.marginLeft=-n+"px",e[0].style.marginLeft=-n+"px"}else this._haspinned==!1&&(this.table[0].style.marginLeft=-n+"px",e[0].style.marginLeft=-n+"px");this.showaggregates&&this.statusbar[0].cells&&(v=0,this.rtl&&this.vScrollBar.css("visibility")!="hidden"&&this.hScrollBar.css("visibility")!="hidden"&&(v=2+parseInt(this.hScrollBar.css("left"))),this.statusbar[0].style.marginLeft=-n+v+"px"),this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(this.filterrow[0].style.marginLeft=-n+"px")}},_updaterowdetailsvisibility:function(){if(this.rowdetails)for(var t=0;t<this._rowdetailselementscache.length;t++)n(this._rowdetailselementscache[t]).css("display","none")},_getvisualcolumnsindexes:function(n,t,i,r,u){var f,c;if(this.rowdetails||this.rtl||this.editcell||this.width&&this.width.toString().indexOf("%")>=0||this.exporting)return{start:0,end:i+r};var s=0,e=-1,o=i+r,h=!1;if(this.autorowheight)return{start:0,end:i+r};if(!u)for(f=0;f<i+r;f++)if(c=f,h||this.columns.records[f].pinned&&(h=!0),this.columns.records[f].hidden||(s+=this.columns.records[f].width),s>=n&&e==-1&&(e=f),s>t+n){o=f;break}return o++,o>i+r&&(o=i+r),(e==-1||h)&&(e=0),{start:e,end:o}},_getfirstvisualrow:function(){var u=this.vScrollInstance,f=u.value,i=parseInt(f),n,r,t;if(this._pagescache.length==0&&(this.dataview.updateview(),this._loadrows()),this.vScrollBar[0].style.visibility!="visible"&&(i=0),!this.pageable){if(n=this._findvisiblerow(i,this._pageviews),n==-1)return null;n!=this.dataview.pagenum?(this.dataview.pagenum=n,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}return r=this._findvisiblerow(i,this._pagescache[this.dataview.pagenum]),t=this._pagescache[this.dataview.pagenum],t&&t[0]?t[r]:void 0},_rendervisualrows:function(){var wt,nt,it,w,s,t,dt,lt,l,a,gt,ni,c,i,at,vt,d,f,r,g,v,e;if(this.virtualsizeinfo){var y=this.vScrollInstance,yt=this.hScrollInstance,ii=y.value,ri=yt.value,p=parseInt(ii),ft=parseInt(ri),tt=this._gettableheight(),pt=this._hostwidth!=undefined?this._hostwidth:this.host.width();if(this.hScrollBar[0].style.visibility=="visible"&&(tt+=29),this.scrollmode=="deferred"&&this._newmax!=0&&p>this._newmax&&this._newmax!=null&&(p=this._newmax),wt=y.isScrolling()||yt.isScrolling()||this._keydown,nt=this.groupable&&this.groups.length>0,this.visiblerows=[],this.hittestinfo=[],this.editcell&&this.editrow==undefined&&this._hidecelleditor(!1),this.editrow!=undefined&&this._hideeditors(),this.virtualmode&&!this.pageable&&(this._pagescache=[]),this._pagescache.length==0&&(this.dataview.updateview(),this._loadrows()),this.vScrollBar[0].style.visibility=="hidden"&&(p=0),!this.pageable){if(it=this._findvisiblerow(p,this._pageviews),it==-1){this._clearvisualrows(),this._renderemptyrow(),this._updaterowdetailsvisibility();return}it!=this.dataview.pagenum?(this.dataview.pagenum=it,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}if(w=this.groupable&&this.groups.length>0?this.groups.length:0,this.columns.records){var rt=this.columns.records.length-w,ui=this._findvisiblerow(p,this._pagescache[this.dataview.pagenum]),u=this._pagescache[this.dataview.pagenum],o=ui;o<0&&(o=0);var et=0,h=0,ot=0,st=0,ut=this.virtualsizeinfo.visiblerecords,bt=this.groupable?this.groups.length:0,b=this.toTP("jqx-grid-cell");this.rtl&&(b+=" "+this.toTP("jqx-grid-cell-rtl")),(this.autoheight||this.autorowheight)&&this.pageable&&(this.groupable||(ut=this.dataview.pagesize)),nt&&(b=" "+this.toTP("jqx-grid-group-cell")),this.isTouchDevice()&&(b+=" "+this.toTP("jqx-touch")),this.autorowheight&&(b+=" jqx-grid-cell-wrap");var c=this.rowsheight,oi=o,fi=this._rendercell,kt=this._getvisualcolumnsindexes(ft,pt,w,rt,nt),ht=kt.start,ct=kt.end;if((this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews[0]&&(this._oldpageviewheight=this._pageviews[0].height),this.autorowheight&&(o=0),o>=0){for(this._updaterowdetailsvisibility(),this._startboundindex=u!=null?u[o].bounddata.boundindex:0,this._startvisibleindex=u!=null?u[o].bounddata.visibleindex:0,s=0;s<ut&&h<ut;s++){if(t=u!=undefined?u[o+s]:null,t==null){if(o=-s,this._pagescache[this.dataview.pagenum+1])u=this._pagescache[this.dataview.pagenum+1],this.dataview.pagenum++;else{dt=this._pageviews.length;do if(this.dataview.pagenum<this._pageviews.length-1)this.dataview.pagenum++,u=undefined,this._pageviews[this.dataview.pagenum].height>0&&(this.dataview.updateview(),this._loadrows(),u=this._pagescache[this.dataview.pagenum]);else{u=undefined;break}while(u==undefined&&this.dataview.pagenum<dt)}u!=undefined&&(t=u[o+s])}if(t!=null){if(t.hidden)continue;if(this._endboundindex=this._startboundindex+s,this._endvisibleindex=this._startvisibleindex+s,s==0&&(lt=Math.abs(p-t.top),this.table[0].style.top=-lt+"px",st=-lt),i=this.table[0].rows[h],!i)continue;for(parseInt(i.style.height)!=t.height&&(i.style.height=parseInt(t.height)+"px"),ot+=t.height,l=this.rowdetails&&t.rowdetails,a=!t.rowdetailshidden,l&&a&&(i.style.height=parseInt(t.height-t.rowdetailsheight)+"px",ut++),gt=this._isrowselected(!0,t),r=ht;r<ct;r++)ni=r,this._rendervisualcell(fi,b,gt,l,a,nt,bt,i,t,ni,h,wt);if(t.group!=undefined&&this._rendergroup&&this._rendergroup(bt,i,t,w,rt,h,pt),this.autorowheight&&(this.autoheight||this.pageable)){for(c=this.rowsheight,r=ht;r<ct;r++)this.editable&&this.editcell&&this.editcell.column==this.columns.records[r].datafield&&this.editcell.row==this.getboundindex(t)||i.cells[r].firstChild&&(c=Math.max(c,8+parseInt(i.cells[r].firstChild.offsetHeight)));i.style.height=parseInt(c)+"px",this.heights[this._startboundindex+s]=c,l&&a&&(c+=t.rowdetailsheight),t.height=c}if(this.visiblerows[this.visiblerows.length]=t,this.hittestinfo[this.hittestinfo.length]={row:t,visualrow:i,details:!1},l&&a&&(h++,i=this.table[0].rows[h],this._renderrowdetails(b,i,t,w,rt,h),this.visiblerows[this.visiblerows.length]=t,this.hittestinfo[this.hittestinfo.length]={row:t,visualrow:i,details:!0}),!this.autorowheight&&ot+st>=tt)break}else cansetheight=!0,this._clearvisualrow(ft,nt,h,w,rt),ot+et+st<=tt&&(et+=c);h++}if(this._horizontalvalue=ft,et>0&&this.vScrollBar[0].style.visibility=="visible"){var si=parseInt(this.table.css("top")),ti=this._pageviews[this._pageviews.length-1],ei=y.max,k=ti.top+ti.height-tt;this.hScrollBar.css("visibility")=="visible"&&(k+=this.scrollbarsize+20),ei==k||this.autorowheight||k>=0&&(this.scrollmode!="deferred"?(y.max=k,y.setPosition(y.max)):this._newmax!=k&&(this._newmax=k,this._rendervisualrows()))}}if((this.autoheight||this.pageable)&&this.autorowheight){for(this._pagescache=[],at=0,vt=0,d=0;d<this.visiblerows.length;d++){f=this.visiblerows[d],f.top=at,at+=f.height,vt+=f.height;var l=this.rowdetails&&f.rowdetails,a=!f.rowdetailshidden,i=this.table[0].rows[d];for(l&&a&&d++,r=ht;r<ct;r++)if(g=this.columns.records[r],!g.hidden&&!g.cellsrenderer&&(v=i.cells[r],e=0,v.firstChild?(e=(f.height-parseInt(v.firstChild.offsetHeight)-8)/2,l&&a&&(e=(f.height-f.rowdetailsheight-n(v.firstChild).height()-8)/2)):e=(f.height-parseInt(n(v).height())-8)/2,e>=0&&(e=parseInt(e)+4,v.firstChild&&v.firstChild.className.indexOf("jqx-grid-groups-row")==-1&&g.columntype!="checkbox"&&g.columntype!="button"))){if(this.editable&&this.editcell&&this.editcell.column==g.datafield&&this.editcell.row==this.getboundindex(f))continue;v.firstChild.style.marginTop=e+"px"}}this._pageviews[0]&&(this._pageviews[0].height=vt),this._arrange()}this._renderemptyrow()}}},_hideemptyrow:function(){var i,u,r,t;if(this.showemptyrow&&this.table&&this.table[0].rows&&(i=this.table[0].rows[0],i))for(u=!1,r=0;r<i.cells.length;r++)t=n(i.cells[r]),t.css("display")=="none"||u||(t.width()==this.host.width()||t.text()==this.gridlocalization.emptydatastring)&&(t[0].checkbox=null,t[0].button=null,u=!0,t[0].innerHTML="")},_renderemptyrow:function(){var e,s,r,u,t,i,o,f;if(!this._loading&&this.dataview.records.length==0&&this.showemptyrow&&(e=!1,s=this.toTP("jqx-grid-cell"),this.table&&this.table.length>0&&this.table[0].rows&&this.table[0].rows.length>0))for(r=this.table[0].rows[0],this.table[0].style.top="0px",u=0;u<r.cells.length;u++)t=n(r.cells[u]),t.css("display")=="none"||e||(t[0].checkbox=null,t[0].button=null,t[0].className=s,e=!0,t[0].innerHTML="",i=n("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'><\/span>"),i.text(this.gridlocalization.emptydatastring),t.append(i),o=0,this.oldhscroll||(o=parseInt(this.table[0].style.marginLeft),this.rtl&&(t.css("z-index",999),t.css("overflow","visible"))),i.css("left",-o-i.width()/2),i.css("top",this._gettableheight()/2-i.height()/2),n.jqx.browser.msie&&n.jqx.browser.version<8&&(i.css("margin-left","0px"),i.css("left",this.host.width()/2-i.width()/2)),f=Math.abs(parseInt(this.table[0].style.top)),isNaN(f)&&(f=0),n(r).height(this._gettableheight()+f),t.css("margin-left","0px"),t.width(this.host.width()),this.table.width()<this.host.width()&&this.table.width(this.host.width())),t.addClass(this.toThemeProperty("jqx-grid-empty-cell"))},_clearvisualrows:function(){var t=this.virtualsizeinfo.visiblerecords,i=this.hScrollInstance,r=i.value,u=parseInt(r),f=this.groupable&&this.groups.length>0,n;if(this.columns.records)for(n=0;n<t;n++)this._clearvisualrow(u,f,n,0,this.columns.records.length)},_isrowselected:function(n,t){var i=!1,r=0;return this.virtualmode&&this.pageable&&this.groupable&&this.groups.length>0&&(r=this.dataview.pagesize*this.dataview.pagenum),n&&t.bounddata!=null&&(this.selectionmode!="singlerow"?this.dataview.filters.length>0?this.virtualmode?this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)!=-1&&(i=!0):this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)!=-1&&(i=!0):this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)!=-1&&(i=!0):this.dataview.filters.length>0?this.virtualmode?this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)!=-1&&(i=!0):this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)!=-1&&(i=!0):r+t.bounddata.boundindex==this.selectedrowindex&&(i=!0)),i},_rendervisualcell:function(t,i,r,u,f,e,o,s,h,c,l,a){var p=this.columns.records[c],v,y,d,g,nt,b,w,k;if(p.hidden){v=s.cells[c],v.innerHTML="";return}if(cellvalue=this._getcellvalue(p,h),v=s.cells[c],y=i,this.selectionmode.indexOf("cell")!=-1&&(r=this.dataview.filters.length>0?this.selectedcells[h.bounddata.dataindex+"_"+p.datafield]?!0:!1:this.selectedcells[h.boundindex+"_"+p.datafield]?!0:!1,this.editcell&&this.editcell.row===h.boundindex&&this.editcell.column===p.datafield&&p.columntype!=="checkbox"&&(r=!1)),p.cellclassname!=""&&p.cellclassname&&(typeof p.cellclassname=="string"?y+=" "+p.cellclassname:(d=p.cellclassname(this.getboundindex(h),p.datafield,cellvalue,h.bounddata),d&&(y+=" "+d))),g=this.showsortcolumnbackground&&this.sortcolumn&&p.displayfield==this.sortcolumn,g&&(y+=" "+this.toTP("jqx-grid-cell-sort")),p.filter&&this.showfiltercolumnbackground&&(y+=" "+this.toTP("jqx-grid-cell-filter")),(p.pinned&&this.showpinnedcolumnbackground||p.grouped)&&(y+=e?" "+this.toTP("jqx-grid-cell-pinned"):" "+this.toTP("jqx-grid-cell-pinned")),this.altrows&&h.group==undefined&&(nt=h.visibleindex,nt>=this.altstart&&(this.altstart+nt)%(1+this.altstep)==0&&(y+=g?" "+this.toTP("jqx-grid-cell-sort-alt"):" "+this.toTP("jqx-grid-cell-alt"),p.filter&&this.showfiltercolumnbackground&&(y+=" "+this.toTP("jqx-grid-cell-filter-alt")),p.pinned&&this.showpinnedcolumnbackground&&(y+=" "+this.toTP("jqx-grid-cell-pinned-alt")))),c<=o?(e||this.rowdetails)&&(b=n(v),w=this.columns.records[c].width,v.style.width!=parseInt(w)+"px"&&b.width(w)):(e||this.rowdetails)&&this._hiddencolumns&&(b=n(v),w=this.columns.records[c].width,parseInt(v.style.width)!=w&&b.width(w)),k=!0,this.rowdetails&&u&&(f&&!e?y+=" "+this.toTP("jqx-grid-details-cell"):e&&(y+=" "+this.toTP("jqx-grid-group-details-cell")),this.showrowdetailscolumn))if(this.rtl){if(h.group==undefined&&c==s.cells.length-o-1){y+=f?" "+this.toTP("jqx-grid-group-expand-rtl"):" "+this.toTP("jqx-grid-group-collapse-rtl"),k=!1,v.title="",v.innerHTML="",v.className!=y&&(v.className=y);return}}else if(h.group==undefined&&c==o){y+=f?" "+this.toTP("jqx-grid-group-expand"):" "+this.toTP("jqx-grid-group-collapse"),k=!1,v.title="",v.innerHTML="",v.className!=y&&(v.className=y);return}if(r&&k&&c>=o&&(y+=" "+this.toTP("jqx-grid-cell-selected"),y+=" "+this.toTP("jqx-fill-state-pressed")),v.className!=y&&(v.className=y),h.group!=undefined){cellvalue="",v.title="",v.innerHTML="";return}t(this,p,h,cellvalue,v,a)},_rendercell:function(t,i,r,u,f,e){var h=u+"_"+i.visibleindex,s,a,p,c,w,o,l;if((i.columntype=="number"||i.cellsrenderer!=null)&&(h=r.uniqueid+"_"+i.visibleindex),t.editcell&&t.editrow==undefined)if(t.editmode=="selectedrow"&&i.editable&&t.editable){if(t.editcell.row==t.getboundindex(r)&&t._showcelleditor){t.hScrollInstance.isScrolling()||t.vScrollInstance.isScrolling()?t._showcelleditor(t.editcell.row,i,f,t.editcell.init,!1):t._showcelleditor(t.editcell.row,i,f,t.editcell.init);return}}else if(t.editcell.row==t.getboundindex(r)&&t.editcell.column==i.datafield&&(t.editcell.element=f,t.editcell.editing&&t._showcelleditor)){t.hScrollInstance.isScrolling()||t.vScrollInstance.isScrolling()?t._showcelleditor(t.editcell.row,i,t.editcell.element,t.editcell.init,!1):t._showcelleditor(t.editcell.row,i,t.editcell.element,t.editcell.init);return}if(s=t._defaultcellsrenderer(u,i),a=t._cellscache[h],a){if(i.columntype=="inline"){t._renderinlinecell(t,f,i,r,u),i.cellsrenderer!=null&&(c=i.cellsrenderer(t.getboundindex(r),i.datafield,u,s,i.getcolumnproperties(),r.bounddata),c!=undefined&&(f.innerHTML=c));return}if(i.columntype=="checkbox"){if(t.host.jqxCheckBox){u===""&&(u=null),p=f.innerHTML.toString().length==0,!f.checkbox||t.groupable||p?t._rendercheckboxcell(t,f,i,r,u):(f.checkboxrow=t.getboundindex(r),u==""&&(u=!1),u=="1"&&(u=!0),u=="0"&&(u=!1),u==1&&(u=!0),u==0&&(u=!1),u=="true"&&(u=!0),u=="false"&&(u=!1),u!=null||i.threestatecheckbox||(u=!1),i.checkboxcolumn&&(u=!1,t.dataview.filters.length>0&&!t.virtualmode?t.selectedrowindexes.indexOf(r.bounddata.dataindex)!=-1&&(u=!0):t.selectedrowindexes.indexOf(r.bounddata.boundindex)!=-1&&(u=!0)),f.checkboxinstance?f.checkboxinstance._setState(u):f.checkbox.jqxCheckBox("_setState",u)),i.cellsrenderer!=null&&(c=i.cellsrenderer(t.getboundindex(r),i.datafield,u,s,i.getcolumnproperties(),r.bounddata),c!=undefined&&(f.innerHTML=c));return}}else if(i.columntype=="button"&&t.host.jqxButton){u==""&&(u=!1),i.cellsrenderer!=null&&(u=i.cellsrenderer(t.getboundindex(r),i.datafield,u,s,i.getcolumnproperties(),r.bounddata)),f.innerHTML==""&&(f.buttonrow=t.getboundindex(r),f.button=null,t._renderbuttoncell(t,f,i,r,u)),f.button&&!t.groupable?(f.buttonrow=t.getboundindex(r),f.button.val(u)):t._renderbuttoncell(t,f,i,r,u);return}if(o=a.element,i.cellsrenderer!=null||f.childNodes&&f.childNodes.length==0||t.groupable||t.rowdetails)f.innerHTML!=o&&(f.innerHTML=o);else if(f.innerHTML.indexOf("editor")>=0)f.innerHTML=o;else if(e){var b=o.indexOf(">"),k=o.indexOf("<\/"),v=o.substring(b+1,k),y=f.childNodes[0];y.childNodes[0]?v!=y.childNodes[0].nodeValue&&(v.indexOf("&")>=0?f.innerHTML=o:y.childNodes[0].nodeValue=v):(w=document.createTextNode(v),y.appendChild(w))}else f.innerHTML!=o&&(f.innerHTML=o);t.enabletooltips&&i.enabletooltips&&(f.title=a.title);return}if(i.columntype=="checkbox"){t._rendercheckboxcell(t,f,i,r,u),t._cellscache[h]={element:"",title:u},t.enabletooltips&&i.enabletooltips&&(f.title=u);return}if(i.columntype=="button"){i.cellsrenderer!=null&&(u=i.cellsrenderer(t.getboundindex(r),i.datafield,u,s,i.getcolumnproperties(),r.bounddata)),t._renderbuttoncell(t,f,i,r,u),t._cellscache[h]={element:"",title:u},t.enabletooltips&&i.enabletooltips&&(f.title=u);return}if(i.columntype=="number")u=r.visibleindex;else if(i.columntype=="inline"){t._renderinlinecell(t,f,i,r,u),t._cellscache[h]={element:"",title:u},t.enabletooltips&&i.enabletooltips&&(f.title=u);return}return o=null,o=i.cellsrenderer!=null?i.cellsrenderer(t.getboundindex(r),i.datafield,u,s,i.getcolumnproperties(),r.bounddata):s,o==null&&(o=s),l=u,t.enabletooltips&&i.enabletooltips&&(i.cellsformat!=""&&n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(u)?l=n.jqx.dataFormat.formatdate(l,i.cellsformat,this.gridlocalization):n.jqx.dataFormat.isNumber(u)&&(l=n.jqx.dataFormat.formatnumber(l,i.cellsformat,this.gridlocalization))),f.title=l),t.WinJS?WinJS.Utilities.setInnerHTMLUnsafe(f,o):f.innerHTML=o,t._cellscache[h]={element:f.innerHTML,title:l},!0},_isIE10:function(){var i,t;return this._browser==undefined&&(i=n.jqx.utilities.getBrowser(),i.browser=="msie"&&parseInt(i.version)>9?this._browser=!0:(this._browser=!1,i.browser=="msie"&&(t="Browser CodeName: "+navigator.appCodeName+"",t+="Browser Name: "+navigator.appName+"",t+="Browser Version: "+navigator.appVersion+"",t+="Platform: "+navigator.platform+"",t+="User-agent header: "+navigator.userAgent+"",t.indexOf("Zune 4.7")!=-1&&(this._browser=!0)))),this._browser},_renderinlinecell:function(t,i){var r=n(i);i.innerHTML='<div style="position: absolute;"><\/div>'},_rendercheckboxcell:function(t,i,r,u,f){var o,e,s;t.host.jqxCheckBox&&(o=n(i),f===""&&(f=r.threestatecheckbox?null:!1),f=="1"&&(f=!0),f=="0"&&(f=!1),f==1&&(f=!0),f==0&&(f=!1),f=="true"&&(f=!0),f=="false"&&(f=!1),r.checkboxcolumn&&(f=!1,this.dataview.filters.length>0?this.selectedrowindexes.indexOf(u.bounddata.dataindex)!=-1&&(f=!0):this.selectedrowindexes.indexOf(u.bounddata.boundindex)!=-1&&(f=!0)),o.find(".jqx-checkbox").length==0?(i.innerHTML='<div style="position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"><\/div>',n(i.firstChild).jqxCheckBox({_canFocus:!1,hasInput:!1,hasThreeStates:r.threestatecheckbox,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,locked:!0,theme:t.theme,checked:f}),this.editable&&r.editable&&n(i.firstChild).jqxCheckBox({locked:!1}),r.checkboxcolumn&&n(i.firstChild).jqxCheckBox({locked:!1}),i.checkbox=n(i.firstChild),i.checkboxinstance=i.checkbox.data().jqxCheckBox.instance,i.checkboxrow=u.boundindex,this.dataview.filters.length>0&&(e=u.bounddata.dataindex,i.checkboxrow=e),s=n.data(i.firstChild,"jqxCheckBox").instance,s.updated=function(u,f,e){var h,c,l,o,s;if(r.editable){if(h=t.table[0].rows.length,c=t._getcolumnindex(r.datafield),t.editrow==undefined){if(r.cellbeginedit&&(l=r.cellbeginedit(i.checkboxrow,r.datafield,r.columntype,!f),l==!1)){t.setcellvalue(i.checkboxrow,r.datafield,!f,!0);return}if(t.editmode!=="selectedrow")for(o=0;o<h;o++)s=t.table[0].rows[o].cells[c].firstChild,s&&n(s).jqxCheckBox("destroy");t.editcell&&t.editcell.validated==!1?t.setcellvalue(i.checkboxrow,r.datafield,!f,!0):(t._raiseEvent(17,{rowindex:i.checkboxrow,datafield:r.datafield,value:e,columntype:r.columntype}),t.setcellvalue(i.checkboxrow,r.datafield,f,!0),t._raiseEvent(18,{rowindex:i.checkboxrow,datafield:r.datafield,oldvalue:e,value:f,columntype:r.columntype}))}}else r.checkboxcolumn&&(t.editcell&&t.endcelledit(t.editcell.row,t.editcell.column,!1,!0),f?t.selectrow(i.checkboxrow):t.unselectrow(i.checkboxrow))}):(i.checkboxrow=u.boundindex,this.dataview.filters.length>0&&(e=u.bounddata.dataindex,i.checkboxrow=e),n(i.firstChild).jqxCheckBox("_setState",f)))},_renderbuttoncell:function(t,i,r,u,f){var e,o,s;t.host.jqxButton&&(e=n(i),f==""&&(f=!1),e.find(".jqx-button").length==0?(i.innerHTML='<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>',n(i.firstChild).val(f),n(i.firstChild).attr("hideFocus","true"),n(i.firstChild).jqxButton({theme:t.theme,height:t.rowsheight-4,width:r.width-4}),i.button=n(i.firstChild),i.buttonrow=t.getboundindex(u),o=this.isTouchDevice(),o?(s=n.jqx.mobile.getTouchEventName("touchend"),t.addHandler(n(i.firstChild),s,function(n){r.buttonclick&&r.buttonclick(i.buttonrow,n)})):t.addHandler(n(i.firstChild),"click",function(n){r.buttonclick&&r.buttonclick(i.buttonrow,n)})):(i.buttonrow=t.getboundindex(u),n(i.firstChild).val(f)))},_clearvisualrow:function(t,i,r,u,f){var l=this.toTP("jqx-grid-cell"),h,c,e,o,a,s;for(i&&(l=" "+this.toTP("jqx-grid-group-cell")),l+=" "+this.toTP("jqx-grid-cleared-cell"),h=this.table[0].rows,c=0;c<u+f;c++)h[r]&&(e=h[r].cells[c],e.className!=l&&(e.className=l),o=this.columns.records[c],this._horizontalvalue==t||o.pinned||this.oldhscroll==!0&&(a=-t,e.style.marginLeft=-t+"px"),s=o.width,s<o.minwidth&&(s=o.minwidth),s>o.maxwidth&&(s=o.maxwidth),parseInt(e.style.width)!=s&&n(e).width(s),e.title!=""&&(e.title=""),e.innerHTML!=""&&(e.innerHTML=""));h[r]&&parseInt(h[r].style.height)!=this.rowsheight&&(h[r].style.height=parseInt(this.rowsheight)+"px")},_findgroupstate:function(n){var t=this._findgroup(n);return t==null?!1:t.expanded},_findgroup:function(n){return this.expandedgroups[n]?this.expandedgroups[n]:null},_clearcaches:function(){this._columnsbydatafield=[],this._pagescache=[],this._pageviews=[],this._cellscache=[],this.heights=[],this.hiddens=[],this.hiddenboundrows=[],this.heightboundrows=[],this.detailboundrows=[],this.details=[],this.expandedgroups=[],this._rowdetailscache=[],this._rowdetailselementscache=[],n.jqx.dataFormat&&n.jqx.dataFormat.cleardatescache(),this.tableheight=null},_getColumnText:function(t){if(this._columnsbydatafield==undefined&&(this._columnsbydatafield=[]),this._columnsbydatafield[t])return this._columnsbydatafield[t];var i=t,r=null;return n.each(this.columns.records,function(){if(this.datafield==t)return i=this.text,r=this,!1}),this._columnsbydatafield[t]={label:i,column:r},this._columnsbydatafield[t]},_getcolumnbydatafield:function(t){if(this.__columnsbydatafield==undefined&&(this.__columnsbydatafield=[]),this.__columnsbydatafield[t])return this.__columnsbydatafield[t];var r=t,i=null;return n.each(this.columns.records,function(){if(this.datafield==t||this.displayfield==t)return r=this.text,i=this,!1}),this.__columnsbydatafield[t]=i,this.__columnsbydatafield[t]},isscrollingvertically:function(){return this.vScrollBar.jqxScrollBar("isScrolling")},_renderrowdetails:function(t,i,r,u,f){var p,o,v,s,h,nt,tt,l,e,c;if(i!=undefined){var it=n(i),k=0,a=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(this.groupable&&this.groups.length>0)for(p=0;p<=f;p++)o=n(i.cells[p]),o[0].innerHTML="",o[0].className="jqx-grid-details-cell";if(o=n(i.cells[k]),o[0].style.display=="none"){for(var w=i.cells[k],d=2,rt=k;w!=undefined&&w.style.display=="none"&&d<10;)w=i.cells[rt+d-1],d++;o=n(w)}if(this.rtl)for(v=u;v<f;v++)i.cells[v].innerHTML="",i.cells[v].className="jqx-grid-details-cell";if(o.css("width","100%"),it.height(r.rowdetailsheight),o[0].className=t,s=this.getboundindex(r),h=s+"_",this._rowdetailscache[h]){if(nt=this._rowdetailscache[h],tt=nt.html,this.initrowdetails){if(this._rowdetailscache[h].element){var e=this._rowdetailscache[h].element,c=o.coord(),y=this.gridcontent.coord(),g=parseInt(c.top)-parseInt(y.top),b=parseInt(c.left)-parseInt(y.left);this.rtl&&(b=0),n(e).css("top",g),n(e).css("left",b),n(e).css("display","block"),n(e).width(this.host.width()-a),this.layoutrowdetails&&this.layoutrowdetails(s,e,this.element,this.getrowdata(s))}}else o[0].innerHTML=tt;return}if(o[0].innerHTML="",this.enablerowdetailsindent||(a=0),l='<div role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: '+a+'px;">'+r.rowdetails+"<\/div>",this.rtl&&(l='<div role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: 0px; margin-right: '+a+'px;">'+r.rowdetails+"<\/div>"),this._rowdetailscache[h]={id:i.id,html:l},this.initrowdetails){e=n(l)[0],n(this.gridcontent).prepend(n(e)),n(e).css("position","absolute"),n(e).width(this.host.width()-a),n(e).height(o.height()),c=o.coord(),n(e).css("z-index",2e3),this.isTouchDevice()&&n(e).css("z-index",99999),n(e).addClass(this.toThemeProperty("jqx-widget-content"));var c=o.coord(),y=this.gridcontent.coord(),g=parseInt(c.top)-parseInt(y.top),b=parseInt(c.left)-parseInt(y.left);n(e).css("top",g),n(e).css("left",b),this.content[0].scrollTop=0,this.content[0].scrollLeft=0,this.initrowdetails(s,e,this.element,this.getrowdata(s)),this._rowdetailscache[h].element=e,this._rowdetailselementscache[s]=e}else o[0].innerHTML=l}},_defaultcellsrenderer:function(t,i){i.cellsformat!=""&&n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(t)?t=n.jqx.dataFormat.formatdate(t,i.cellsformat,this.gridlocalization):n.jqx.dataFormat.isNumber(t)&&(t=n.jqx.dataFormat.formatnumber(t,i.cellsformat,this.gridlocalization)));var r="4px";if(this.rowsheight!=25&&(r=this.rowsheight/2-this._cellheight/2,r<0&&(r=4),r+="px"),this.enableellipsis){if(i.cellsalign=="center"||i.cellsalign=="middle")return r="5px",'<div style="text-overflow: ellipsis; overflow: hidden; padding-bottom: 2px; text-align: center; margin-top: '+r+';">'+t+"<\/div>";if(i.cellsalign=="left")return'<div style="overflow: hidden; text-overflow: ellipsis; padding-bottom: 2px; text-align: left; margin-right: 2px; margin-left: 4px; margin-top: '+r+';">'+t+"<\/div>";if(i.cellsalign=="right")return'<div style="overflow: hidden;  text-overflow: ellipsis; padding-bottom: 2px; text-align: right; margin-right: 2px; margin-left: 4px; margin-top: '+r+';">'+t+"<\/div>"}return i.cellsalign=="center"||i.cellsalign=="middle"?(r="5px",'<div style="text-align: center; margin-top: '+r+';">'+t+"<\/div>"):'<span style="margin-left: 4px; margin-right: 2px; margin-top: '+r+"; float: "+i.cellsalign+';">'+t+"<\/span>"},getcelltext:function(t,i){if(t==null||i==null)return null;var r=this.getcellvalue(t,i),u=this.getcolumn(i);return u&&u.cellsformat!=""&&n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(r)?r=n.jqx.dataFormat.formatdate(r,u.cellsformat,this.gridlocalization):n.jqx.dataFormat.isNumber(r)&&(r=n.jqx.dataFormat.formatnumber(r,u.cellsformat,this.gridlocalization))),r},getcelltextbyid:function(t,i){if(t==null||i==null)return null;var r=this.getcellvaluebyid(t,i),u=this.getcolumn(i);return u&&u.cellsformat!=""&&n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(r)?r=n.jqx.dataFormat.formatdate(r,u.cellsformat,this.gridlocalization):n.jqx.dataFormat.isNumber(r)&&(r=n.jqx.dataFormat.formatnumber(r,u.cellsformat,this.gridlocalization))),r},_getcellvalue:function(n,t){var i=null;return i=t.bounddata[n.datafield],n.displayfield!=null&&(i=t.bounddata[n.displayfield]),i==null&&(i=""),i},getcell:function(n,t){if(n==null||t==null)return null;var r=parseInt(n),i=n,u="";return isNaN(r)||(i=this.getrowdata(r)),i!=null&&(u=i[t]),this._getcellresult(u,n,t)},getrenderedcell:function(n,t){if(n==null||t==null)return null;var r=parseInt(n),i=n,u="";return isNaN(r)||(i=this.getrenderedrowdata(r)),i!=null&&(u=i[t]),this._getcellresult(u,n,t)},_getcellresult:function(n,t,i){var u=this.getcolumn(i);if(u==null||u==undefined)return null;var r=u.getcolumnproperties(),e=r.hidden,o=r.width,s=r.pinned,h=r.cellsalign,c=r.cellsformat,f=this.getrowheight(t);return f==!1?null:{value:n,row:t,column:i,datafield:i,width:o,height:f,hidden:e,pinned:s,align:h,format:c}},setcellvaluebyid:function(n,t,i,r,u){var f=this.getrowboundindexbyid(n);return this.setcellvalue(f,t,i,r,u)},getcellvaluebyid:function(n,t){var i=this.getrowboundindexbyid(n);return this.getcellvalue(i,t)},setcellvalue:function(t,i,r,u,f){var p,l,b,h,k,s,tt,it,o,y,d,g,ut,et,ot,ft;if(t==null||i==null)return!1;var v=parseInt(t),ct=v,e=t;if(isNaN(v)||(e=this.getrowdata(v)),p=!1,this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(p=!0),this.virtualmode&&(this._pagescache=[]),l="",e!=null&&e[i]!==r){var s=this._getcolumnbydatafield(i),a="string",w=this.source.datafields||(this.source._source?this.source._source.datafields:null);w&&(b="",n.each(w,function(){if(this.name==s.displayfield)return this.type&&(b=this.type),!1}),b&&(a=b)),l=e[i],(!s.nullable||r!=null&&r!==""&&s.nullable&&r.label===undefined)&&(n.jqx.dataFormat.isNumber(l)||a=="number"||a=="float"||a=="int"||a=="decimal"&&a!="date"?(r=new Number(r),r=parseFloat(r),isNaN(r)&&(r=0)):(n.jqx.dataFormat.isDate(l)||a=="date")&&r!=""&&(h=r,h=new Date(h),h!="Invalid Date"&&h!=null?r=h:h=="Invalid Date"&&(h=new Date,r=h))),e[i]=r,k=this.getrenderedrowdata(v,!0),k[i]=r,r!=null&&r.label!=null&&(s=this._getcolumnbydatafield(i),e[s.displayfield]=r.label,k[s.displayfield]=r.label,e[i]=r.value,k[i]=r.value),p&&e.dataindex!=undefined&&(ct=e.dataindex,this.dataview.cachedrecords[e.dataindex][i]=r,r!=null&&r.label!=undefined&&(this.dataview.cachedrecords[e.dataindex][i]=r.value,this.dataview.cachedrecords[e.dataindex][s.displayfield]=r.label))}else return this._updating||u==!1||this._renderrows(this.virtualsizeinfo),!1;if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){if(tt=v,p&&e.dataindex!=undefined&&(tt=e.dataindex),it=this.source._source._localdata()[tt],this.source.suspendKO=!0,o=it,o[i]&&o[i].subscribe)r!=null&&r.label!=null?(o[s.displayfield](r.label),o[i](r.value)):o[i](r);else{var w=this.source._source.datafields,rt=null;if(w&&n.each(w,function(){if(this.name==i)return rt=this.map,!1}),rt==null)r!=null&&r.label!=null?(o[i]=r.value,o[s.displayfield]=r.label):o[i]=r;else if(y=rt.split(this.source.mapChar),y.length>0){for(d=o,g=0;g<y.length-1;g++)d=d[y[g]];d[y[y.length-1]]=r}this.source._source._localdata.replace(it,n.extend({},o))}this.source.suspendKO=!1}if(this.sortcolumn&&this.dataview.sortby&&!this._updating?(ut=this.getsortinformation(),this.sortcolumn==i&&(this.dataview.clearsortdata(),this.dataview.sortby(ut.sortcolumn,ut.sortdirection.ascending))):this._updating||this.dataview.sortby&&this.dataview.sortcache[i]&&(this.dataview.sortcache[i]=null),this._cellscache=[],this.source.updaterow&&(f==undefined||f==!0)){var nt=!1,c=this.that,lt=function(n){!1==n&&c.setcellvalue(t,i,l,!0,!1)};try{et=this.getrowid(v),nt=this.source.updaterow(et,e,lt),nt==undefined&&(nt=!0)}catch(at){nt=!1,c.setcellvalue(t,i,l,!0,!1);return}}if(ot=this.vScrollInstance.value,this._updating&&u!=!0&&(u=!1),u==!0||u==undefined){var c=this.that,st=function(){c.pageable&&c.updatepagerdetails&&(c.updatepagerdetails(),(c.autoheight||c.autorowheight)&&c._updatepageviews())},ht=this.groupable&&this.groups.length>0;p&&!ht?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.refresh(),this.rendergridcontent(!0,!1),st(),this._renderrows(this.virtualsizeinfo)):this.sortcolumn&&!ht?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.reloaddata(),this.rendergridcontent(!0,!1),st(),this._renderrows(this.virtualsizeinfo)):this.groupable&&this.groups.length>0?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.pageable?this.groups.indexOf(i)!=-1?(this._pagescache=[],this._cellscache=[],this.dataview.refresh(),this._render(!0,!0,!1,!1)):(this._pagescache=[],this._cellscache=[],this.dataview.updateview(),this._renderrows(this.virtualsizeinfo)):(this._pagescache=[],this._cellscache=[],this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))):(this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))}return this.vScrollInstance.setPosition(ot),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this.showfilterrow&&this.filterable&&this.filterrow&&(ft=this.getcolumn(i).filtertype,(ft=="list"||ft=="checkedlist")&&this._updatelistfilters(!0)),this._raiseEvent(19,{rowindex:t,datafield:i,newvalue:r,value:r,oldvalue:l}),!0},getcellvalue:function(n,t){var r,i;return n==null||t==null?null:(r=parseInt(n),i=n,isNaN(r)||(i=this.getrowdata(r)),i!=null)?i[t]:null},getrows:function(){var e=this.dataview.records.length,u,r,t,i,f;if(this.virtualmode){for(t=[],i=0;i<this.dataview.records.length;i++)u=this.dataview.records[i],u&&t.push(u);return(this.dataview.records.length===undefined&&n.each(this.dataview.records,function(){var n=this;n&&t.push(n)}),r=0,this.pageable&&(r=this.dataview.pagenum*this.dataview.pagesize),t.length>this.source._source.totalrecords-r)?t.slice(0,this.source._source.totalrecords-r):t}if(this.dataview.sortdata){for(t=[],i=0;i<e;i++)f={},f=n.extend({},this.dataview.sortdata[i].value),t[i]=f;return t}return this.dataview.records},getrowboundindexbyid:function(n){var r=this.dataview.recordsbyid["id"+n],i,t;if(r&&r.boundindex)return this.getboundindex(r);for(i=this.getboundrows(),t=0;t<i.length;t++)if(i[t]&&i[t].uid==n)return t;return-1},getrowdatabyid:function(n){var t=this.dataview.recordsbyid["id"+n],i;return t?t:(i=this.getrowboundindexbyid(n),this.getboundrows()[i])},getrowdata:function(n){var t;return n==undefined&&(n=0),this.virtualmode?this.dataview.records[n]:this.getboundrows()[n]},getrenderedrowdata:function(n,t){var r,i;return(n==undefined&&(n=0),this.virtualmode)?(r=this.getrowvisibleindex(n),i=this.dataview.loadedrecords[r],i):(r=this.getrowvisibleindex(n),r>=0)?(this.groupable&&this.groups.length>0?i=this.dataview.loadedrecords[r]:(i=this.dataview.loadedrecords[r],this.pageable&&(t==undefined||t==!1)&&(i=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+n])),i):null},getboundrows:function(){return this.dataview.cachedrecords},getrowdisplayindex:function(n){for(var i=this.getdisplayrows(),t=0;t<i.length;t++)if(i[t].dataindex!==undefined){if(i[t].dataindex===n)return i[t].visibleindex}else if(i[t].boundindex===n)return i[t].visibleindex;return-1},getboundindex:function(n){var t=n.boundindex;return this.dataview.filters.length>0&&(n.bounddata?n.bounddata.dataindex!==undefined&&(t=n.bounddata.dataindex):n.dataindex!==undefined&&(t=n.dataindex)),t},getrowboundindex:function(n){var t=this.getdisplayrows()[n];return t?t.dataindex!==undefined?t.dataindex:t.boundindex:-1},getdisplayrows:function(){return this.dataview.loadedrecords},getloadedrows:function(){return this.getdisplayrows()},getvisiblerowdata:function(n){var t=this.getvisiblerows();return t?t[n]:null},getloadedrowdata:function(n){var t=this.getloadedrows();return t?t[n]:null},getvisiblerows:function(){var t,n,i;if(this.virtualmode)return this.dataview.loadedrecords;if(this.pageable){for(t=[],n=0;n<this.dataview.pagesize;n++){if(i=this.dataview.loadedrecords[n+this.dataview.pagesize*this.dataview.pagenum],i==undefined)break;t.push(i)}return t}if(this._startboundindex!=undefined&&this._endboundindex!=undefined){for(t=[],n=this._startvisibleindex;n<=this._endvisibleindex;n++){if(i=this.dataview.loadedrecords[n],i==undefined)break;t.push(i)}return t}return this.dataview.loadedrecords},getrowid:function(n){var r,i,t;if(n==undefined&&(n=0),this.virtualmode){if(i=this.getrowvisibleindex(n),t=this.dataview.loadedrecords[i],t)return t.uid}else{if(t=null,r=this.dataview.filters.length>0,n>=0&&n<this.dataview.bounditems.length&&!r&&(this.groupable&&this.groups.length>0?(i=this.getrowvisibleindex(n),t=this.dataview.loadedrecords[i]):(i=this.getrowvisibleindex(n),t=this.dataview.loadedrecords[i]),t))return t.uid;if(this.dataview.filters.length>0)return(t=this.getboundrows()[n],t&&t.uid!=null)?t.uid:null}return null},_updateGridData:function(n){var t=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(t=!0),t?(this.dataview.refresh(),n=="updaterow"?(this._render(!0,!0,!1,!1,!1),this.invalidate()):this.render()):this.sortcolumn||this.groupable&&this.groups.length>0?(this.dataview.reloaddata(),this.render()):(this._cellscache=[],this._pagescache=[],this._renderrows(this.virtualsizeinfo)),this.showfilterrow&&this.filterable&&this.filterrow&&this._updatelistfilters(!0)},updaterow:function(t,i,r){var f,u,e,o;if(t!=undefined&&i!=undefined){if(f=this.that,u=!1,f._datachanged=!0,e=function(t,i,u){var f,e;if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);if(f=!1,n.isArray(i)?(n.each(i,function(n){f=t.dataview.updaterow(this,u[n],!1)}),t.dataview.refresh()):f=t.dataview.updaterow(i,u),e=t.vScrollInstance.value,(r==undefined||r==!0)&&(t._updating==undefined||t._updating==!1)&&t._updateGridData("updaterow"),t.showaggregates&&t._updatecolumnsaggregates&&t._updatecolumnsaggregates(),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata){var o=t.dataview.recordsbyid["id"+i],s=t.dataview.records.indexOf(o),h=t.source._source._localdata()[s];t.source.suspendKO=!0,t.source._source._localdata.replace(h,n.extend({},o)),t.source.suspendKO=!1}return t.vScrollInstance.setPosition(e),f},this.source.updaterow){o=function(n){(n==!0||n==undefined)&&e(f,t,i)};try{u=this.source.updaterow(t,i,o),u==undefined&&(u=!0)}catch(s){u=!1}}else u=e(f,t,i);return u}return!1},deleterow:function(t){var f;if(t!=undefined){this._datachanged=!0;var i=!1,r=this.that,u=function(t,i){var u,r;if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);return r=!1,u=t.vScrollInstance.value,n.isArray(i)?(n.each(i,function(){r=t.dataview.deleterow(this,!1)}),t.dataview.refresh()):r=t.dataview.deleterow(i),(t._updating==undefined||t._updating==!1)&&(t._render(!0,!0,!1,!1),t.vScrollBar.css("visibility")!="visible"&&(t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._renderrows(t.virtualsizeinfo))),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.pop(rowdata),t.source.suspendKO=!1),t.vScrollInstance.setPosition(u),r};if(this.source.deleterow){f=function(n){(n==!0||n==undefined)&&u(r,t)};try{this.source.deleterow(t,f),i==undefined&&(i=!0)}catch(e){i=!1}}else i=u(r,t);return i}return!1},addrow:function(t,i,r){var u,f,h,e,o,s,c;if(i!=undefined){if(this._datachanged=!0,r==undefined&&(r="last"),u=!1,f=this.that,t==null&&(h=this.dataview.filters&&this.dataview.filters.length>0,e=h?this.dataview.cachedrecords.length:this.dataview.totalrecords,n.isArray(i)?(o=[],n.each(i,function(n){var t=f.dataview.getid(f.dataview.source.id,i[n],e+n);o.push(t)}),t=o):t=this.dataview.getid(this.dataview.source.id,i,e)),s=function(t,i,r,u){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var e=t.vScrollInstance.value,f=!1;return n.isArray(r)?(n.each(r,function(n){this.dataindex!=undefined&&delete this.dataindex;var r=null;i!=null&&i[n]!=null&&(r=i[n]),f=t.dataview.addrow(r,this,u,!1)}),t.dataview.refresh()):(r!=undefined&&r.dataindex!=undefined&&delete r.dataindex,f=t.dataview.addrow(i,r,u)),(t._updating==undefined||t._updating==!1)&&(t._render(!0,!0,!1,!1),t.invalidate()),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.push(r),t.source.suspendKO=!1),t.scrollmode!="deferred"?t.vScrollInstance.setPosition(e):t.vScrollInstance.setPosition(0),f},this.source.addrow){c=function(n,u){(n==!0||n==undefined)&&(u!=undefined&&(t=u),s(f,t,i,r))};try{u=this.source.addrow(t,i,r,c),u==undefined&&(u=!0)}catch(l){u=!1}if(u==!1)return!1}else s(this,t,i,r);return u}return!1},_findvisiblerow:function(n,t){var r,u,i;for(n==undefined&&(n=parseInt(this.vScrollInstance.value)),r=0,(t==undefined||t==null)&&(t=this.rows.records),u=t.length;r<=u;){if(mid=parseInt((r+u)/2),i=t[mid],i==undefined)break;if(i.top>n&&i.top+i.height>n)u=mid-1;else if(i.top<n&&i.top+i.height<n)r=mid+1;else return mid}return-1},_updatecellwidths:function(){var s=this.virtualsizeinfo,v,c,l,u,f,a,n,i;if(s&&(v=this.that,this.gridcontent!=undefined)){this.table==undefined&&(this.table=this.gridcontent.find("#contenttable"+this.element.id));var y=this.groupable&&this.groups.length>0,h=0,t=s.visiblerecords;for(this.pageable&&(this.autoheight||this.autorowheight)&&(t=this.dataview.pagesize,this.groupable&&(this.dataview.updateview(),t=this.dataview.rows.length)),this.groupable||this.pageable||!(this.autoheight||this.autorowheight)||(t=this.dataview.totalrecords),this.rowdetails&&(t+=this.dataview.pagesize),c=this.columns.records.length,l=this.table[0].rows,u=0;u<t;u++){if(f=l[u],!f)break;for(a=f.cells,n=0,i=0;i<c;i++){var e=this.columns.records[i],o=e.width,r=a[i];parseInt(r.style.left)!=n&&(r.style.left=n+"px"),parseInt(r.style.width)!=o&&(r.style.width=o+"px"),e.hidden&&e.hideable?r.style.display="none":n+=o}h==0&&(this.table.width(parseInt(n)+2),h=n)}this.showaggregates&&this._updateaggregates&&this._updateaggregates(),this.showfilterrow&&this.filterable&&this._updatefilterrowui&&this._updatefilterrowui(),this._updatescrollbarsafterrowsprerender(),y&&this._renderrows()}},_updatescrollbarsafterrowsprerender:function(){var r=this.hScrollBar[0].style.visibility,i=0,u=this.vScrollBar[0].style.visibility,n,t;u=="visible"&&(i=this.scrollbarsize+3),n=this.element.style.width,n=n.toString().indexOf("%")>=0?this.host.width():parseInt(n),parseInt(this.table[0].style.width)-2>n-i?(r!="visible"&&(this.autowidth||this.hScrollBar.css("visibility","visible"),this._arrange()),u=="visible"?this.scrollmode=="deferred"||this.virtualmode?this._updatevscrollbarmax():this.virtualsizeinfo&&(t=this.virtualsizeinfo.virtualheight-this._gettableheight(),!isNaN(t)&&t>0&&(r!="hidden"?this.vScrollBar.jqxScrollBar("max",t+this.scrollbarsize+4):this.vScrollBar.jqxScrollBar("max",t))):i=-2,this.hScrollBar.jqxScrollBar("max",i+this.table.width()-this.host.width())):r!="hidden"&&(this.hScrollBar.css("visibility","hidden"),this._arrange()),this._renderhorizontalscroll()},_prerenderrows:function(t){var p=this.that,k,v,y,f,l,w,h,d,g,c,a,nt,o,e,r,i,u,s;if(this.prerenderrequired==!0){if(this.prerenderrequired=!1,this.editable&&this._destroyeditors&&this._destroyeditors(),this.gridcontent==undefined)return;this.gridcontent.find("#contenttable"+this.element.id).remove(),this.table!=null&&(this.table.remove(),this.table=null),this.table=n('<div id="contenttable'+this.element.id+'" style="overflow: hidden; position: relative;" height="100%"><\/div>'),this.gridcontent.addClass(this.toTP("jqx-grid-content")),this.gridcontent.addClass(this.toTP("jqx-widget-content")),this.gridcontent.append(this.table),k=this.groupable&&this.groups.length>0,v=0,this.table[0].rows=[],y=this.toTP("jqx-grid-cell"),k&&(y=" "+this.toTP("jqx-grid-group-cell")),f=t.visiblerecords,this.pageable&&(this.autoheight||this.autorowheight)&&(f=this.dataview.pagesize,this.groupable&&(this.dataview.updateview(),f=this.dataview.rows.length,f<this.dataview.pagesize&&(f=this.dataview.pagesize))),!this.pageable&&(this.autoheight||this.autorowheight)&&(f=this.dataview.totalrecords),this.groupable&&(this.autoheight||this.autorowheight)&&!this.pageable&&(f=this.dataview.rows.length),this.rowdetails&&(f+=this.autoheight||this.autorowheight?this.dataview.pagesize:f),l=this.columns.records.length,n.jqx.browser.msie&&n.jqx.browser.version>8&&this.table.css("opacity","0.99"),n.jqx.browser.mozilla&&this.table.css("opacity","0.99"),navigator.userAgent.indexOf("Safari")!=-1&&this.table.css("opacity","0.99"),w=n.jqx.browser.msie&&n.jqx.browser.version<8,w&&this.host.attr("hideFocus","true"),h=this.tableZIndex,f*l>h&&(h=f*l);var tt=this.dataview.records.length==0,it=this.isTouchDevice(),b="";for(this._hiddencolumns=!1,c=0;c<f;c++){for(e='<div role="row" style="position: relative; height='+this.rowsheight+'px;" id="row'+c+this.element.id+'">',w&&(e='<div role="row" style="position: relative; z-index: '+h+"; height:"+this.rowsheight+'px;" id="row'+c+this.element.id+'">',h--),o=0,r=0;r<l;r++)i=this.columns.records[r],u=i.width,u<i.minwidth&&(u=i.minwidth),u>i.maxwidth&&(u=i.maxwidth),this.rtl?(d=h-l+2*r,s='<div role="gridcell" style="left: '+o+"px; z-index: "+d+"; width:"+u+"px;",h--):s='<div role="gridcell" style="left: '+o+"px; z-index: "+h--+"; width:"+u+"px;",i.hidden&&i.hideable?(s+="display: none;",this._hiddencolumns=!0,h++):o+=u,s+='" class="'+y+'"><\/div>',e+=s;v==0&&(this.table.width(parseInt(o)+2),v=o),e+="<\/div>",b+=e}for(p.WinJS?MSApp.execUnsafeLocalFunction(function(){p.table.html(b)}):p.table[0].innerHTML=b,this.table[0].rows=[],g=this.table.children(),c=0;c<f;c++)for(a=g[c],this.table[0].rows.push(a),a.cells=[],nt=n(a).children(),r=0;r<l;r++)a.cells.push(nt[r]);if(f==0){for(o=0,this.showemptyrow&&(e=n('<div style="position: relative;" id="row0'+this.element.id+'"><\/div>'),this.table.append(e),e.height(this.rowsheight),this.table[0].rows[0]=e[0],this.table[0].rows[0].cells=[]),r=0;r<l;r++)i=this.columns.records[r],u=i.width,this.showemptyrow&&(s=n('<div style="position: absolute; height: 100%; left: '+o+"px; z-index: "+h--+"; width:"+u+'px;" class="'+y+'"><\/div>'),s.height(this.rowsheight),e.append(s),this.table[0].rows[0].cells[r]=s[0]),u<i.minwidth&&(u=i.minwidth),u>i.maxwidth&&(u=i.maxwidth),i.hidden&&i.hideable||(o+=u);this.table.width(parseInt(o)+2),v=o}this._updatescrollbarsafterrowsprerender(),this.rendered&&this.rendered("rows"),this._addoverlayelement()}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var t=null,n=null,c,l,a,p,v,r,e,ut,i,h,g,nt,tt,it,rt,w;this.tableheight=null;var u=this.that,b=!1,y=!1;if(this.width!=null&&this.width.toString().indexOf("px")!=-1?t=this.width:this.width==undefined||isNaN(this.width)||(t=this.width),this.width!=null&&this.width.toString().indexOf("%")!=-1&&(t=this.width,b=!0),this.autowidth){for(c=0,l=0;l<this.columns.records.length;l++)a=this.columns.records[l].width,a=="auto"?(a=this._measureElementWidth(this.columns.records[l].text),c+=a):c+=a;this.vScrollBar.css("visibility")!="hidden"&&(c+=this.scrollbarsize+4),t=c,this.width=t}this.height!=null&&this.height.toString().indexOf("px")!=-1?n=this.height:this.height==undefined||isNaN(this.height)||(n=this.height),this.height!=null&&this.height.toString().indexOf("%")!=-1&&(n=this.height,y=!0),p=function(){var n=0,t=u.showheader?u.columnsheader!=null?u.columnsheader.height()+2:0:0;return n+=t,u.pageable&&(n+=u.pagerheight),u._groupsheader()&&(n+=u.groupsheaderheight),u.showtoolbar&&(n+=u.toolbarheight),u.showstatusbar&&(n+=u.statusbarheight),u.hScrollBar[0].style.visibility=="visible"&&(n+=20),n},this.autoheight&&this.virtualsizeinfo?this.pageable&&this.gotopage?(v=0,n=v+(this._pageviews[0]?this._pageviews[0].height:0),n+=p(),this.showemptyrow&&this.dataview.totalrecords==0&&(n+=this.rowsheight)):(v=this.host.height()-this._gettableheight(),this._pageviews.length>0?(n=v+this._pageviews[this._pageviews.length-1].height+this._pageviews[this._pageviews.length-1].top,this.vScrollBar[0].style.visibility="hidden"):(n=p(),this.showemptyrow&&(n+=this.rowsheight))):this.autoheight&&(n=this.dataview.totalrecords*this.rowsheight,this._loading&&(n=250,this.dataloadelement.height(n)),n+=p(),n>1e4&&(n=1e4)),t!=null?(t=parseInt(t),b?this.element.style.width=this.width:this.element.style.width!=parseInt(this.width)+"px"&&(this.element.style.width=parseInt(this.width)+"px"),b&&(t=this.host.width(),t<=2&&(t=600,this.host.width(t)),this._oldWidth||(this._oldWidth=t))):this.host.width(250),n!=null?(y||(n=parseInt(n)),y?this.element.style.height=this.height:this.element.style.height!=parseInt(n)+"px"&&(this.element.style.height=parseInt(n)+"px"),y&&!this.autoheight&&(n=this.host.height(),n==0&&(n=400,this.host.height(n)),this._oldHeight||(this._oldHeight=n))):this.host.height(250),this.autoheight&&(this.tableheight=null,this._gettableheight()),r=0,this.showtoolbar?(this.toolbar.width(t),this.toolbar.height(this.toolbarheight-1),this.toolbar.css("top",0),r+=this.toolbarheight,n-=parseInt(this.toolbarheight)):this.toolbar[0].style.height="0px",this.showstatusbar?(this.showaggregates?this.statusbar.width(this.table?Math.max(t,this.table.width()):t):this.statusbar.width(t),this.statusbar.height(this.statusbarheight-1)):this.statusbar[0].style.height="0px",this._groupsheader()?(this.groupsheader.width(t),this.groupsheader.height(this.groupsheaderheight),this.groupsheader.css("top",r),e=this.groupsheader.height()+1,r+=e,n>e&&(n-=parseInt(e))):(this.groupsheader[0].style.width!=t+"px"&&(this.groupsheader[0].style.width=parseInt(t)+"px"),this.groupsheader[0].style.height!=this.groupsheaderheight+"px"&&(this.groupsheader[0].style.height=parseInt(this.groupsheaderheight)+"px"),this.groupsheader[0].style.top!=r+"px"&&this.groupsheader.css("top",r),e=this.showgroupsheader&&this.groupable?this.groupsheaderheight:0,ut=r+e+"px",this.content[0].style.top!=ut&&this.content.css("top",r+this.groupsheaderheight)),i=this.scrollbarsize,isNaN(i)&&(i=parseInt(i),i=isNaN(i)?"17px":i+"px"),i=parseInt(i);var f=4,o=2,s=0;this.vScrollBar[0].style.visibility=="visible"&&(s=i+f),this.hScrollBar[0].style.visibility=="visible"&&(o=i+f+2),h=0,this.pageable&&(h=this.pagerheight,o+=this.pagerheight),this.showstatusbar&&(o+=this.statusbarheight,h+=this.statusbarheight),this.hScrollBar[0].style.height!=i+"px"&&(this.hScrollBar[0].style.height=parseInt(i)+"px"),(this.hScrollBar[0].style.top!=r+n-f-i-h+"px"||this.hScrollBar[0].style.left!="0px")&&this.hScrollBar.css({top:r+n-f-i-h+"px",left:"0px"});var ft=this.hScrollBar[0].style.width,k=!1,d=!1;s==0?ft!=t-2+"px"&&(this.hScrollBar.width(t-2),k=!0):ft!=t-i-f+"px"&&(this.hScrollBar.width(t-i-f+"px"),k=!0),this.autoheight||(this.vScrollBar[0].style.width!=i+"px"&&(this.vScrollBar.width(i),d=!0),this.vScrollBar[0].style.height!=parseInt(n)-o+"px"&&(this.vScrollBar.height(parseInt(n)-o+"px"),d=!0),(this.vScrollBar[0].style.left!=parseInt(t)-parseInt(i)-f+"px"||this.vScrollBar[0].style.top!=r+"px")&&this.vScrollBar.css({left:parseInt(t)-parseInt(i)-f+"px",top:r})),this.rtl&&(this.vScrollBar.css({left:"0px",top:r}),this.vScrollBar.css("visibility")!="hidden"&&this.hScrollBar.css({left:i+2})),g=this.vScrollInstance,g.disabled=this.disabled,this.autoheight||d&&g.refresh(),nt=this.hScrollInstance,nt.disabled=this.disabled,k&&nt.refresh(),this.autowidth&&(this.hScrollBar[0].style.visibility="hidden"),tt=function(n){n.vScrollBar[0].style.visibility=="visible"&&n.hScrollBar[0].style.visibility=="visible"?(n.bottomRight[0].style.visibility="visible",n.bottomRight.css({left:1+parseInt(n.vScrollBar.css("left")),top:parseInt(n.hScrollBar.css("top"))}),n.rtl&&n.bottomRight.css("left","0px"),n.bottomRight.width(parseInt(i)+3),n.bottomRight.height(parseInt(i)+4),n.showaggregates&&(n.bottomRight.css("z-index",99),n.bottomRight.height(parseInt(i)+4+n.statusbarheight),n.bottomRight.css({top:parseInt(n.hScrollBar.css("top"))-n.statusbarheight}))):n.bottomRight[0].style.visibility="hidden"},tt(this),this.content[0].style.width!=t-s+"px"&&this.content.width(t-s),this.content[0].style.height!=n-o+3+"px"&&this.content.height(n-o+3),this.content[0].style.top!=r+"px"&&this.content.css("top",r),this.rtl&&(this.content.css("left",s),this.table&&(it=this.table.width(),it<t-s&&this.content.css("left",t-it))),this.showstatusbar&&(this.statusbar.css("top",r+n-this.statusbarheight-(this.pageable?this.pagerheight:0)),this.showaggregates&&(this.hScrollBar.css("visibility")=="visible"&&(this.hScrollBar.css({top:r+n-f-i-h+this.statusbarheight+"px"}),this.statusbar.css("top",1+r+n-i-5-this.statusbarheight-(this.pageable?this.pagerheight:0))),tt(this)),this.rtl&&(this.hScrollBar.css("visibility")!="visible"?this.statusbar.css("left",this.content.css("left")):this.statusbar.css("left","0px"))),this.pageable?(this.pager.width(t),this.pager.height(this.pagerheight),this.pager.css("top",r+n-this.pagerheight-1)):this.pager[0].style.height="0px",this.table!=null&&(rt=-2,this.vScrollBar[0].style.visibility=="visible"&&(rt=this.scrollbarsize+3),this.hScrollBar[0].style.visibility=="visible"&&(w=rt+this.table.width()-this.host.width(),w>=0&&this.hScrollBar.jqxScrollBar("max",w),this.hScrollBar[0].style.visibility=="visible"&&w==0&&(this.hScrollBar[0].style.visibility="hidden",this._arrange()))),t!=parseInt(this.dataloadelement[0].style.width)&&(this.dataloadelement[0].style.width=this.element.style.width),n!=parseInt(this.dataloadelement[0].style.height)&&(this.dataloadelement[0].style.height=this.element.style.height),this._hostwidth=t},destroy:function(){var f,u,i,t;if(delete n.jqx.dataFormat.datescache,delete this.gridlocalization,n.jqx.utilities.resize(this.host,null,!0),this.table&&this.table[0]){for(f=this.table[0].rows.length,i=0;i<f;i++){var r=this.table[0].rows[i],e=r.cells,o=e.length;for(u=0;u<o;u++)n(r.cells[u]).remove(),r.cells[u]=null,delete r.cells[u];r.cells=null,delete r.cells,n(this.table[0].rows[i]).remove(),this.table[0].rows[i]=null}delete this.table[0].rows,this.table.remove(),delete this.table}if(this.columns&&this.columns.records){for(i=0;i<this.columns.records.length;i++)t=this.columns.records[i],this._removecolumnhandlers(this.columns.records[i]),t.element&&(n(t.element).remove(),n(t.sortasc).remove(),n(t.sortdesc).remove(),n(t.filtericon).remove(),n(t.menu).remove(),t.element=null,t.uielement=null,t.sortasc=null,t.sortdesc=null,t.filtericon=null,t.menu=null,delete t.element,delete t.uielement,delete t.sortasc,delete t.sortdesc,delete t.filtericon,delete t.menu,delete this.columnsrow[0].cells[i]);delete this.columnsrow[0].cells,delete this.columnsrow}if(jQuery.removeData(document.body,"contextmenu"+this.element.id),this.host.jqxDropDownList&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.editable&&this._destroyeditors&&this._destroyeditors(),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.host.jqxMenu&&this.gridmenu&&(this.removeHandler(n(document),"click.menu"+this.element.id),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu=null),this.pagershowrowscombo&&(this.pagershowrowscombo.jqxDropDownList("destroy"),this.pagershowrowscombo=null),this.pagerrightbutton&&(this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),this.pagerrightbutton.jqxButton("destroy"),this.pagerrightbutton=null),this.pagerleftbutton&&(this.removeHandler(this.pagerleftbutton,"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.pagerleftbutton.jqxButton("destroy"),this.removeHandler(n(document),"mouseup.pagerbuttons"+this.element.id),this.pagerleftbutton=null),this.removeHandler(n(document),"mousedown.resize"+this.element.id),this.removeHandler(n(document),"mouseup.resize"+this.element.id),this.removeHandler(n(document),"mousemove.resize"+this.element.id),this.removeHandler(n(document),"mousedown.reorder"+this.element.id),this.removeHandler(n(document),"mouseup.reorder"+this.element.id),this.removeHandler(n(document),"mousemove.reorder"+this.element.id),this.removeHandler(n(window),"resize."+this.element.id),this.groupable){var s="mousemove.grouping"+this.element.id,h="mousedown.grouping"+this.element.id,c="mouseup.grouping"+this.element.id;this.removeHandler(n(document),s),this.removeHandler(n(document),h),this.removeHandler(n(document),c)}this.content&&(this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll")),this._removeHandlers(),this.hScrollInstance.destroy(),this.vScrollInstance.destroy(),this.hScrollBar.remove(),this.vScrollBar.remove(),this._clearcaches(),delete this.hScrollInstance,delete this.vScrollInstance,delete this.visiblerows,delete this.hittestinfo,delete this.rows,delete this.columns,delete this.columnsbydatafield,delete this.pagescache,delete this.pageviews,delete this.cellscache,delete this.heights,delete this.hiddens,delete this.hiddenboundrows,delete this.heightboundrows,delete this.detailboundrows,delete this.details,delete this.expandedgroups,delete this._rowdetailscache,delete this._rowdetailselementscache,delete this.columnsmenu,this.columnsheader.remove(),delete this.columnsheader,this.selectionarea.remove(),delete this.selectionarea,this.dataview._clearcaches(),this.content.removeClass(),this.content.remove(),this.content=null,delete this.content,this.vScrollBar=null,this.hScrollBar=null,delete this.hScrollBar,delete this.hScrollBar,this.gridcontent.remove(),delete this.gridcontent,this.gridmenu&&(this.gridmenu=null,delete this.gridmenu),delete this._mousemovefunc,delete this._mousewheelfunc,this.dataview.destroy(),delete this.dataview,this.bottomRight.remove(),delete this.bottomRight,this.wrapper.remove(),delete this.wrapper,this.pagerdiv&&(this.pagerdiv.remove(),delete this.pagerdiv),this.pagerpageinput&&(this.pagerpageinput.remove(),delete this.pagerpageinput),this.pagergoto&&(this.pagergoto.remove(),delete this.pagergoto),this.pagershowrows&&(this.pagershowrows.remove(),delete this.pagershowrows),this.pagerfirstbutton&&(this.pagerfirstbutton.remove(),delete this.pagerfirstbutton),this.pagerlastbutton&&(this.pagerlastbutton.remove(),delete this.pagerlastbutton),this.pagerbuttons&&(this.pagerbuttons.remove(),delete this.pagerbuttons),this.pagerdetails&&(this.pagerdetails.remove(),delete this.pagerdetails),this.pagergotoinput&&(this.pagergotoinput.remove(),delete this.pagergotoinput),this.pager.remove(),delete this.pager,this.groupsheader.remove(),delete this.groupsheader,this.dataloadelement.remove(),delete this.dataloadelement,this.toolbar.remove(),delete this.toolbar,this.statusbar.remove(),delete this.statusbar,this.host.removeData(),this.host.removeClass(),this.host.remove(),this.host=null,delete this.host,delete this.element,delete this.set,delete this.get,delete this.that,delete this.call},_initializeColumns:function(){var u=this.source.datafields,c,e,l,o,i,h;if(u==null&&this.source._source&&(u=this.source._source.datafields),c=u?u.length>0:!1,this.autogeneratecolumns){if(e=[],u)n.each(u,function(){var n={datafield:this.name,text:this.text||this.name,cellsformat:this.format||""};e.push(n)});else if(this.source.records.length>0){l=this.source.records[0];for(obj in l)obj!="uid"&&(i={width:100,datafield:obj,text:obj},e.push(i))}this.columns=e}if(this.columns&&this.columns.records)for(o=0;o<this.columns.records.length;o++)this._removecolumnhandlers(this.columns.records[o]);var r=this.that,f=new n.jqx.collection(this.element),s=0;this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,this.groupable&&n.each(this.groups,function(){var n=new t(r,this);n.visibleindex=s++,n.width=r.groupindentwidth,f.add(n),n.grouped=!0,n.filterable=!1,n.sortable=!1,n.editable=!1,n.resizable=!1,n.draggable=!1}),this.rowdetails&&this.showrowdetailscolumn&&(i=new t(r,this),i.visibleindex=s++,i.width=r.groupindentwidth,i.pinned=!0,i.editable=!1,i.filterable=!1,i.draggable=!1,i.groupable=!1,i.resizable=!1,f.add(i),r._haspinned=!0),this.selectionmode=="checkbox"&&(i=new t(r,this),i.visibleindex=s++,i.width=r.groupindentwidth,i.checkboxcolumn=!0,i.editable=!1,i.columntype="checkbox",i.groupable=!1,i.draggable=!1,i.filterable=!1,i.resizable=!1,i.datafield="_checkboxcolumn",f.add(i)),h=[],n.each(this.columns,function(n){if(r.columns[n]!=undefined){var i=new t(r,this);if(i.visibleindex=s++,this.dataField!=undefined&&(this.datafield=this.dataField),this.pinned&&(r._haspinned=!0),this.datafield==null)r.source&&r.source._source&&r.source._source.datatype=="array"&&(c||(r.source._source.datafields?r.source._source.datafields.push({name:n.toString()}):(r.source._source.datafields=[],r.source._source.datafields.push({name:n.toString()}))),this.datafield=n.toString(),this.displayfield=n.toString(),i.datafield=this.datafield,i.displayfield=this.displayfield);else if(h[this.datafield])throw new Error("jqxGrid: Invalid column 'datafield' setting. jqxGrid's columns should be initialized with unique data fields.");else h[this.datafield]=!0;f.add(i)}}),this.rtl&&f.records.reverse(),this.columns=f},_initializeRows:function(){var t=new n.jqx.collection(this.element);this.rows&&this.rows.clear(),this.rows=t},_raiseEvent:function(n,t){var r,i,u;if(t==undefined&&(t={owner:null}),this._trigger!==!1)return r=this.events[n],this._camelCase||(r=r.toLowerCase()),args=t,args.owner=this,i=new jQuery.Event(r),i.owner=this,i.args=args,u=this.host.trigger(i),t=i.args,u},wheel:function(n,t){var r,i;if(t.autoheight&&t.hScrollBar.css("visibility")!="visible")return n.returnValue=!0,!0;if(r=0,n||(n=window.event),n.originalEvent&&n.originalEvent.wheelDelta&&(n.wheelDelta=n.originalEvent.wheelDelta),n.wheelDelta?r=n.wheelDelta/120:n.detail&&(r=-n.detail/3),r)return i=t._handleDelta(r),i&&(n.preventDefault&&n.preventDefault(),n.originalEvent!=null&&(n.originalEvent.mouseHandled=!0),n.stopPropagation!=undefined&&n.stopPropagation()),i?(i=!1,n.returnValue=i,i):!1;n.preventDefault&&n.preventDefault(),n.returnValue=!1},_handleDelta:function(n){var t,i;if(this.vScrollBar.css("visibility")!="hidden"){if(t=this.vScrollInstance.value,n<0?this.scrollDown():this.scrollUp(),i=this.vScrollInstance.value,t!=i)return!0}else if(this.hScrollBar.css("visibility")!="hidden"&&(t=this.hScrollInstance.value,n>0?this.hScrollInstance.value>2*this.horizontalscrollbarstep?this.hScrollInstance.setPosition(this.hScrollInstance.value-2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(this.hScrollInstance.max),i=this.hScrollInstance.value,t!=i))return!0;return!1},scrollDown:function(){if(this.vScrollBar.css("visibility")!="hidden"){var n=this.vScrollInstance;n.value+this.rowsheight<=n.max?n.setPosition(parseInt(n.value)+this.rowsheight):n.setPosition(n.max)}},scrollUp:function(){if(this.vScrollBar.css("visibility")!="hidden"){var n=this.vScrollInstance;n.value-this.rowsheight>=n.min?n.setPosition(parseInt(n.value)-this.rowsheight):n.setPosition(n.min)}},_removeHandlers:function(){var i=this.that,t;this.removeHandler(this.vScrollBar,"valuechanged"),this.removeHandler(this.hScrollBar,"valuechanged"),this.vScrollInstance.valuechanged=null,this.hScrollInstance.valuechanged=null,t="mousedown.jqxgrid",this.isTouchDevice()&&(t=n.jqx.mobile.getTouchEventName("touchend")),this.removeHandler(this.host,"dblclick.jqxgrid"),this.removeHandler(this.host,t),this.removeHandler(this.content,"mousemove",this._mousemovefunc),this.removeHandler(this.host,"mouseleave.jqxgrid"),this.removeHandler(this.content,"mouseenter"),this.removeHandler(this.content,"mouseleave"),this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll"),this.removeHandler(this.content,"selectstart."+this.element.id),this.removeHandler(this.host,"dragstart."+this.element.id),this.removeHandler(this.host,"keydown.edit"+this.element.id),this.removeHandler(n(document),"keydown.edit"+this.element.id),this.removeHandler(n(document),"keyup.edit"+this.element.id),this._mousemovedocumentfunc&&this.removeHandler(n(document),"mousemove.selection"+this.element.id,this._mousemovedocumentfunc),this.removeHandler(n(document),"mouseup.selection"+this.element.id),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.editable&&this.removeHandler(n(document),"mousedown.gridedit"+this.element.id),this.host.off&&(this.content.off("mousemove"),this.host.off("mousewheel"))},_addHandlers:function(){var t=this.that,i=t.isTouchDevice(),u,r,f;i||this.addHandler(this.host,"dragstart."+this.element.id,function(){return!1}),this.editable&&this.addHandler(n(document),"mousedown.gridedit"+this.element.id,function(n){var y,i,r,s,h,o,c;if(t.editable&&t.begincelledit&&t.editcell&&!t.vScrollInstance.isScrolling()&&!t.vScrollInstance.isScrolling()){var e=t.host.coord(),l=t.host.width(),a=t.host.height(),u=!1,f=!1,v=!1;if((n.pageY<e.top||n.pageY>e.top+a)&&(u=!0,f=!0),(n.pageX<e.left||n.pageX>e.left+l)&&(u=!0,v=!0),u){if(y=!1,t.editcell&&t.editcell.editor)switch(t.editcell.columntype){case"datetimeinput":if(t.editcell.editor.jqxDateTimeInput&&t.editcell.editor.jqxDateTimeInput("container")[0].style.display=="block")if(i=t.editcell.editor.jqxDateTimeInput("container").coord().top,r=t.editcell.editor.jqxDateTimeInput("container").coord().top+t.editcell.editor.jqxDateTimeInput("container").height(),f&&(n.pageY<i||n.pageY>r))u=!0,t.editcell.editor.jqxDateTimeInput("close");else return;break;case"combobox":if(t.editcell.editor.jqxComboBox&&t.editcell.editor.jqxComboBox("container")[0].style.display=="block")if(i=t.editcell.editor.jqxComboBox("container").coord().top,r=t.editcell.editor.jqxComboBox("container").coord().top+t.editcell.editor.jqxComboBox("container").height(),f&&(n.pageY<i||n.pageY>r))u=!0,t.editcell.editor.jqxComboBox("close");else return;break;case"dropdownlist":if(t.editcell.editor.jqxDropDownList&&t.editcell.editor.jqxDropDownList("container")[0].style.display=="block")if(i=t.editcell.editor.jqxDropDownList("container").coord().top,r=t.editcell.editor.jqxDropDownList("container").coord().top+t.editcell.editor.jqxDropDownList("container").height(),f&&(n.pageY<i||n.pageY>r))u=!0,t.editcell.editor.jqxDropDownList("close");else return;break;case"template":case"custom":for(s=["jqxDropDownList","jqxComboBox","jqxDropDownButton","jqxDateTimeInput"],h=function(i){var r=t.editcell.editor.data();if(r[i]&&r[i].instance.container&&r[i].instance.container[0].style.display=="block"){var e=r[i].instance,o=e.container.coord().top,s=e.container.coord().top+e.container.height();return f&&(n.pageY<o||n.pageY>s)?(u=!0,e.close(),!0):!1}},o=0;o<s.length;o++)if(c=h(s[o]),c==!1)return}t.endcelledit(t.editcell.row,t.editcell.column,!1,!0)}}}),this.vScrollInstance.valuechanged=function(n){t.virtualsizeinfo&&(t._closemenu(),t.scrollmode!="physical"?(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=n.currentValue):t.currentScrollValue!=undefined&&Math.abs(t.currentScrollValue-n.currentValue)>=5?(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=n.currentValue):(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=n.currentValue),t.pageable||t.groupable||!t.dataview.virtualmode||(t.loadondemandupdate&&clearTimeout(t.loadondemandupdate),t.loadondemandupdate=setTimeout(function(){t.loadondemand=!0,t._renderrows(t.virtualsizeinfo)},100)),i&&(t._lastScroll=new Date))},this.hScrollInstance.valuechanged=function(){if(t.virtualsizeinfo){t._closemenu();var r=function(){t._renderhorizontalscroll(),t._renderrows(t.virtualsizeinfo),t.editcell&&!t.editrow&&t._showcelleditor&&t.editcell.editing&&(t.hScrollInstance.isScrolling()||t._showcelleditor(t.editcell.row,t.getcolumn(t.editcell.column),t.editcell.element,t.editcell.init))},u=t._browser==undefined?t._isIE10():t._browser;navigator&&navigator.userAgent.indexOf("Safari")!=-1?(t._hScrollTimer&&clearTimeout(t._hScrollTimer),t._hScrollTimer=setTimeout(function(){r()},1)):n.jqx.browser.mozilla||n.jqx.browser.msie?(t._hScrollTimer&&clearTimeout(t._hScrollTimer),t._hScrollTimer=setTimeout(function(){r()},.01)):r(),i&&(t._lastScroll=new Date)}},this._mousewheelfunc=this._mousewheelfunc||function(n){if(!t.editcell&&t.enablemousewheel)return t.wheel(n,t),!1},this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"mousewheel",this._mousewheelfunc),u="mousedown.jqxgrid",i&&(u=n.jqx.mobile.getTouchEventName("touchend")),this.addHandler(this.host,u,function(i){if(t.isTouchDevice()&&((t._newScroll=new Date,t._newScroll-t._lastScroll<500)||n(i.target).ischildof(t.vScrollBar)||n(i.target).ischildof(t.hScrollBar)))return!1;t._mousedown=new Date;var r=t._handlemousedown(i,t);return t.isNestedGrid&&(t.resizablecolumn||t.columnsreorder||i.stopPropagation()),t._lastmousedown=new Date,r}),i||(this.addHandler(this.host,"dblclick.jqxgrid",function(i){if(t.editable&&t.begincelledit&&t.editmode=="dblclick")t._handledblclick(i,t);else if(n.jqx.browser.msie&&n.jqx.browser.version<9)var r=t._handlemousedown(i,t);return t.mousecaptured=!1,t._lastmousedown=new Date,!0}),this._mousemovefunc=function(n){if(t._handlemousemove)return t._handlemousemove(n,t)},this.addHandler(this.content,"mousemove",this._mousemovefunc),t._handlemousemoveselection&&(this._mousemovedocumentfunc=function(n){if(t._handlemousemoveselection)return t._handlemousemoveselection(n,t)},this.addHandler(n(document),"mousemove.selection"+this.element.id,this._mousemovedocumentfunc)),this.addHandler(n(document),"mouseup.selection"+this.element.id,function(n){t._handlemouseupselection&&t._handlemouseupselection(n,t)}));try{(document.referrer!=""||window.frameElement)&&window.top!=null&&window.top!=window.self&&(r=null,window.parent&&document.referrer&&(r=document.referrer),r&&r.indexOf(document.location.host)!=-1&&(f=function(n){t._handlemouseupselection&&t._handlemouseupselection(n,t)},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",f,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",f)))}catch(e){}this.focused=!1,i||(this.addHandler(this.content,"mouseenter",function(){t.focused=!0,t.wrapper&&(t.wrapper.parent().attr("tabindex",0),t.wrapper.attr("tabindex",1),t.content.attr("tabindex",2)),t._overlayElement&&(t._overlayElement[0].style.visibility=t.vScrollInstance.isScrolling()||t.hScrollInstance.isScrolling()?"visible":"hidden")}),this.addHandler(this.content,"mouseleave",function(){t.wrapper&&(t.wrapper.parent().removeAttr("tabindex"),t.wrapper.removeAttr("tabindex"),t.content.removeAttr("tabindex")),t._handlemousemove&&t.enablehover&&t._clearhoverstyle(),t._overlayElement&&(t._overlayElement[0].style.visibility="hidden"),t.focused=!1}),(this.groupable||this.columnsreorder)&&this.addHandler(n(document),"selectstart."+this.element.id,function(){if(t.__drag===!0)return!1}),this.addHandler(this.content,"selectstart."+this.element.id,function(i){return t.enablebrowserselection?!0:t.showfilterrow&&n(i.target).ischildof(t.filterrow)?!0:t.editcell?void 0:!1}),this.addHandler(n(document),"keyup.edit"+this.element.id,function(){t._keydown=!1}),this.addHandler(n(document),"keydown.edit"+this.element.id,function(i){var f,r,u;if(t._keydown=!0&&!t.editcell,u=i.charCode?i.charCode:i.keyCode?i.keyCode:0,t.handlekeyboardnavigation&&(f=t.handlekeyboardnavigation(i),f==!0))return!1;if(t.editable&&t.editcell&&(u==13||u==27)&&t._handleeditkeydown&&(r=t._handleeditkeydown(i,t)),u==27&&(t.mousecaptured=!1,t.selectionarea.css("visibility")=="visible"&&t.selectionarea.css("visibility","hidden")),n.jqx.browser.msie&&n.jqx.browser.version<8&&t.focused&&!t.isNestedGrid){if(u==13&&r==!1)return r;if(r=!0,u=i.charCode?i.charCode:i.keyCode?i.keyCode:0,!t.editcell&&t.editable&&t.editmode!="programmatic"&&t._handleeditkeydown&&(r=t._handleeditkeydown(i,t)),r&&t.keyboardnavigation&&t._handlekeydown)return r=t._handlekeydown(i,t),r||(i.preventDefault&&i.preventDefault(),i.stopPropagation!=undefined&&i.stopPropagation()),r}return!0}),this.addHandler(this.host,"keydown.edit"+this.element.id,function(i){var r=!0,u;return t.handlekeyboardnavigation&&(u=t.handlekeyboardnavigation(i),u==!0)?!1:(t.editable&&t.editmode!="programmatic"&&t._handleeditkeydown&&(r=t._handleeditkeydown(i,t)),n.jqx.browser.msie&&n.jqx.browser.version<8?t.isNestedGrid&&r&&t.keyboardnavigation&&t._handlekeydown&&(r=t._handlekeydown(i,t),i.stopPropagation()):r&&t.keyboardnavigation&&t._handlekeydown&&(r=t._handlekeydown(i,t),t.isNestedGrid&&i.stopPropagation()),r||(i.preventDefault&&i.preventDefault(),i.stopPropagation!=undefined&&i.stopPropagation()),r)}))},_hittestrow:function(t,i){var e,c,y,o,r,s,h,l;if(this.vScrollInstance!=null&&this.hScrollInstance!=null){t==undefined&&(t=0),i==undefined&&i==0;var a=this.vScrollInstance,v=this.hScrollInstance,f=a.value;if(this.vScrollBar.css("visibility")!="visible"&&(f=0),e=v.value,this.hScrollBar.css("visibility")!="visible"&&(e=0),this.scrollmode=="deferred"&&this._newmax!=null&&f>this._newmax&&(f=this._newmax),c=parseInt(f)+i,y=parseInt(e)+t,this.visiblerows!=null){if(o=!1,r=this._findvisiblerow(c,this.visiblerows),r>=0){var u=this.visiblerows[r],p=this.rowdetails&&u.rowdetails,w=!u.rowdetailshidden;p&&(s=this.visiblerows[r-1],s==u&&(u=s,r--),w&&(h=n(this.hittestinfo[r].visualrow).position().top+parseInt(this.table.css("top")),l=n(this.hittestinfo[r].visualrow).height(),i>=h&&i<=h+l||(r++,u=this.visiblerows[r],o=!0)))}return{index:r,row:u,details:o}}}},getcellatposition:function(t,i){var b=this.that,k=this.showheader?this.columnsheader.height()+2:0,v=this._groupsheader()?this.groupsheader.height():0,d=this.showtoolbar?this.toolbarheight:0,u,c,e,r,l,t,w,a;v+=d,u=this.host.coord(),this.hasTransform&&(u=n.jqx.utilities.getOffset(this.host));var o=t-u.left,s=i-k-u.top-v,y=this._hittestrow(o,s),f=y.row,g=y.index,h=this.table[0].rows[g];if(this.dataview&&this.dataview.records.length==0){for(c=this.table[0].rows,e=0,r=0;r<c.length;r++){if(s>=e&&s<e+this.rowsheight){h=c[r];break}e+=this.rowsheight}f={boundindex:r}}if(h==null)return!0;var nt=this.hScrollInstance,tt=nt.value,p=0,it=this.groupable?this.groups.length:0;for(r=0;r<h.cells.length;r++)if(l=parseInt(n(this.columnsrow[0].cells[r]).css("left")),t=l-tt,b.columns.records[r].pinned&&(t=l),w=t+n(this.columnsrow[0].cells[r]).width(),w>=o&&o>=t){p=r;break}return f!=null?(a=this._getcolumnat(p),{row:this.getboundindex(f),column:a.datafield,value:this.getcellvalue(this.getboundindex(f),a.datafield)}):null},_handlemousedown:function(t,i){var h,ft,c,et,nt,yt,p,v,ot,pt,l,it,w,e,s,b,o,f,k,r,st,ht,ct,lt,rt,ut,y,at,d;if(t.target==null||i.disabled||n(t.target).ischildof(this.columnsheader)||(t.which?h=t.which==3:t.button&&(h=t.button==2),t.which?ft=t.which==2:t.button&&(ft=t.button==1),ft)||this.showstatusbar&&(n(t.target).ischildof(this.statusbar)||t.target==this.statusbar[0])||!this.columnsheader)return!0;var vt=this.showheader?this.columnsheader.height()+2:0,g=this._groupsheader()?this.groupsheader.height():0,bt=this.showtoolbar?this.toolbarheight:0;if((g+=bt,c=this.host.coord(),this.hasTransform&&(c=n.jqx.utilities.getOffset(this.host),et=this._getBodyOffset(),c.left-=et.left,c.top-=et.top),o=parseInt(t.pageX),nt=parseInt(t.pageY),this.isTouchDevice()&&(yt=i.getTouches(t),p=yt[0],o=parseInt(p.pageX),nt=parseInt(p.pageY),i.touchmode==!0&&(o=parseInt(p._pageX),nt=parseInt(p._pageY))),v=o-c.left,ot=nt-vt-c.top-g,!this.pageable||this.autoheight||!this.gotopage||(pt=this.pager.coord().top-c.top-g-vt,!(ot>pt)))&&(l=this._hittestrow(v,ot),l)&&!l.details){var u=l.row,wt=l.index,tt=t.target.className,a=this.table[0].rows[wt];if(a==null)return i.editable&&i.begincelledit&&i.editcell&&i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),!0;for(i.mousecaptured=!0,i.mousecaptureposition={left:t.pageX,top:t.pageY-g,clickedrow:a},it=this.hScrollInstance,w=it.value,this.rtl&&this.hScrollBar.css("visibility")!="hidden"&&(w=it.max-it.value),e=-1,s=this.groupable?this.groups.length:0,this.rtl&&(this.vScrollBar[0].style.visibility!="hidden"&&(w-=this.scrollbarsize+4),this.hScrollBar[0].style.visibility=="hidden"&&(w=-parseInt(this.content.css("left")))),f=0;f<a.cells.length;f++)if((b=parseInt(n(this.columnsrow[0].cells[f]).css("left")),o=b-w,i.columns.records[f].pinned&&!i.rtl&&(o=b),r=this._getcolumnat(f),r==null||!r.hidden)&&(k=o+n(this.columnsrow[0].cells[f]).width(),k>=v&&v>=o)){e=f,i.mousecaptureposition.clickedcell=f;break}if(this.rtl&&this._haspinned)for(f=a.cells.length-1;f>=0;f--){if(!i.columns.records[f].pinned)break;var b=n(this.columnsrow[0].cells[f]).coord().left-this.host.coord().left,o=b,r=this._getcolumnat(f);if((r==null||!r.hidden)&&(k=o+n(this.columnsrow[0].cells[f]).width(),k>=v&&v>=o)){e=f,i.mousecaptureposition.clickedcell=f;break}}if(u!=null&&e>=0){if(this._raiseEvent(1,{rowindex:this.getboundindex(u),visibleindex:u.visibleindex,group:u.group,rightclick:h,originalEvent:t}),r=this._getcolumnat(e),st=this.getcellvalue(this.getboundindex(u),r.datafield),this.editable&&this.editcell&&r.datafield==this.editcell.column&&this.getboundindex(u)==this.editcell.row&&(this.mousecaptured=!1),this._raiseEvent(8,{rowindex:this.getboundindex(u),column:r?r.getcolumnproperties():null,datafield:r?r.datafield:null,columnindex:e,value:st,rightclick:h,originalEvent:t}),this.isTouchDevice())if(r.columntype=="checkbox"&&this.editable&&this._overlayElement){if(!this.editcell)return this._overlayElement.css("visibility","hidden"),this.editcell=this.getcell(wt,r.datafield),!0}else if(r.columntype=="button"&&this._overlayElement)return r.buttonclick&&r.buttonclick(a.cells[e].buttonrow,t),!0;if(ht=!1,this._lastmousedown!=null&&this._mousedown-this._lastmousedown<300&&this._clickedrowindex==this.getboundindex(u)&&(this._raiseEvent(22,{rowindex:this.getboundindex(u),visibleindex:u.visibleindex,group:u.group,rightclick:h,originalEvent:t}),this._clickedcolumn==r.datafield&&this._raiseEvent(23,{rowindex:this.getboundindex(u),column:r?r.getcolumnproperties():null,datafield:r?r.datafield:null,columnindex:e,value:st,rightclick:h,originalEvent:t}),ht=!0,this._clickedrowindex=-1,this._clickedcolumn=null,t.isPropagationStopped&&t.isPropagationStopped()))return!1;if(h)return!0;if(ht||(this._clickedrowindex=this.getboundindex(u),this._clickedcolumn=r.datafield),ct=n.jqx.utilities.getBrowser(),ct.browser=="msie"&&parseInt(ct.version)<=7&&(e==0&&this.rowdetails&&(tt="jqx-grid-group-collapse"),s>0&&e<=s&&(tt="jqx-grid-group-collapse")),tt.indexOf("jqx-grid-group-expand")!=-1||tt.indexOf("jqx-grid-group-collapse")!=-1)this.rtl?s>0&&e>a.cells.length-s-1&&this._togglegroupstate?this._togglegroupstate(u.bounddata,!0):e==a.cells.length-1-s&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(u.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0):s>0&&e<s&&this._togglegroupstate?this._togglegroupstate(u.bounddata,!0):e==s&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(u.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0);else if(u.boundindex!=-1&&(lt=this.selectedrowindexes.slice(0),rt=!1,i.selectionmode!="none"&&i.selectionmode!="checkbox"&&this._selectrowwithmouse&&((i.selectionmode=="multiplecellsadvanced"||i.selectionmode=="multiplecellsextended"||i.selectionmode=="multiplerowsextended"||i.selectionmode=="multiplerowsadvanced")&&(t.ctrlKey||t.shiftKey||(i.selectedrowindexes=[],i.selectedcells=[])),ut=!1,y=this.getboundindex(u),(i._oldselectedrow===y||i.selectionmode==="none")&&(ut=!0),i.selectionmode.indexOf("cell")==-1?(i.selectionmode!="singlerow"||i.selectedrowindex!=y&&i.selectionmode=="singlerow")&&(this._applyrowselection(y,!0,!1,null,r.datafield),this._selectrowwithmouse(i,l,lt,r.datafield,t.ctrlKey,t.shiftKey)):r.datafield!=null&&(this._selectrowwithmouse(i,l,lt,r.datafield,t.ctrlKey,t.shiftKey),this._applycellselection(y,r.datafield,!0,!1)),i._oldselectedcell&&i._oldselectedcell.datafield==i.selectedcell.datafield&&i._oldselectedcell.rowindex==i.selectedcell.rowindex&&(rt=!0),i._oldselectedcell=i.selectedcell,i._oldselectedrow=y),i.autosavestate&&i.savestate&&i.savestate(),i.editable&&i.begincelledit))return t.isPropagationStopped&&t.isPropagationStopped()?!1:(i.editmode=="selectedrow"?ut&&!i.editcell?r.columntype!=="checkbox"&&(d=i.beginrowedit(this.getboundindex(u))):i.editcell&&!ut&&i.selectionmode!="none"&&(d=i.endrowedit(i.editcell.row)):(at=i.editmode=="click"||rt&&i.editmode=="selectedcell",i.selectionmode.indexOf("cell")==-1&&i.editmode!="dblclick"&&(at=!0),at&&u.boundindex!=undefined&&r.editable&&(d=i.begincelledit(this.getboundindex(u),r.datafield,r.defaulteditorvalue)),i.selectionmode.indexOf("cell")!=-1&&i.editmode=="selectedcell"&&!rt&&i.editcell&&i.endcelledit(i.editcell.row,i.editcell.column,!1,!0)),!0)}return!0}},_columnPropertyChanged:function(){},_rowPropertyChanged:function(){},_serializeObject:function(t){if(t==null)return"";var i="";return n.each(t,function(n){var r=this,t;n>0&&(i+=", "),i+="[",t=0;for(obj in r)t>0&&(i+=", "),i+="{"+obj+":"+r[obj]+"}",t++;i+="]"}),i},propertyChangedHandler:function(t,i,r,u){var f;if(this.isInitialized!=undefined&&this.isInitialized!=!1){i=i.toLowerCase();switch(i){case"enablebrowserselection":t.showfilterrow||(t.showstatusbar||t.showtoolbar||t.host.addClass("jqx-disableselect"),t.content.addClass("jqx-disableselect")),t.enablebrowserselection&&(t.content.removeClass("jqx-disableselect"),t.host.removeClass("jqx-disableselect"));break;case"columnsheight":(t.columnsheight!=25||t.columngroups)&&t._measureElement("column"),t._render(!0,!0,!0,!1,!1);break;case"rowsheight":u!=r&&(t.rowsheight!=25&&t._measureElement("cell"),t.virtualsizeinfo=null,t.rendergridcontent(!0,!1),t.refresh());break;case"scrollMode":t.vScrollInstance.thumbStep=t.rowsheight;break;case"showdefaultloadelement":t._builddataloadelement();break;case"showfiltermenuitems":case"showsortmenuitems":case"showgroupmenuitems":case"filtermode":t._initmenu();break;case"touchmode":r!=u&&(t._removeHandlers(),t.touchDevice=null,t.vScrollBar.jqxScrollBar({touchMode:u}),t.hScrollBar.jqxScrollBar({touchMode:u}),t._updateTouchScrolling(),t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._addHandlers());break;case"autoshowcolumnsmenubutton":r!=u&&t._rendercolumnheaders();break;case"rendergridrows":r!=u&&t.updatebounddata();break;case"editmode":r!=u&&(t._removeHandlers(),t._addHandlers());break;case"source":t.virtualsizeinfo=null,t.showfilterrow&&t.filterable&&t.filterrow?(t.clearfilters&&t.clearfilters(!1),t.filterrow.remove(),t._filterrowcache=[],t.filterrow=null):t.filterable&&t.clearfilters&&t.clearfilters(!1),t.groupable&&(t.dataview.groups=[],t.groups=[]),t.pageable&&(t.pagenum=0,t.dataview.pagenum=0),t.sortable&&(t.sortcolumn=null,t.sortdirection="",t.dataview.sortfielddirection="",t.dataview.clearsortdata()),t.updatebounddata(),t.virtualmode&&!t._loading&&(t.loadondemand=!0,t._renderrows(t.virtualsizeinfo));break;case"horizontalscrollbarstep":case"verticalscrollbarstep":case"horizontalscrollbarlargestep":case"verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep}),this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep});break;case"closeablegroups":t._initgroupsheader&&t._initgroupsheader();break;case"showgroupsheader":r!=u&&t.rendergridcontent();break;case"theme":u!=r&&(t.pager&&(t.pager.removeClass(),t.pager.addClass(t.toTP("jqx-grid-pager")),t.pager.addClass(t.toTP("jqx-widget-header")),t.pageable&&t._updatepagertheme&&t._updatepagertheme()),t.groupsheader&&(t.groupsheader.removeClass(),t.groupsheader.addClass(t.toTP("jqx-grid-groups-header")),t.groupsheader.addClass(t.toTP("jqx-widget-header"))),t.toolbar.removeClass(),t.toolbar.addClass(t.toTP("jqx-grid-toolbar")),t.toolbar.addClass(t.toTP("jqx-widget-header")),t.statusbar.removeClass(),t.statusbar.addClass(t.toTP("jqx-grid-statusbar")),t.statusbar.addClass(t.toTP("jqx-widget-content")),t.vScrollBar.jqxScrollBar({theme:t.theme}),t.hScrollBar.jqxScrollBar({theme:t.theme}),t.host.removeClass(),t.host.addClass(t.toTP("jqx-grid")),t.host.addClass(t.toTP("jqx-reset")),t.host.addClass(t.toTP("jqx-rc-all")),t.host.addClass(t.toTP("jqx-widget")),t.host.addClass(t.toTP("jqx-widget-content")),t.bottomRight.removeClass(),t.bottomRight.addClass(t.toTP("jqx-grid-bottomright")),t.toolbar.addClass(t.toTP("jqx-grid-toolbar")),t.toolbar.addClass(t.toTP("jqx-widget-header")),t.statusbar.addClass(t.toTP("jqx-grid-statusbar")),t.statusbar.addClass(t.toTP("jqx-widget-header")),t.render());break;case"showtoolbar":case"toolbarheight":r!=u&&(t._arrange(),t.refresh());break;case"showstatusbar":r!=u&&(t.statusbar&&(u?t.statusbar.show():t.statusbar.hide()),t._arrange(),t.refresh());break;case"statusbarheight":r!=u&&(t._arrange(),t.refresh());break;case"filterable":case"showfilterrow":r!=u&&t.render();break;case"autoshowfiltericon":case"showfiltercolumnbackground":case"showpinnedcolumnbackground":case"showsortcolumnbackground":r!=u&&t.rendergridcontent();break;case"showrowdetailscolumn":r!=u&&t.render();break;case"scrollbarsize":r!=u&&t._arrange();break;case"width":case"height":r!=u&&(t._updatesize(!0,!0),t._resizeWindow(),t.virtualmode&&!t._loading&&t.vScrollInstance.setPosition(0));break;case"altrows":case"altstart":case"altstep":r!=u&&t._renderrows(t.virtualsizeinfo);break;case"groupsheaderheight":r!=u&&(t._arrange(),t._initgroupsheader&&t._initgroupsheader());break;case"pagerheight":r!=u&&t._initpager();break;case"selectedrowindex":t.selectrow(u);break;case"selectionmode":r!=u&&(u=="none"&&(t.selectedrowindexes=[],t.selectedcells=[],t.selectedrowindex=-1),t._renderrows(t.virtualsizeinfo));break;case"showheader":u?t.columnsheader.css("display","block"):t.columnsheader.css("display","none");break;case"virtualmode":r!=u&&(t.dataview.virtualmode=t.virtualmode,t.dataview.refresh(!1),t._render(!1,!1,!1));break;case"columnsmenu":r!=u&&t.render();break;case"columngroups":t._render(!0,!0,!0,!1,!1);break;case"columns":t._serializeObject(t._cachedcolumns)!==t._serializeObject(u)?(t._columns=null,t._filterrowcache=[],t.render(),t._cachedcolumns=t.columns):t._initializeColumns();break;case"autoheight":r!=u&&t._render(!1,!1,!0);break;case"pagermode":case"pagerbuttonscount":case"pagesizeoptions":case"pageable":case"pagesize":if(r!=u){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);if(!t.host.jqxDropDownList||!t.host.jqxListBox){t._testmodules();return}if(t._initpager){if(i!="pageable"&&typeof u=="string"){f="The expected value type is: Int.",i!="pagesize"&&(f="The expected value type is: Array of Int values.");throw new Error("Invalid Value for: "+i+". "+f);}t.dataview.pageable=t.pageable,t.dataview.pagenum=0,t.dataview.pagesize=t._getpagesize(),t.virtualmode&&t.updatebounddata(),t.dataview.refresh(!0),t._initpager(),i=="pagesizeoptions"&&u!=null&&u.length>0&&(t.pagesize=parseInt(u[0]),t.dataview.pagesize=parseInt(u[0]),t.prerenderrequired=!0,t._requiresupdate=!0,t.dataview.pagenum=-1,t.gotopage(0))}t._render(!1,!1,!1)}break;case"groups":t._serializeObject(r)!==t._serializeObject(u)&&(t.dataview.groups=u,t._refreshdataview(),t._render(!0,!0,!0,!1));break;case"groupable":r!=u&&(t.dataview.groupable=t.groupable,t.dataview.pagenum=0,t.dataview.refresh(!1),t._render(!1,!1,!0));break;case"renderstatusbar":u!=null&&t.renderstatusbar(t.statusbar);break;case"rendertoolbar":u!=null&&t.rendertoolbar(t.toolbar);break;case"disabled":u?t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")):t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),n.jqx.aria(t,"aria-disabled",t.disabled),t.pageable&&t.pagerrightbutton&&(t.pagerrightbutton.jqxButton({disabled:u}),t.pagerleftbutton.jqxButton({disabled:u}),t.pagershowrowscombo.jqxDropDownList({disabled:u}),t.pagergotoinput.attr("disabled",u)),t.vScrollBar.jqxScrollBar({disabled:u}),t.hScrollBar.jqxScrollBar({disabled:u})}}}}),n.jqx.collection=function(n){return this.records=[],this.owner=n,this.updating=!1,this.beginupdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this._raiseEvent=function(){},this.clear=function(){this.records=[]},this.replace=function(n,t){this.records[n]=t,this.updating||this._raiseEvent({type:"replace",element:t})},this.isempty=function(n){return this.records[n]==undefined?!0:!1},this.initialize=function(n){n<1&&(n=1),this.records[n-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(n){return this.records.indexOf(n)},this.add=function(n){return n==null?!1:(this.records[this.records.length]=n,this.updating||this._raiseEvent({type:"add",element:n}),!0)},this.insertAt=function(n,t){return n==null||n==undefined?!1:t==null?!1:n>=0?n<this.records.length?(this.records.splice(n,0,t),this.updating||this._raiseEvent({type:"insert",index:n,element:t}),!0):this.add(t):!1},this.remove=function(n){if(n==null||n==undefined)return!1;var t=this.records.indexOf(n);return t!=-1?(this.records.splice(t,1),this.updating||this._raiseEvent({type:"remove",element:n}),!0):!1},this.removeAt=function(n){if(n==null||n==undefined||n<0)return!1;if(n<this.records.length){var t=this.records[n];return this.records.splice(n,1),this.updating||this._raiseEvent({type:"removeAt",index:n,element:t}),!0}return!1},this},n.jqx.dataview=function(){return this.self=this,this.grid=null,this.uniqueId="id",this.records=[],this.rows=[],this.columns=[],this.groups=[],this.filters=[],this.updated=null,this.update=null,this.suspend=!1,this.pagesize=0,this.pagenum=0,this.totalrows=0,this.totalrecords=0,this.groupable=!0,this.loadedrecords=[],this.loadedrootgroups=[],this.loadedgroups=[],this.loadedgroupsByKey=[],this.virtualmode=!0,this._cachegrouppages=[],this.source=null,this.changedrecords=[],this.rowschangecallback=null,this.that=this,this.destroy=function(){delete this.self,delete this.grid,delete this.uniqueId,delete this.records,delete this.rows,delete this.columns,delete this.groups,delete this.filters,delete this.updated,delete this.update,delete this.suspend,delete this.pagesize,delete this.pagenum,delete this.totalrows,delete this.totalrecords,delete this.groupable,delete this.loadedrecords,delete this.loadedrootgroups,delete this.loadedgroups,delete this.loadedgroupsByKey,delete this.virtualmode,delete this._cachegrouppages,delete this.source,delete this.changedrecords,delete this.rowschangecallback,delete this.that},this.suspendupdate=function(){this.suspend=!0},this.isupdating=function(){return this.suspend},this.resumeupdate=function(n){this.suspend=!1,n==undefined&&(n=!0),this.refresh(n)},this.getrecords=function(){return this.records},this.clearrecords=function(){this.recordids=[]},this.databind=function(t,i){var d=t._source?!0:!1,u=null,w,l,r,e,a,y,p,o,k,h;d?(u=t,t=t._source):u=new n.jqx.dataAdapter(t,{autoBind:!1}),w=function(n){u.recordids=[],u.records=[],u.cachedrecords=[],u.originaldata=[],u._options.virtualmode=n.virtualmode,u._options.totalrecords=n.totalrecords,u._options.originaldata=n.originaldata,u._options.recordids=n.recordids,u._options.cachedrecords=[],u._options.pagenum=n.pagenum,u._options.pageable=n.pageable,t.type!=undefined&&(u._options.type=t.type),t.formatdata!=undefined&&(u._options.formatData=t.formatdata),t.contenttype!=undefined&&(u._options.contentType=t.contenttype),t.async!=undefined&&(u._options.async=t.async),t.updaterow!=undefined&&(u._options.updaterow=t.updaterow),t.addrow!=undefined&&(u._options.addrow=t.addrow),t.deleterow!=undefined&&(u._options.deleterow=t.deleterow),n.pagesize==0&&(n.pagesize=10),u._options.pagesize=n.pagesize},l=function(i){var r,f,e,o,c,s,h;if(i.totalrecords=u.totalrecords,i.virtualmode){if(r={startindex:i.pagenum*i.pagesize,endindex:i.pagenum*i.pagesize+i.pagesize},t.recordstartindex&&(r.startindex=t.recordstartindex),t.recordendindex?r.endindex=t.recordendindex:i.grid.pageable||(r.endindex=r.startindex+100,i.grid.autoheight&&(r.endindex=r.startindex+i.totalrecords)),r.data=u.records,i.grid.rendergridrows&&i.totalrecords>0&&(f=0,t.records=i.grid.rendergridrows(r),t.records&&!t.records[r.startindex]&&(e=[],o=r.startindex,n.each(t.records,function(){e[o]=this,o++,f++}),t.records=e),f==0&&t.records&&n.each(t.records,function(){f++}),f>0&&f<r.endindex-r.startindex))for(c=t.records[0],s=0;s<r.endindex-r.startindex-f;s++){h={};for(obj in c)h[obj]="";t.records.push&&t.records.push(h)}t.records&&i.totalrecords!=0||(t.records=[]),i.originaldata=t.records,i.records=t.records,i.cachedrecords=t.records}else i.originaldata=u.originaldata,i.records=u.records,i.recordids=u.recordids,i.cachedrecords=u.cachedrecords},w(this),this.source=t,i!==undefined&&(uniqueId=i),r=this.that;switch(t.datatype){case"local":case"array":default:t.localdata==null&&(t.localdata=[]),t.localdata!=null&&(u.unbindBindingUpdate(r.grid.element.id),u.dataBind(),h=function(i){var f,e;(i==undefined||i==""||(f=u._changedrecords[0],f&&n.each(u._changedrecords,function(n){var e=this.index,f=this.record,t;r.grid._updateFromAdapter=!0;switch(i){case"update":t=r.grid.getrowid(e),n==u._changedrecords.length-1?r.grid.updaterow(t,f):r.grid.updaterow(t,f,!1),r.grid._updateFromAdapter=!1;return;case"add":r.grid.addrow(null,f),r.grid._updateFromAdapter=!1;return;case"remove":t=r.grid.getrowid(e),r.grid.deleterow(t),r.grid._updateFromAdapter=!1;return}}),i!="update"))&&(e=r.totalrecords,l(r,i),i=="updateData"?(r.refresh(),r.grid._updateGridData()):(t.recordstartindex&&this.virtualmode?r.updateview(t.recordstartindex,t.recordstartindex+r.pagesize):r.refresh(),r.update(e!=r.totalrecords)))},h(),u.bindBindingUpdate(r.grid.element.id,h));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(t.localdata!=null){u.unbindBindingUpdate(r.grid.element.id),u.dataBind(),h=function(n){var i=r.totalrecords;l(r),n=="updateData"?(r.refresh(),r.grid._updateGridData()):(t.recordstartindex?r.updateview(t.recordstartindex,t.recordstartindex+r.pagesize):r.refresh(),r.update(i!=r.totalrecords))},h(),u.bindBindingUpdate(r.grid.element.id,h);return}var c=0,f={};for(o=0;o<this.filters.length;o++){var v=this.filters[o].datafield,b=this.filters[o].filter,s=b.getfilters();for(f[v+"operator"]=b.operator,e=0;e<s.length;e++)s[e].datafield=v,a=s[e].value,s[e].type=="datefilter"?s[e].value&&s[e].value.toLocaleString?(y=this.grid.getcolumn(s[e].datafield),y.cellsformat?(p=this.grid.source.formatDate(s[e].value,y.cellsformat,this.grid.gridlocalization),f["filtervalue"+c]=p?p:s[e].value.toLocaleString()):f["filtervalue"+c]=a.toString()):f["filtervalue"+c]=a.toString():f["filtervalue"+c]=a.toString(),f["filtercondition"+c]=s[e].condition,f["filteroperator"+c]=s[e].operator,f["filterdatafield"+c]=v,c++}for(f.filterscount=c,f.groupscount=r.groups.length,o=0;o<r.groups.length;o++)f["group"+o]=r.groups[o];t.recordstartindex==undefined&&(t.recordstartindex=0),(t.recordendindex==undefined||t.recordendindex==0)&&(r.grid.height&&r.grid.height.toString().indexOf("%")==-1?(t.recordendindex=parseInt(r.grid.height)/r.grid.rowsheight,t.recordendindex+=2):t.recordendindex=n(window).height()/r.grid.rowsheight,this.pageable&&(t.recordendindex=this.pagesize)),n.extend(f,{sortdatafield:r.sortfield,sortorder:r.sortfielddirection,pagenum:r.pagenum,pagesize:r.grid.pagesize,recordstartindex:t.recordstartindex,recordendindex:t.recordendindex}),k=u._options.data,u._options.data?n.extend(u._options.data,f):(t.data&&n.extend(f,t.data),u._options.data=f),h=function(){var u=n.jqx.browser.msie&&n.jqx.browser.version<9,i=function(){var n=r.totalrecords;l(r),t.recordstartindex?r.updateview(t.recordstartindex,t.recordstartindex+r.pagesize):r.refresh(),r.update(n!=r.totalrecords)};if(u)try{i()}catch(f){}else i()},u.unbindDownloadComplete(r.grid.element.id),u.bindDownloadComplete(r.grid.element.id,h),u.dataBind(),u._options.data=k}},this.getid=function(t,i,r){if(n(t,i).length>0)return n(t,i).text();if(t&&t.toString().length>0){var u=n(i).attr(t);if(u!=null&&u.toString().length>0)return u}return r},this.getvaluebytype=function(t,i){var u=t,r,t;return i.type=="date"?(r=new Date(t),t=r.toString()=="NaN"||r.toString()=="Invalid Date"?n.jqx.dataFormat?n.jqx.dataFormat.tryparsedate(t):r:r,t==null&&(t=u)):i.type=="float"?(t=parseFloat(t),isNaN(t)&&(t=u)):i.type=="int"?(t=parseInt(t),isNaN(t)&&(t=u)):i.type=="bool"&&(t!=null&&(t.toLowerCase()=="false"?t=!1:t.toLowerCase()=="true"&&(t=!0)),t=t==1?!0:t==0?!1:""),t},this.setpaging=function(n){n.pageSize!=undefined&&(this.pagesize=n.pageSize),n.pageNum!=undefined&&(this.pagenum=Math.min(n.pageNum,Math.ceil(this.totalrows/this.pagesize))),this.refresh()},this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}},this._clearcaches=function(){this.sortcache={},this.sortdata=null,this.changedrecords=[],this.records=[],this.rows=[],this.cacheddata=[],this.originaldata=[],this.bounditems=[],this.loadedrecords=[],this.loadedrootgroups=[],this.loadedgroups=[],this.loadedgroupsByKey=[],this._cachegrouppages=[],this.recordsbyid=[],this.cachedrecords=[],this.recordids=[]},this.addfilter=function(n,t){for(var r=-1,i=0;i<this.filters.length;i++)if(this.filters[i].datafield==n){r=i;break}r==-1?this.filters[this.filters.length]={filter:t,datafield:n}:this.filters[r]={filter:t,datafield:n}},this.removefilter=function(n){for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==n){this.filters.splice(t,1);break}},this.getItemFromIndex=function(n){return this.records[n]},this.updaterow=function(n,t,i){var h=this.filters&&this.filters.length>0,u,r,f,s,o;if(h||t==undefined||n==undefined){if(this.filters&&this.filters.length>0){var e=this.cachedrecords,u=null,r=-1;for(f=0;f<e.length;f++)if(e[f].uid==n){u=e[f],r=f;break}if(u){s=this.that;for(o in t)s.cachedrecords[r][o]=t[o];return(i==!0||i==undefined)&&this.refresh(),!0}}}else return(t.uid=n,t[this.source.id]||(t[this.source.id]=t.uid),u=this.recordsbyid["id"+n],r=this.records.indexOf(u),r==-1)?!1:(this.records[r]=t,this.cachedrecords&&(this.cachedrecords[r]=t),(i==!0||i==undefined)&&this.refresh(),this.changedrecords[t.uid]={Type:"Update",OldData:u,Data:t},!0);return!1},this.addrow=function(n,t,i,r){var u,f;if(t!=undefined){if(n)t.uid=n;else for(t.uid=this.getid(this.source.id,t,this.totalrecords),u=this.recordsbyid["id"+t.uid];u!=null;)f=Math.floor(Math.random()*1e4).toString(),t.uid=f,u=this.recordsbyid["id"+f];return t[this.source.id]||this.source.id!=undefined&&(t[this.source.id]=t.uid),i=="last"?this.records.push(t):typeof i=="number"&&isFinite(i)?this.records.splice(i,0,t):this.records.splice(0,0,t),this.filters&&this.filters.length>0&&(i=="last"?this.cachedrecords.push(t):typeof i=="number"&&isFinite(i)?this.cachedrecords.splice(i,0,t):this.cachedrecords.splice(0,0,t)),this.totalrecords++,this.virtualmode&&(this.source.totalrecords=this.totalrecords),(r==!0||r==undefined)&&this.refresh(),this.changedrecords[t.uid]={Type:"New",Data:t},!0}return!1},this.deleterow=function(n,t){var e,u,i,r;if(n!=undefined){if(e=this.filters&&this.filters.length>0,this.recordsbyid["id"+n]&&!e)return u=this.recordsbyid["id"+n],i=this.records.indexOf(u),this.changedrecords[n]={Type:"Delete",Data:this.records[i]},this.records.splice(i,1),this.totalrecords--,this.virtualmode&&(this.source.totalrecords=this.totalrecords),(t==!0||t==undefined)&&this.refresh(),!0;if(this.filters&&this.filters.length>0){var f=this.cachedrecords,u=null,i=-1;for(r=0;r<f.length;r++)if(f[r].uid==n){u=f[r],i=r;break}if(u)return this.cachedrecords.splice(i,1),(t==!0||t==undefined)&&(this.totalrecords=0,this.records=this.cachedrecords,this.refresh()),!0}return!1}return!1},this.reload=function(t,i,r,u,f,e,o){var b=this.that,l=[],k=t,h=i,v=r,y=u,c=h.length,p=0,s=0,w,e,o,a;if(this.columns=[],this.bounditems=[],this.loadedrecords=[],this.loadedrootgroups=[],this.loadedgroups=[],this.loadedgroupsByKey=[],this._cachegrouppages=[],this.recordsbyid={},this.totalrecords==0&&(Object.size=function(n){var t=0,i;for(i in n)n.hasOwnProperty(i)&&t++;return t},w=Object.size(k),this.totalrecords=w,n.each(this.records,function(){var t=this,i=0;return n.each(t,function(n){b.columns[i++]=n}),!1})),this.virtualmode){if(this.pageable){this.updateview();return}if(e=0,this.groupable)o=this.totalrecords;else{this.updateview();return}}else e=0,o=this.totalrecords;return this.groupable&&this.groups.length>0&&this.loadgrouprecords?(a=e,a=this.loadgrouprecords(0,e,o,v,s,y,h,c,l)):p=this.loadflatrecords(e,o,v,s,y,h,c,l),c>s&&h.splice(s,c-s),this.totalrows=this.groups.length>0&&this.groupable?a:p,l},this.loadflatrecords=function(t,i,r,u,f,e,o,s){var c=this.that,a=t,v=t,l,h,p;i=Math.min(i,this.totalrecords);var w=this.sortdata!=null,b=this.source.id&&(this.source.datatype=="local"||this.source.datatype=="array"||this.source.datatype==""),y=w?this.sortdata:this.records;for(l=t;l<i;l++)h={},w?(h=n.extend({},y[l].value),id=h[c.uniqueId],h.boundindex=y[l].index,h.uid==undefined&&(h.uid=c.getid(c.source.id,h,h.boundindex)),c.recordsbyid["id"+h.uid]=y[l].value,c.loadedrecords[a]=h,h.uniqueid=c.generatekey(),c.bounditems[h.boundindex]=h):(h=n.extend({},y[l]),id=h[c.uniqueId],h.boundindex=a,c.loadedrecords[a]=h,h.uid==undefined&&(h.uid=c.getid(c.source.id,h,a)),c.recordsbyid["id"+h.uid]=y[l],h.uniqueid=c.generatekey(),c.bounditems[this.bounditems.length]=h),(u>=o||id!=e[u][c.uniqueId]||f&&f[id])&&(s[s.length]=u),e[u]=h,u++,h.visibleindex=v,v++,a++;return c.grid.summaryrows&&(p=a,n.each(c.grid.summaryrows,function(){var t=n.extend({},this);t.boundindex=i++,c.loadedrecords[p]=t,t.uniqueid=c.generatekey(),c.bounditems[c.bounditems.length]=t,e[u]=t,u++,t.visibleindex=v,v++,p++})),v},this.updateview=function(n,t){var v=this.that,c=this.pagesize*this.pagenum,f=0,i=[],e=this.filters,l=this.updated,o=i.length,a,s,y,h,r,u;if(this.pageable){if(this.virtualmode)if(this.groupable&&this.groups.length!=0){if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){if(this._cachegrouppages[this.pagenum+"_"+this.pagesize]!=undefined){this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize],this.totalrows=this.rows.length;return}a=this.pagesize*(1+this.pagenum),a>this.totalrecords&&(a=this.totalrecords),this.loadgrouprecords(0,this.pagesize*this.pagenum,a,e,f,l,i,o,[]),this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows,this.totalrows=this.rows.length;return}}else this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),e,f,l,i,o,[]),this.totalrows=i.length}else if(this.virtualmode&&(!this.groupable||this.groups.length==0)&&(s=this.pagesize,s==0&&(s=Math.min(100,this.totalrecords)),y=s*this.pagenum,this.loadedrecords.length==0&&(y=0),n!=null&&t!=null?this.loadflatrecords(n,t,e,f,l,i,o,[]):this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),e,f,l,i,o,[]),this.totalrows=this.loadedrecords.length,this.rows=i,i.length>=s))return;if(this.groupable&&this.pageable&&this.groups.length>0&&this._updategroupsinpage)i=this._updategroupsinpage(v,e,c,f,o,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum));else for(r=this.pagesize*this.pagenum;r<this.pagesize*(1+this.pagenum);r++)(u=r<this.loadedrecords.length?this.loadedrecords[r]:null,u!=null)&&((!this.pagesize||c>=this.pagesize*this.pagenum&&c<=this.pagesize*(this.pagenum+1))&&(i[f]=u,f++),c++);if((i.length==0||i.length<this.pagesize)&&!this.pageable&&this.virtualmode)for(f=i.length,h=i.length,r=this.pagesize*this.pagenum;r<this.pagesize*(1+this.pagenum)-h;r++)u={},u.boundindex=r+h,u.visibleindex=r+h,u.uniqueid=v.generatekey(),u.empty=!0,v.bounditems[r+h]=u,i[f]=u,f++;this.rows=i},this.generatekey=function(){var n=function(){return(1+Math.random())*16|0};return""+n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,!0)},this.refresh=function(t){var o,y,w,u,l,e,s,f,i,h,v;if(!this.suspend){if(t==undefined&&(t=!0),o=this.rows.length,y=this.totalrows,this.filters.length>0&&!this.virtualmode){var c="",p=this.cachedrecords.length,r=[];if(this.totalrecords=0,f=this.cachedrecords,this._dataIndexToBoundIndex=[],w=this.filters.length,this.source!=null&&this.source.filter!=undefined&&this.source.localdata!=undefined)r=this.source.filter(this.filters,f,p),r==undefined&&(r=[]),this.records=r;else if(this.source.filter==null||this.source.filter==undefined){for(u=0;u<p;u++){for(l=f[u],e=undefined,s=0;s<w;s++){var c=this.filters[s].filter,b=l[this.filters[s].datafield],a=c.evaluate(b);e=e==undefined?a:c.operator=="or"?e||a:e&&a}e?(r[r.length]=n.extend({dataindex:u},l),this._dataIndexToBoundIndex[u]={boundindex:r.length-1}):this._dataIndexToBoundIndex[u]=null}this.records=r}if(this.sortdata&&(i=this.sortfield,this.sortcache[i])){this.sortdata=null,h=this.sortcache[i].direction,this.sortcache[i]=null,this.sortby(this.sortfield,h);return}}else if(this.filters.length==0&&!this.virtualmode&&this.cachedrecords&&(this.totalrecords=0,f=this.cachedrecords,this.records=f,this.sortdata&&(i=this.sortfield,this.sortcache[i]))){this.sortdata=null,h=this.sortcache[i].direction,this.sortcache[i]=null,this.sortby(this.sortfield,h);return}v=this.reload(this.records,this.rows,this.filter,this.updated,t),this.updated=null,this.rowschangecallback!=null&&(y!=totalrows&&this.rowschangecallback({type:"PagingChanged",data:getpagingdetails()}),o!=rows.length&&this.rowschangecallback({type:"RowsCountChanged",data:{previous:o,current:rows.length}}),(v.length>0||o!=rows.length)&&this.rowschangecallback({type:"RowsChanged",data:{previous:o,current:rows.length,diff:v}}))}},this}})(jQuery);
//# sourceMappingURL=jqxgrid.min.js.map