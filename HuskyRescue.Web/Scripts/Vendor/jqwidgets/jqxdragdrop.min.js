(function(n){n.jqx.jqxWidget("jqxDragDrop","",{}),n.extend(n.jqx._jqxDragDrop.prototype,{defineInstance:function(){this.restricter="document",this.handle=!1,this.feedback="clone",this.opacity=.6,this.revert=!1,this.revertDuration=400,this.distance=5,this.disabled=!1,this.tolerance="intersect",this.data=null,this.dropAction="default",this.dragZIndex=999999,this.appendTo="parent",this.cursor="move",this.onDragEnd=null,this.onDrag=null,this.onDragStart=null,this.onTargetDrop=null,this.onDropTargetEnter=null,this.onDropTargetLeave=null,this.initFeedback=null,this.dropTarget=null,this.isDestroyed=!1,this.triggerEvents=!0,this._touchEvents={mousedown:n.jqx.mobile.getTouchEventName("touchstart"),click:n.jqx.mobile.getTouchEventName("touchstart"),mouseup:n.jqx.mobile.getTouchEventName("touchend"),mousemove:n.jqx.mobile.getTouchEventName("touchmove"),mouseenter:"mouseenter",mouseleave:"mouseleave"},this._restricter=null,this._zIndexBackup=0,this._targetEnterFired=!1,this._oldOpacity=1,this._feedbackType,this._isTouchDevice=!1,this._events=["dragStart","dragEnd","dragging","dropTargetEnter","dropTargetLeave"]},createInstance:function(){this._createDragDrop()},_createDragDrop:function(){var i=n.data(document.body,"jqx-draggables")||1,r,t;this.appendTo=this._getParent(),this._isTouchDevice=n.jqx.mobile.isTouchDevice(),/(static|relative)/.test(this.host.css("position"))&&(this.feedback&&this.feedback!=="original"||(r=this._getRelativeOffset(this.host),t=this.appendTo.offset(),this.appendTo.css("position")!="static"&&(t={left:0,top:0}),this.element.style.position="absolute",this.element.style.left=t.left+r.left+"px",this.element.style.top=t.top+r.top+"px")),this._validateProperties(),this._idHandler(i),this.disabled&&this.disable(),typeof this.dropTarget=="string"&&(this.dropTarget=n(this.dropTarget)),this._refresh(),i+=1,n.data(document.body,"jqx-draggables",i),this.host.addClass("jqx-draggable"),this.disabled||this.host.css("cursor",this.cursor)},_getParent:function(){var t=this.appendTo;if(typeof this.appendTo=="string")switch(this.appendTo){case"parent":t=this.host.parent();break;case"document":t=n(document);break;case"body":t=n(document.body);break;default:t=n(this.appendTo)}return t},_idHandler:function(n){if(!this.element.id){var t="jqx-draggable-"+n;this.element.id=t}},_refresh:function(){this._removeEventHandlers(),this._addEventHandlers()},_getEvent:function(n){return this._isTouchDevice?this._touchEvents[n]:n},_validateProperties:function(){this._feedbackType=this.feedback==="clone"?"clone":"original",this.dropAction!=="default"&&(this.dropAction="nothing")},_removeEventHandlers:function(){this.removeHandler(this.host,"dragstart"),this.removeHandler(this.host,this._getEvent("mousedown")+".draggable."+this.element.id,this._mouseDown),this.removeHandler(n(document),this._getEvent("mousemove")+".draggable."+this.element.id,this._mouseMove),this.removeHandler(n(document),this._getEvent("mouseup")+".draggable."+this.element.id,this._mouseUp)},_addEventHandlers:function(){var r=this,t,i;this.addHandler(this.host,"dragstart",function(t){var i=n.jqx.mobile.isTouchDevice();if(!i)return t.preventDefault(),!1}),this.addHandler(this.host,this._getEvent("mousedown")+".draggable."+this.element.id,this._mouseDown,{self:this}),this.addHandler(n(document),this._getEvent("mousemove")+".draggable."+this.element.id,this._mouseMove,{self:this}),this.addHandler(n(document),this._getEvent("mouseup")+".draggable."+this.element.id,this._mouseUp,{self:this}),(document.referrer!=""||window.frameElement)&&window.top!=null&&(t="",window.parent&&document.referrer&&(t=document.referrer),t.indexOf(document.location.host)!=-1&&(i=function(){r._mouseUp(r)},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",i,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",i)))},_mouseDown:function(n){var t=n.data.self,r=t._getMouseCoordinates(n),u=t._mouseCapture(n),i;if((t._originalPageX=r.left,t._originalPageY=r.top,i=!1,t._mouseStarted||(t._mouseUp(n),i=!0),u&&(t._mouseDownEvent=n),t._isTouchDevice)||n.which!==1||!u)return!0;n.preventDefault(),i==!0},_mouseMove:function(n){var t=n.data.self;return t._mouseStarted?(t._mouseDrag(n),n.preventDefault&&n.preventDefault(),!1):(t._mouseDownEvent&&t._isMovedDistance(n)&&(t._mouseStarted=t._mouseStart(t._mouseDownEvent,n)?!0:!1,t._mouseStarted?t._mouseDrag(n):t._mouseUp(n)),!t._mouseStarted)},_mouseUp:function(n){var t;return t=n.data&&n.data.self?n.data.self:this,t._mouseDownEvent=!1,t._movedDistance=!1,t._mouseStarted&&(t._mouseStarted=!1,t._mouseStop(n)),t.feedback&&t.feedback[0]&&t._feedbackType!=="original"&&typeof t.feedback.remove=="function"&&!t.revert&&t.feedback.remove(),t._isTouchDevice?void 0:!1},cancelDrag:function(){var n=this.revertDuration;this.revertDuration=0,this._mouseDownEvent=!1,this._movedDistance=!1,this._mouseStarted=!1,this._mouseStop(),this.feedback.remove(),this.revertDuration=n},_isMovedDistance:function(n){var t=this._getMouseCoordinates(n);return this._movedDistance?!0:t.left>=this._originalPageX+this.distance||t.left<=this._originalPageX-this.distance||t.top>=this._originalPageY+this.distance||t.top<=this._originalPageY-this.distance?(this._movedDistance=!0,!0):!1},_getMouseCoordinates:function(t){if(this._isTouchDevice){var i=n.jqx.position(t);return{left:i.left,top:i.top}}return{left:t.pageX,top:t.pageY}},destroy:function(){return this.host.removeData("draggable").off(".draggable").removeClass("jqx-draggable jqx-draggable-dragging jqx-draggable-disabled"),this._removeEventHandlers(),this.isDestroyed=!0,this},_disableSelection:function(t){t.each(function(){n(this).attr("unselectable","on").css({"-ms-user-select":"none","-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})},_enableSelection:function(t){t.each(function(){n(this).attr("unselectable","off").css({"-ms-user-select":"text","-moz-user-select":"text","-webkit-user-select":"text","user-select":"text"}).each(function(){this.onselectstart=null})})},_mouseCapture:function(n){return this.disabled?!1:this._getHandle(n)?(this._disableSelection(this.host),!0):!1},_getScrollParent:function(t){var i;return i=n.jqx.browser.msie&&/(static|relative)/.test(t.css("position"))||/absolute/.test(t.css("position"))?t.parents().filter(function(){return/(relative|absolute|fixed)/.test(n.css(this,"position",1))&&/(auto|scroll)/.test(n.css(this,"overflow",1)+n.css(this,"overflow-y",1)+n.css(this,"overflow-x",1))}).eq(0):t.parents().filter(function(){return/(auto|scroll)/.test(n.css(this,"overflow",1)+n.css(this,"overflow-y",1)+n.css(this,"overflow-x",1))}).eq(0),/fixed/.test(t.css("position"))||!i.length?n(document):i},_mouseStart:function(t){var i=this._getMouseCoordinates(t),u=this._getParentOffset(this.host),r;if(this.feedback=this._createFeedback(t),this._zIndexBackup=this.feedback.css("z-index"),this.feedback[0].style.zIndex=this.dragZIndex,this._backupFeedbackProportions(),this._backupeMargins(),this._positionType=this.feedback.css("position"),this._scrollParent=this._getScrollParent(this.feedback),this._offset=this.positionAbs=this.host.offset(),this._offset={top:this._offset.top-this.margins.top,left:this._offset.left-this.margins.left},n.extend(this._offset,{click:{left:i.left-this._offset.left,top:i.top-this._offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset(),hostRelative:this._getRelativeOffset(this.host)}),this.position=this._generatePosition(t),this.originalPosition=this._fixPosition(),this.restricter&&this._setRestricter(),this.feedback.addClass(this.toThemeProperty("jqx-draggable-dragging")),r=this._raiseEvent(0,t),this.onDragStart&&typeof this.onDragStart=="function")this.onDragStart(this.position);return this._mouseDrag(t,!0),!0},_fixPosition:function(){var n=this._getRelativeOffset(this.host),t=this.position;return{left:this.position.left+n.left,top:this.position.top+n.top}},_mouseDrag:function(n){if(this.position=this._generatePosition(n),this.positionAbs=this._convertPositionTo("absolute"),this.feedback[0].style.left=this.position.left+"px",this.feedback[0].style.top=this.position.top+"px",this._raiseEvent(2,n),this.onDrag&&typeof this.onDrag=="function")this.onDrag(this.data,this.position);return this._handleTarget(),!1},_over:function(t,i,r){if(this.dropTarget){var u=!1,f=this;n.each(this.dropTarget,function(n,e){return u=f._overItem(e,t,i,r),u.over?!1:void 0})}return u},_overItem:function(t,i,r,u){var e;t=n(t);var f=t.offset(),o=t.outerHeight(),s=t.outerWidth(),e;if(t&&t[0]!==this.element){e=!1;switch(this.tolerance){case"intersect":i.left+r>f.left&&i.left<f.left+s&&i.top+u>f.top&&i.top<f.top+o&&(e=!0);break;case"fit":r+i.left<=f.left+s&&i.left>=f.left&&u+i.top<=f.top+o&&i.top>=f.top&&(e=!0)}return{over:e,target:t}}},_handleTarget:function(){if(this.dropTarget){var t=this.feedback.offset(),i=this.feedback.outerWidth(),r=this.feedback.outerWidth(),n=this._over(t,i,r);if(n.over){if(this._oldtarget=n.target,!this._targetEnterFired&&(this._targetEnterFired=!0,this._raiseEvent(3,{target:n.target}),this.onDropTargetEnter&&typeof this.onDropTargetEnter=="function"))this.onDropTargetEnter(n.target)}else if(this._targetEnterFired&&(this._targetEnterFired=!1,this._raiseEvent(4,{target:this._oldtarget||n.target}),this.onDropTargetLeave&&typeof this.onDropTargetLeave=="function"))this.onDropTargetLeave(this._oldtarget||n.target)}},_mouseStop:function(n){var r=!1,i=this._fixPosition(),t={width:this.host.outerWidth(),height:this.host.outerHeight()};if(this.feedback[0].style.opacity=this._oldOpacity,this.revert||(this.feedback[0].style.zIndex=this._zIndexBackup),this._enableSelection(this.host),this.dropped&&(r=this.dropped,this.dropped=!1),(!this.element||!this.element.parentNode)&&this.feedback==="original")return!1;if(this._dropElement(i),this.feedback.removeClass(this.toThemeProperty("jqx-draggable-dragging")),this._raiseEvent(1,n),this.onDragEnd&&typeof this.onDragEnd=="function")this.onDragEnd(this.data);if(this.onTargetDrop&&typeof this.onTargetDrop=="function"&&this._over(i,t.width,t.height).over)this.onTargetDrop(this._over(i,t.width,t.height).target);return this._revertHandler(),!1},_dropElement:function(n){if(this.dropAction==="default"&&this.feedback&&this.feedback[0]!==this.element&&this.feedback!=="original"&&!this.revert&&!/(fixed|absolute)/.test(this.host.css("position"))){this.host.css("position","relative");var t=this._getRelativeOffset(this.host);n=this.position,n.left-=t.left,n.top-=t.top,this.element.style.left=n.left+"px",this.element.style.top=n.top+"px"}},_revertHandler:function(){if(this.revert||n.isFunction(this.revert)&&this.revert()){var t=this;this._feedbackType!="original"?this.feedback!=null&&(this.dropAction!="none"?n(this.feedback).animate({left:t.originalPosition.left-t._offset.hostRelative.left,top:t.originalPosition.top-t._offset.hostRelative.top},parseInt(this.revertDuration,10),function(){t.feedback&&t.feedback[0]&&t._feedbackType!=="original"&&typeof t.feedback.remove=="function"&&t.feedback.remove()}):t.feedback&&t.feedback[0]&&t._feedbackType!=="original"&&typeof t.feedback.remove=="function"&&t.feedback.remove()):(this.element.style.zIndex=this.dragZIndex,n(this.host).animate({left:t.originalPosition.left-t._offset.hostRelative.left,top:t.originalPosition.top-t._offset.hostRelative.top},parseInt(this.revertDuration,10),function(){t.element.style.zIndex=t._zIndexBackup}))}},_getHandle:function(t){var i;return this.handle?n(this.handle,this.host).find("*").andSelf().each(function(){this==t.target&&(i=!0)}):i=!0,i},_createFeedback:function(){var n,t;return n=typeof this._feedbackType=="function"?this._feedbackType():this._feedbackType==="clone"?this.host.clone().removeAttr("id"):this.host,/(absolute|fixed)/.test(n.css("position"))||n.css("position","absolute"),(this.appendTo[0]!==this.host.parent()[0]||n[0]!==this.element)&&(t={},n.css({left:this.host.offset().left-this._getParentOffset(this.host).left+this._getParentOffset(n).left,top:this.host.offset().top-this._getParentOffset(this.host).top+this._getParentOffset(n).top}),n.appendTo(this.appendTo)),typeof this.initFeedback=="function"&&this.initFeedback(n),n},_getParentOffset:function(t){var t=t||this.feedback,i;return this._offsetParent=t.offsetParent(),i=this._offsetParent.offset(),this._positionType=="absolute"&&this._scrollParent[0]!==document&&n.contains(this._scrollParent[0],this._offsetParent[0])&&(i.left+=this._scrollParent.scrollLeft(),i.top+=this._scrollParent.scrollTop()),(this._offsetParent[0]==document.body||this._offsetParent[0].tagName&&this._offsetParent[0].tagName.toLowerCase()=="html"&&n.jqx.browser.msie)&&(i={top:0,left:0}),{top:i.top+(parseInt(this._offsetParent.css("border-top-width"),10)||0),left:i.left+(parseInt(this._offsetParent.css("border-left-width"),10)||0)}},_getRelativeOffset:function(n){var i=this._scrollParent||n.parent(),t;return n=n||this.feedback,n.css("position")==="relative"?(t=this.host.position(),{top:t.top-(parseInt(n.css("top"),10)||0),left:t.left-(parseInt(n.css("left"),10)||0)}):{top:0,left:0}},_backupeMargins:function(){this.margins={left:parseInt(this.host.css("margin-left"),10)||0,top:parseInt(this.host.css("margin-top"),10)||0,right:parseInt(this.host.css("margin-right"),10)||0,bottom:parseInt(this.host.css("margin-bottom"),10)||0}},_backupFeedbackProportions:function(){this.feedback[0].style.opacity=this.opacity,this._feedbackProportions={width:this.feedback.outerWidth(),height:this.feedback.outerHeight()}},_setRestricter:function(){this.restricter=="parent"&&(this.restricter=this.feedback[0].parentNode),(this.restricter=="document"||this.restricter=="window")&&this._handleNativeRestricter(),typeof this.restricter.left!="undefined"&&typeof this.restricter.top!="undefined"&&typeof this.restricter.height!="undefined"&&typeof this.restricter.width!="undefined"?this._restricter=[this.restricter.left,this.restricter.top,this.restricter.width,this.restricter.height]:/^(document|window|parent)$/.test(this.restricter)||this.restricter.constructor==Array?this.restricter.constructor==Array&&(this._restricter=this.restricter):this._handleDOMParentRestricter()},_handleNativeRestricter:function(){this._restricter=[this.restricter==="document"?0:n(window).scrollLeft()-this._offset.relative.left-this._offset.parent.left,this.restricter==="document"?0:n(window).scrollTop()-this._offset.relative.top-this._offset.parent.top,(this.restricter==="document"?0:n(window).scrollLeft())+n(this.restricter==="document"?document:window).width()-this._feedbackProportions.width-this.margins.left,(this.restricter==="document"?0:n(window).scrollTop())+(n(this.restricter==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this._feedbackProportions.height-this.margins.top]},_handleDOMParentRestricter:function(){var r=n(this.restricter),t=r[0],i;t&&(i=n(t).css("overflow")!=="hidden",this._restricter=[(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0),(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0),(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this._feedbackProportions.width-this.margins.left-this.margins.right,(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this._feedbackProportions.height-this.margins.top-this.margins.bottom],this._restrictiveContainer=r)},_convertPositionTo:function(t,i){i||(i=this.position);var u,r,f;return u=t==="absolute"?1:-1,r=this._positionType!=="absolute"||this._scrollParent[0]!=document&&n.contains(this._scrollParent[0],this._offsetParent[0])?this._scrollParent:this._offsetParent,f=/(html|body)/i.test(r[0].tagName),this._getPosition(i,u,f,r)},_getPosition:function(t,i,r,u){return{top:t.top+this._offset.relative.top*i+this._offset.parent.top*i-(n.jqx.browser.safari&&n.jqx.browser.version<526&&this._positionType=="fixed"?0:(this._positionType=="fixed"?-this._scrollParent.scrollTop():r?0:u.scrollTop())*i),left:t.left+this._offset.relative.left*i+this._offset.parent.left*i-(n.jqx.browser.safari&&n.jqx.browser.version<526&&this._positionType=="fixed"?0:(this._positionType=="fixed"?-this._scrollParent.scrollLeft():r?0:u.scrollLeft())*i)}},_generatePosition:function(t){var f=this._positionType=="absolute"&&!(this._scrollParent[0]!=document&&n.contains(this._scrollParent[0],this._offsetParent[0]))?this._offsetParent:this._scrollParent,s=/(html|body)/i.test(f[0].tagName),r=this._getMouseCoordinates(t),e=r.left,o=r.top,i,u;return this.originalPosition&&this.restricter&&(this._restrictiveContainer?(u=this._restrictiveContainer.offset(),i=[this._restricter[0]+u.left,this._restricter[1]+u.top,this._restricter[2]+u.left,this._restricter[3]+u.top]):i=this._restricter,r.left-this._offset.click.left<i[0]&&(e=i[0]+this._offset.click.left),r.top-this._offset.click.top<i[1]&&(o=i[1]+this._offset.click.top),r.left-this._offset.click.left>i[2]&&(e=i[2]+this._offset.click.left),r.top-this._offset.click.top>i[3]&&(o=i[3]+this._offset.click.top)),{top:o-this._offset.click.top-this._offset.relative.top-this._offset.parent.top+(n.jqx.browser.safari&&n.jqx.browser.version<526&&this._positionType=="fixed"?0:this._positionType=="fixed"?-this._scrollParent.scrollTop():s?0:f.scrollTop()),left:e-this._offset.click.left-this._offset.relative.left-this._offset.parent.left+(n.jqx.browser.safari&&n.jqx.browser.version<526&&this._positionType=="fixed"?0:this._positionType=="fixed"?-this._scrollParent.scrollLeft():s?0:f.scrollLeft())}},_raiseEvent:function(t,i){if(this.triggerEvents==undefined||this.triggerEvents!=!1){var u=this._events[t],r=n.Event(u),i=i||{};return i.position=this.position,i.element=this.element,n.extend(i,this.data),i.feedback=this.feedback,r.args=i,this.host.trigger(r)}},disable:function(){this.disabled=!0,this.host.addClass(this.toThemeProperty("jqx-draggable-disabled"))},enable:function(){this.disabled=!1,this.host.removeClass(this.toThemeProperty("jqx-draggable-disabled"))},propertyChangedHandler:function(t,i,r,u){i==="dropTarget"?typeof u=="string"&&(t.dropTarget=n(u)):i=="cursor"&&t.host.css("cursor",t.cursor)}})})(jQuery),function(n){jqxListBoxDragDrop=function(){n.extend(n.jqx._jqxListBox.prototype,{_hitTestBounds:function(n,t,i){var u=n.host.offset(),f=i-parseInt(u.top),h=t-parseInt(u.left),e=n._hitTest(h,f),o,s,r;return f<0?null:e!=null?(o=parseInt(u.left),s=o+n.host.width(),o<=t+e.width/2&&t<=s)?e:null:n.items&&n.items.length>0&&(r=n.items[n.items.length-1],r.top+r.height+15>=f)?r:null},_handleDragStart:function(t,i){var r=n.jqx.mobile.isTouchDevice();if(r&&i.allowDrag)t.on(n.jqx.mobile.getTouchEventName("touchstart"),function(){n.jqx.mobile.setTouchScroll(!1,i.element.id)});t.off("dragStart");t.on("dragStart",function(t){var u,e;if(i.allowDrag&&!i.disabled){i.feedbackElement=n("<div style='z-index: 99999; position: absolute;'><\/div>"),i.feedbackElement.addClass(i.toThemeProperty("jqx-listbox-feedback")),i.feedbackElement.appendTo(n(document.body)),i.feedbackElement.hide(),i.isDragging=!0,i._dragCancel=!1;var f=i._getMouseCoordinates(t),r=i._hitTestBounds(i,f.left,f.top),o=n.find(".jqx-listbox");if(i._listBoxes=o,n.each(i._listBoxes,function(){var t=n.data(this,"jqxListBox").instance;t._enableHover=t.enableHover,t.enableHover=!1,n.jqx.mobile.setTouchScroll(!1,i.element.id)}),u=function(){i._dragCancel=!0,n(t.args.element).jqxDragDrop({triggerEvents:!1}),n(t.args.element).jqxDragDrop("cancelDrag"),clearInterval(i._autoScrollTimer),n(t.args.element).jqxDragDrop({triggerEvents:!0}),n.each(i._listBoxes,function(){var t=n.data(this,"jqxListBox").instance;t._enableHover!=undefined&&(t.enableHover=t._enableHover,n.jqx.mobile.setTouchScroll(!0,i.element.id))})},r==null||r.isGroup)r==null&&u();else{if(i._dragItem=r,i.dragStart&&(e=i.dragStart(r),e==!1))return u(),!1;r.disabled&&u(),i._raiseEvent(4,{label:r.label,value:r.value,originalEvent:t.args})}}return!1})},_handleDragging:function(t,i){t.off("dragging");t.on("dragging",function(t){var u=t.args,r,f;i._dragCancel||(r=i._getMouseCoordinates(t),f=r,i._lastDraggingPosition=r,i._dragOverItem=null,i.feedbackElement.hide(),n.each(i._listBoxes,function(){var l=n(this).offset(),s=l.top+20,a=n(this).height()+s-40,h=l.left,v=n(this).width(),y=h+v,t=n.data(this,"jqxListBox").instance,e=t._hitTestBounds(t,r.left,r.top),c=t.vScrollInstance,o;e!=null&&t.allowDrop&&!t.disabled&&(i._dragOverItem=e,e.element&&(i.feedbackElement.show(),o=n(e.element).offset().top+1,f.top>o+e.height/2&&(o=o+e.height),i.feedbackElement.css("top",o),i.feedbackElement.css("left",h),t.vScrollBar.css("visibility")!="visible"?i.feedbackElement.width(n(this).width()):i.feedbackElement.width(n(this).width()-20))),r.left>=h&&r.left<y?u.position.top<s&&u.position.top>=s-30?(clearInterval(t._autoScrollTimer),c.value!=0&&i.feedbackElement.hide(),t._autoScrollTimer=setInterval(function(){var n=t.scrollUp();n||clearInterval(t._autoScrollTimer)},100)):u.position.top>a&&u.position.top<a+30?(clearInterval(t._autoScrollTimer),t.vScrollBar.css("visibility")!="hidden"&&c.value!=c.max&&i.feedbackElement.hide(),t._autoScrollTimer=setInterval(function(){var n=t.scrollDown();n||clearInterval(t._autoScrollTimer)},100)):clearInterval(t._autoScrollTimer):(i._dragOverItem==null&&i.feedbackElement.hide(),clearInterval(t._autoScrollTimer))}))})},_handleDragEnd:function(t,i){var r=n.find(".jqx-listbox");t.off("dragEnd");t.on("dragEnd",function(t){var u,h,r,f,w,c,l,a,e,v;clearInterval(i._autoScrollTimer);var y=n.jqx.mobile.isTouchDevice(),o=y?i._lastDraggingPosition:i._getMouseCoordinates(t),p=n.find(".jqx-listbox"),s=null;if(i.feedbackElement.remove(),!i._dragCancel){if(n.each(p,function(){var u=parseInt(n(this).offset().left),e=u+n(this).width(),t=n.data(this,"jqxListBox").instance,r,f;clearInterval(t._autoScrollTimer),t._enableHover!=undefined&&(t.enableHover=t._enableHover,n.jqx.mobile.setTouchScroll(!0,i.element.id)),i._dragItem!=null&&o.left+i._dragItem.width/2>=u&&o.left<e&&(r=parseInt(n(this).offset().top),f=r+n(this).height(),o.top>=r&&o.top<=f&&(s=n(this)))}),u=i._dragItem,s!=null&&s.length>0){if(r=n.data(s[0],"jqxListBox").instance,h=r.allowDrop,h&&!r.disabled)if(r=n.data(s[0],"jqxListBox").instance,f=r._hitTestBounds(r,o.left,o.top),f=i._dragOverItem,f==null||f.isGroup){if(r.dropAction!="none"){if(r.content.find(".draggable").length>0&&r.content.find(".draggable").jqxDragDrop("destroy"),i.dragEnd){if(e=i.dragEnd(i._dragItem,i._dragItem,t.args),e==!1)return n(t.args.element).jqxDragDrop({triggerEvents:!1}),n(t.args.element).jqxDragDrop("cancelDrag"),clearInterval(i._autoScrollTimer),n(t.args.element).jqxDragDrop({triggerEvents:!0}),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!1;e==undefined&&(e=!0)}r.addItem(i._dragItem),r.dropAction=="default"&&(u.index>0&&i.selectIndex(u.index-1),i.removeItem(u)),r.selectIndex(r.items.length-1)}}else{if(e=!0,i.dragEnd){if(e=i.dragEnd(u,f,t.args),e==!1)return n(t.args.element).jqxDragDrop({triggerEvents:!1}),n(t.args.element).jqxDragDrop("cancelDrag"),clearInterval(i._autoScrollTimer),n(t.args.element).jqxDragDrop({triggerEvents:!0}),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!1;e==undefined&&(e=!0)}e&&(w=f.index,c=function(){for(var t=f.index,i,n=t-2;n<=t+2;n++)if(r.items&&r.items.length>n&&(i=r.items[n],i!=null&&i.value==u.value))return n;return t},r.dropAction!="none"&&(l=n(f.element).offset().top+1,r.content.find(".draggable").length>0&&r.content.find(".draggable").jqxDragDrop("destroy"),o.top>l+f.height/2?r.insertAt(i._dragItem,f.index+1):r.insertAt(i._dragItem,f.index),i.dropAction=="default"&&(u.index>0&&i.selectIndex(u.index-1),i.removeItem(u)),a=c(),r.selectIndex(a)))}}else if(i.dragEnd&&(v=i.dragEnd(u,t.args),!1==v))return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!1;return u!=null&&i._raiseEvent(5,{label:u.label,value:u.value,originalEvent:t.args}),!1}})},_enableDragDrop:function(){var i,t;this.allowDrag&&this.host.jqxDragDrop&&(i=this.content.find(".draggable"),i.length>0&&(t=this,i.jqxDragDrop({cursor:"arrow",revertDuration:0,appendTo:"body",dragZIndex:99999,revert:!0,initFeedback:function(i){var r=n('<span style="white-space: nowrap;" class="'+t.toThemeProperty("jqx-fill-state-normal")+'">'+i.text()+"<\/span>"),u;n(document.body).append(r),u=r.width(),r.remove(),i.width(u+5),i.addClass(t.toThemeProperty("jqx-fill-state-pressed"))}}),this._autoScrollTimer=null,t._dragItem=null,t._handleDragStart(i,t),t._handleDragging(i,t),t._handleDragEnd(i,t)))},_getMouseCoordinates:function(t){if(this._isTouchDevice=n.jqx.mobile.isTouchDevice(),this._isTouchDevice){var i=n.jqx.position(t);return{left:i.left,top:i.top}}return{left:t.args.pageX,top:t.args.pageY}}})},jqxTreeDragDrop=function(){n.extend(n.jqx._jqxTree.prototype,{_hitTestBounds:function(t,i,r){var o=this,u=null,f,e;return t._visibleItems&&(f=parseInt(t.host.offset().left),e=t.host.outerWidth(),n.each(t._visibleItems,function(){if(i>=f&&i<f+e&&this.top+5<r&&r<this.top+this.height){var o=n(this.element).parents("li:first");if(o.length>0&&(u=t.getItem(o[0]),u!=null))return u.height=this.height,u.top=this.top,!1}})),u},_handleDragStart:function(t,i){i._dragOverItem&&i._dragOverItem.titleElement.removeClass(i.toThemeProperty("jqx-fill-state-hover"));var r=n.jqx.mobile.isTouchDevice();if(r&&i.allowDrag)t.on(n.jqx.mobile.getTouchEventName("touchstart"),function(){n.jqx.mobile.setTouchScroll(!1,"panel"+i.element.id)});t.off("dragStart");t.on("dragStart",function(t){i.feedbackElement=n("<div style='z-index: 99999; position: absolute;'><\/div>"),i.feedbackElement.addClass(i.toThemeProperty("jqx-listbox-feedback")),i.feedbackElement.appendTo(n(document.body)),i.feedbackElement.hide(),i._dragCancel=!1;var u=t.args.position,r=n.find(".jqx-tree");return i._trees=r,n.each(r,function(){var r=n.data(this,"jqxTree").instance,o=r.host.find(".draggable"),f,u,e;if(r._syncItems(o),r.allowDrag&&!r.disabled&&(f=n(t.target).parents("li:first"),f.length>0&&(u=r.getItem(f[0]),u))){if(i._dragItem=u,r.dragStart&&(e=r.dragStart(u),e==!1))return i._dragCancel=!0,n(t.args.element).jqxDragDrop({triggerEvents:!1}),n(t.args.element).jqxDragDrop("cancelDrag"),clearInterval(i._autoScrollTimer),n(t.args.element).jqxDragDrop({triggerEvents:r}),!1;r._raiseEvent(8,{label:u.label,value:u.value,originalEvent:t.args})}}),!1})},_getMouseCoordinates:function(t){if(this._isTouchDevice=n.jqx.mobile.isTouchDevice(),this._isTouchDevice){var i=n.jqx.position(t);return{left:i.left,top:i.top}}return{left:t.args.pageX,top:t.args.pageY}},_handleDragging:function(t,i){var t=this.host.find(".draggable");t.off("dragging");t.on("dragging",function(t){var f=t.args,o=f.position,e=i._trees,u,r;i._dragCancel||(i._dragOverItem&&i._dragOverItem.titleElement.removeClass(i.toThemeProperty("jqx-fill-state-hover")),u=!0,r=i._getMouseCoordinates(t),i._lastDraggingPosition=r,n.each(e,function(){var l=n(this).offset(),e=l.top+20,a=n(this).height()+e-40,o=l.left,v=n(this).width(),y=o+v,t=n.data(this,"jqxTree").instance,h,f,s,c;!t.disabled&&t.allowDrop&&(h=t.vScrollInstance,f=t._hitTestBounds(t,r.left,r.top),f!=null&&(i._dragOverItem&&i._dragOverItem.titleElement.removeClass(t.toThemeProperty("jqx-fill-state-hover")),i._dragOverItem=f,f.element&&(i.feedbackElement.show(),s=f.top,c=r.top,i._dropPosition="before",c>s+f.height/3&&(s=f.top+f.height/2,i._dragOverItem.titleElement.addClass(i.toThemeProperty("jqx-fill-state-hover")),i.feedbackElement.hide(),i._dropPosition="inside"),c>f.top+f.height-f.height/3&&(s=f.top+f.height,i._dragOverItem.titleElement.removeClass(i.toThemeProperty("jqx-fill-state-hover")),i.feedbackElement.show(),i._dropPosition="after"),i.feedbackElement.css("top",s),o=-2+parseInt(f.titleElement.offset().left),i.feedbackElement.css("left",o),i.feedbackElement.width(n(f.titleElement).width()+12))),r.left>=o&&r.left<y?(r.top+20>=e&&r.top<=e+t.host.height()&&(u=!1),r.top<e&&r.top>=e-30?(clearInterval(t._autoScrollTimer),h.value!=0&&i.feedbackElement.hide(),t._autoScrollTimer=setInterval(function(){var n=t.panelInstance.scrollUp(),i=t.host.find(".draggable");t._syncItems(i),n||clearInterval(t._autoScrollTimer)},100)):r.top>a&&r.top<a+30?(clearInterval(t._autoScrollTimer),h.value!=h.max&&i.feedbackElement.hide(),t._autoScrollTimer=setInterval(function(){var n=t.panelInstance.scrollDown(),i=t.host.find(".draggable");t._syncItems(i),n||clearInterval(t._autoScrollTimer)},100)):clearInterval(t._autoScrollTimer)):clearInterval(t._autoScrollTimer))}),u&&i.feedbackElement&&i.feedbackElement.hide())})},_handleDragEnd:function(t,i){t.off("dragEnd");t.on("dragEnd",function(t){var b=i.host.find(".draggable"),f,v,r,c,l,a,u,s,e,y;clearInterval(i._autoScrollTimer);var k=t.args.position,p=i._trees,o=null,w=n.jqx.mobile.isTouchDevice(),h=w?i._lastDraggingPosition:i._getMouseCoordinates(t);if(i.feedbackElement.remove(),i._dragCancel)return!1;if(i._dragOverItem&&i._dragOverItem.titleElement.removeClass(i.toThemeProperty("jqx-fill-state-hover")),n.each(p,function(){var r=parseInt(n(this).offset().left),f=r+n(this).width(),e=n.data(this,"jqxTree").instance,t,u;clearInterval(e._autoScrollTimer),i._dragItem!=null&&h.left>=r&&h.left<f&&(t=parseInt(n(this).offset().top),u=t+n(this).height(),h.top>=t&&h.top<=u&&(o=n(this)))}),f=i._dragItem,o!=null&&o.length>0)v=o.jqxTree("allowDrop"),v&&(r=n.data(o[0],"jqxTree").instance,c=i._dragOverItem,c!=null&&i._dragOverItem.treeInstance.element.id==r.element.id?(u=!0,i.dragEnd&&(u=i.dragEnd(f,c,t.args,i._dropPosition,o),u==!1&&(n(t.args.element).jqxDragDrop({triggerEvents:!1}),n(t.args.element).jqxDragDrop("cancelDrag"),clearInterval(i._autoScrollTimer),n(t.args.element).jqxDragDrop({triggerEvents:!0})),undefined==u&&(u=!0)),u&&(l=function(){var n=i._dragItem.treeInstance;n._refreshMapping(),n._updateItemsNavigation(),n._render(!0,!1),n.checkboxes&&n._updateCheckStates(),i._dragItem.treeInstance=r,i._syncItems(i._dragItem.treeInstance.host.find(".draggable"))},r.dropAction!="none"&&i._dragItem.id!=i._dragOverItem.id&&(i._dropPosition=="inside"?(r._drop(i._dragItem.element,i._dragOverItem.element,-1,r),l()):(a=0,i._dropPosition=="after"&&a++,r._drop(i._dragItem.element,i._dragOverItem.parentElement,a+n(i._dragOverItem.element).index(),r),l())),r._render(!0,!1),e=r.host.find(".draggable"),i._syncItems(e),i._dragOverItem=null,i._dragItem=null,r._refreshMapping(),r._updateItemsNavigation(),r.selectedItem=null,r.selectItem(f.element),r.checkboxes&&r._updateCheckStates(),r._render(!0,!1))):r.dropAction!="none"&&r.allowDrop&&(u=!0,i.dragEnd&&(u=i.dragEnd(f,c,t.args,i._dropPosition,o),u==!1&&(n(t.args.element).jqxDragDrop({triggerEvents:!1}),n(t.args.element).jqxDragDrop("cancelDrag"),clearInterval(i._autoScrollTimer),n(t.args.element).jqxDragDrop({triggerEvents:!0})),undefined==u&&(u=!0)),u&&(i._dragItem.parentElement=null,r._drop(i._dragItem.element,null,-1,r),s=i._dragItem.treeInstance,s._refreshMapping(),s._updateItemsNavigation(),s.checkboxes&&s._updateCheckStates(),e=s.host.find(".draggable"),i._syncItems(e),i._dragItem.treeInstance=r,r.items[r.items.length]=i._dragItem,r._render(!0,!1),r.selectItem(f.element),r._refreshMapping(),r._updateItemsNavigation(),e=r.host.find(".draggable"),r._syncItems(e),r.checkboxes&&r._updateCheckStates(),i._dragOverItem=null,i._dragItem=null)));else if(i.dragEnd&&(y=i.dragEnd(f,t.args),!1==y))return!1;return f!=null&&i._raiseEvent(7,{label:f.label,value:f.value,originalEvent:t.args}),!1})},_drop:function(t,i,r,u){var s,o,f,e;n(i).parents("#"+t.id).length>0||(i==null||i.id!=t.id)&&(s=this,u.element.innerHTML.indexOf("UL")&&(o=u.host.find("ul:first")),i==undefined&&i==null?r==undefined||r==-1?o.append(t):o.children("li").eq(r).length==0?o.children("li").eq(r-1).after(t):o.children("li").eq(r)[0].id!=t.id&&o.children("li").eq(r).before(t):r==undefined||r==-1?(i=n(i),f=i.find("ul:first"),f.length==0?(ulElement=n("<ul><\/ul>"),n(i).append(ulElement),f=i.find("ul:first"),e=u.itemMapping["id"+i[0].id].item,e.subtreeElement=f[0],e.hasItems=!0,f.addClass(u.toThemeProperty("jqx-tree-dropdown")),f.append(t),t=f.find("li:first"),e.parentElement=t):f.append(t)):(i=n(i),f=i.find("ul:first"),f.length==0?(ulElement=n("<ul><\/ul>"),n(i).append(ulElement),f=i.find("ul:first"),i&&(e=u.itemMapping["id"+i[0].id].item,e.subtreeElement=f[0],e.hasItems=!0),f.addClass(u.toThemeProperty("jqx-tree-dropdown")),f.append(t),t=f.find("li:first"),e.parentElement=t):f.children("li").eq(r).length==0?f.children("li").eq(r-1).after(t):f.children("li").eq(r)[0].id!=t.id&&f.children("li").eq(r).before(t)))},_enableDragDrop:function(){var i,t,r;this.allowDrag&&this.host.jqxDragDrop&&(i=this.host.find(".draggable"),t=this,i.length>0&&(i.jqxDragDrop({cursor:"arrow",revertDuration:0,appendTo:"body",dragZIndex:99999,revert:!0,initFeedback:function(i){var r=n('<span style="white-space: nowrap;" class="'+t.toThemeProperty("jqx-fill-state-normal")+'">'+i.text()+"<\/span>"),u;n(document.body).append(r),u=r.width(),r.remove(),i.width(u+5),i.addClass(t.toThemeProperty("jqx-fill-state-pressed"))}}),r=i.jqxDragDrop("isDestroyed"),r&&i.jqxDragDrop("_createDragDrop"),this._autoScrollTimer=null,t._dragItem=null,t._handleDragStart(i,t),t._handleDragging(i,t),t._handleDragEnd(i,t)))}})}}(jQuery);
//# sourceMappingURL=jqxdragdrop.min.js.map