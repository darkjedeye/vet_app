var productCategories,parentProducts;$(document).ready(function(){$.ajax({dataType:"json",contentType:"application/json; charset=utf-8",cache:!1,url:"/Store/GetProductCategories",type:"GET",success:function(n){productCategories=n.Data;console.log(n)},error:function(n){alert(n.statusText)}});$.ajax({dataType:"json",contentType:"application/json; charset=utf-8",cache:!1,url:"/Store/GetParentProducts",type:"GET",success:function(n){parentProducts=n.Data;console.log(n)},error:function(n){alert(n.statusText)}});var n=function(){var n={datatype:"json",datafields:[{name:"Id",type:"string"},{name:"ParentProductId",type:"string"},{name:"HasVariants",type:"bool"},{name:"IsActive",type:"bool"},{name:"ProductTypeId",type:"string"},{name:"ProductTypeName",map:"Category>Name",type:"string"},{name:"Name",type:"string"},{name:"Quantity",type:"number"},{name:"SellPrice",type:"number"},{name:"Cost",type:"number"},{name:"Size",type:"string"},{name:"Description",type:"string"},{name:"ImageLink1FileName",type:"string"},{name:"ImageLink2FileName",type:"string"},{name:"ImageLink3FileName",type:"string"},{name:"ImageLink1",type:"string"},{name:"ImageLink2",type:"string"},{name:"ImageLink3",type:"string"},{name:"UpdatedOn",type:"date"},{name:"UpdatedBy",type:"string"}],url:"/Store/GetProducts",deleterow:function(n,t){var i=JSON.stringify({id:$("#grid").jqxGrid("getcellvalue",n,"Id")});$.ajax({dataType:"json",contentType:"application/json; charset=utf-8",cache:!1,url:"/Store/DeleteProduct",data:i,type:"POST",success:function(n){n.Success?t(!0):t(!1)},error:function(n){alert(n.statusText);t(!1)}})}};return new $.jqx.dataAdapter(n)};$("#grid").jqxGrid({autoheight:!0,autorowheight:!0,editable:!0,filterable:!0,pageable:!0,pagesize:25,pagesizeoptions:["25","50","100"],selectionmode:"singlecell",showstatusbar:!0,sortable:!0,source:n(),width:"100%",columns:[{text:"Id",datafield:"Id",hidden:!0},{text:"ParentProductId",datafield:"ParentProductId",hidden:!0},{text:"HasVariants",datafield:"HasVariants",hidden:!0},{text:"ProductTypeId",datafield:"ProductTypeId",hidden:!0},{text:"Active?",datafield:"IsActive",columntype:"checkbox",width:60},{text:"Parent Product",datafield:"ParentProductName",width:80,columntype:"dropdownlist",createeditor:function(n,t,i){i.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0,source:parentProducts,displayMember:"Name",valueMember:"Id"});i.on("select",function(t){if(t.args){var i=t.args.item;i&&$("#grid").jqxGrid("setcellvalue",n,"ParentProductId",i.value)}})}},{text:"Category",datafield:"ProductTypeName",width:80,columntype:"dropdownlist",createeditor:function(n,t,i){i.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0,source:productCategories,displayMember:"Name",valueMember:"Id"});i.on("select",function(t){if(t.args){var i=t.args.item;i&&$("#grid").jqxGrid("setcellvalue",n,"ProductTypeId",i.value)}})},cellvaluechanging:function(n,t,i,r,u){if(u=="")return r}},{text:"Name",datafield:"Name",width:150,validation:function(n,t){var i=t.toString().length;return i>100?{result:!1,message:"Category name cannot be longer than 100 characters. You have "+i+"."}:i==0?{result:!1,message:"Category name most have a value"}:!0}},{text:"Quantity",datafield:"Quantity",align:"right",cellsalign:"right",columntype:"numberinput",width:65,validation:function(n,t){var i=parseInt(t);return i<0?{result:!1,message:"Quantity must be greater 0 or greater"}:!0},createeditor:function(n,t,i){i.jqxNumberInput({decimalDigits:0,digits:3,height:"25px"})}},{text:"Sell Price",datafield:"SellPrice",align:"right",cellsalight:"right",cellsformat:"c2",columntype:"numberinput",width:120,validation:function(n,t){return t<0?{result:!1,message:"Price should be greater than zero."}:!0},createeditor:function(n,t,i){i.jqxNumberInput({decimalDigits:2,digits:3,min:0,symbol:"$",height:"25px"})}},{text:"Cost",datafield:"Cost",align:"right",cellsalight:"right",cellsformat:"c2",columntype:"numberinput",width:55,validation:function(n,t){return t<0?{result:!1,message:"Cost should be greater than zero."}:!0},createeditor:function(n,t,i){i.jqxNumberInput({decimalDigits:2,digits:3,min:0,symbol:"$",height:"25px"})}},{text:"Size",datafield:"Size",width:50},{text:"Description",datafield:"Description",width:250},{text:"ImageLink1",datafield:"ImageLink1",hidden:!0},{text:"Image Link 1",datafield:"ImageLink1FileName",columntype:"dropdownlist",width:210,createeditor:function(n,t,i){i.jqxDropDownList({autoOpen:!0,placeHolder:"Select image",selectedIndex:-1,source:JSON.parse(productImages),displayMember:"ImageName",valueMember:"ImagePath",width:200,itemHeight:55,autoDropDownHeight:!0,renderer:function(n,t,i){var r=i,u='<img height="50" width="45" src="'+r+'"/>';return'<table style="min-width: 200px;"><tr><td style="width: 55px;" rowspan="2">'+u+"<\/td><td>"+t+"<\/td><\/tr><\/table>"}});i.on("select",function(t){if(t.args){var i=t.args.item;i&&$("#grid").jqxGrid("setcellvalue",n,"ImageLink1",i.value)}})},cellvaluechanging:function(n,t,i,r,u){if(u=="")return""}},{text:"ImageLink2",datafield:"ImageLink2",hidden:!0},{text:"Image Link 2",datafield:"ImageLink2FileName",columntype:"dropdownlist",width:210,createeditor:function(n,t,i){i.jqxDropDownList({autoOpen:!0,placeHolder:"Select image",selectedIndex:-1,source:JSON.parse(productImages),displayMember:"ImageName",valueMember:"ImagePath",width:200,itemHeight:55,autoDropDownHeight:!0,renderer:function(n,t,i){var r=i,u='<img height="50" width="45" src="'+r+'"/>';return'<table style="min-width: 200px;"><tr><td style="width: 55px;" rowspan="2">'+u+"<\/td><td>"+t+"<\/td><\/tr><\/table>"}});i.on("select",function(t){if(t.args){var i=t.args.item;i&&$("#grid").jqxGrid("setcellvalue",n,"ImageLink2",i.value)}})},cellvaluechanging:function(n,t,i,r,u){if(u=="")return""}},{text:"ImageLink3",datafield:"ImageLink3",hidden:!0},{text:"Image Link 3",datafield:"ImageLink3FileName",columntype:"dropdownlist",width:210,createeditor:function(n,t,i){i.jqxDropDownList({autoOpen:!0,placeHolder:"Select image",selectedIndex:-1,source:JSON.parse(productImages),displayMember:"ImageName",valueMember:"ImagePath",width:200,itemHeight:55,autoDropDownHeight:!0,renderer:function(n,t,i){var r=i,u='<img height="50" width="45" src="'+r+'"/>';return'<table style="min-width: 200px;"><tr><td style="width: 55px;" rowspan="2">'+u+"<\/td><td>"+t+"<\/td><\/tr><\/table>"}});i.on("select",function(t){if(t.args){var i=t.args.item;i&&$("#grid").jqxGrid("setcellvalue",n,"ImageLink3",i.value)}})},cellvaluechanging:function(n,t,i,r,u){if(u=="")return""}},{text:"Updated On",datafield:"UpdatedOn",editable:!1,cellsformat:"M/d/yyyy h:mm:ss",cellsalign:"right",width:150},{text:"Updated By",datafield:"UpdatedBy",editable:!1,width:100}],renderstatusbar:function(t){var i=$("<div style='overflow: hidden; position: relative; margin: 5px;'><\/div>"),r=$("<div style='float: left; margin-left: 5px;'><i class='icon-plus-sign'><\/i><span style='margin-left: 4px; position: relative; top: -3px;'>Add<\/span><\/div>"),u=$("<div style='float: left; margin-left: 5px;'><i class='icon-remove-sign'><\/i><span style='margin-left: 4px; position: relative; top: -3px;'>Delete<\/span><\/div>"),f=$("<div style='float: left; margin-left: 5px;'><i class='icon-refresh'><\/i><span style='margin-left: 4px; position: relative; top: -3px;'>Reload<\/span><\/div>");i.append(r);i.append(u);i.append(f);t.append(i);r.jqxButton({width:80,height:20});u.jqxButton({width:85,height:20});f.jqxButton({width:85,height:20});r.click(function(){$("#grid").jqxGrid("addrow",null,{Id:"",IsActive:!0,ProductTypeId:"",Name:"New Product Name",Quantity:0,SellPrice:0,Cost:0,Size:"",Description:"",ImageLink1:"",ImageLink2:"",ImageLink3:""})});u.click(function(){var n=$("#grid").jqxGrid("getselectedcell").rowindex,i=$("#grid").jqxGrid("getdatainformation").rowscount,t,r;n>=0&&n<i&&(t=$("#grid").jqxGrid("getrowid",n),r=$("#grid").jqxGrid("deleterow",t))});f.click(function(){$("#grid").jqxGrid({source:n()})})}});$("#grid").on("cellvaluechanged",function(){var f=args.datafield,i=args.rowindex,e=args.newvalue,o=args.oldvalue,t=args.datafield;if(t!="Id"&&t!="UpdatedOn"&&t!="UpdatedBy"&&t!="ProductTypeName"){var n=$("#grid").jqxGrid("getrowdata",i),r={Id:n.Id,IsActive:n.IsActive,ProductTypeId:n.ProductTypeId,Name:n.Name,Quantity:n.Quantity,SellPrice:n.SellPrice,Cost:n.Cost,Size:n.Size,Description:n.Description,ImageLink1:n.ImageLink1,ImageLink2:n.ImageLink2,ImageLink3:n.ImageLink3},u=JSON.stringify(r);$.ajax({cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",url:"/Store/UpdateProduct",data:u,type:"POST",success:function(n){n.Success&&($("#grid").jqxGrid("setcellvalue",args.rowindex,"Id",n.Data.Id),$("#grid").jqxGrid("setcellvalue",args.rowindex,"UpdatedOn",n.Data.UpdatedOn),$("#grid").jqxGrid("setcellvalue",args.rowindex,"UpdatedBy",n.Data.UpdatedBy))},error:function(){}})}})});
/*
//# sourceMappingURL=ProductManager.min.js.map
*/